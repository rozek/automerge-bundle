{"version":3,"file":"index.js","sources":["../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/parse.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@automerge/automerge/dist/mjs/constants.js","../node_modules/@automerge/automerge/dist/mjs/text.js","../node_modules/@automerge/automerge/dist/mjs/counter.js","../node_modules/@automerge/automerge/dist/mjs/raw_string.js","../node_modules/@automerge/automerge/dist/mjs/proxies.js","../node_modules/@automerge/automerge/dist/mjs/numbers.js","../node_modules/@automerge/automerge/dist/mjs/low_level.js","../node_modules/@automerge/automerge/dist/mjs/internal_state.js","../node_modules/@automerge/automerge/dist/mjs/conflicts.js","../node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm?url","../../../../../../__vite-plugin-wasm-helper","../node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.js","../node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm","../node_modules/@automerge/automerge-wasm/bundler/automerge_wasm.js","../node_modules/@automerge/automerge/dist/mjs/stable.js","../node_modules/@automerge/automerge/dist/mjs/next.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/constants.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/text.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/counter.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/raw_string.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/proxies.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/low_level.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/internal_state.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm?url","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/stable.js","../node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge/dist/mjs/next.js","../node_modules/ms/index.js","../node_modules/debug/src/common.js","../node_modules/debug/src/browser.js","../node_modules/eventemitter3/index.js","../node_modules/xstate/es/_virtual/_tslib.js","../node_modules/xstate/es/types.js","../node_modules/xstate/es/actionTypes.js","../node_modules/xstate/es/constants.js","../node_modules/xstate/es/utils.js","../node_modules/xstate/es/actions.js","../node_modules/xstate/es/serviceScope.js","../node_modules/xstate/es/Actor.js","../node_modules/xstate/es/stateUtils.js","../node_modules/xstate/es/State.js","../node_modules/xstate/es/scheduler.js","../node_modules/xstate/es/registry.js","../node_modules/xstate/es/devTools.js","../node_modules/xstate/es/behaviors.js","../node_modules/xstate/es/interpreter.js","../node_modules/xstate/es/invokeUtils.js","../node_modules/xstate/es/StateNode.js","../node_modules/xstate/es/Machine.js","../node_modules/xstate/es/index.js","../node_modules/xstate/lib/_virtual/_tslib.js","../node_modules/xstate/lib/waitFor.js","../node_modules/@noble/hashes/_assert.js","../node_modules/@noble/hashes/crypto.js","../node_modules/@noble/hashes/utils.js","../node_modules/@noble/hashes/_sha2.js","../node_modules/@noble/hashes/sha256.js","../node_modules/base-x/src/index.js","../node_modules/bs58/index.js","../node_modules/bs58check/base.js","../node_modules/bs58check/index.js","../node_modules/@automerge/automerge-repo/dist/AutomergeUrl.js","../node_modules/cbor-x/decode.js","../node_modules/cbor-x/encode.js","../node_modules/@automerge/automerge-repo/dist/helpers/cbor.js","../node_modules/@automerge/automerge-repo/dist/helpers/arraysAreEqual.js","../node_modules/@automerge/automerge-repo/dist/helpers/headsAreSame.js","../node_modules/@automerge/automerge-repo/dist/helpers/withTimeout.js","../node_modules/@automerge/automerge-repo/dist/DocHandle.js","../node_modules/@automerge/automerge-repo/dist/RemoteHeadsSubscriptions.js","../node_modules/@automerge/automerge-repo/dist/helpers/throttle.js","../node_modules/@automerge/automerge-repo/dist/network/messages.js","../node_modules/@automerge/automerge-repo/dist/network/NetworkSubsystem.js","../node_modules/@automerge/automerge-repo/dist/helpers/mergeArrays.js","../node_modules/fast-sha256/sha256.js","../node_modules/@automerge/automerge-repo/dist/storage/keyHash.js","../node_modules/@automerge/automerge-repo/dist/storage/chunkTypeFromKey.js","../node_modules/@automerge/automerge-repo/dist/storage/StorageSubsystem.js","../node_modules/@automerge/automerge-repo/dist/synchronizer/Synchronizer.js","../node_modules/@automerge/automerge-repo/dist/synchronizer/DocSynchronizer.js","../node_modules/@automerge/automerge-repo/dist/synchronizer/CollectionSynchronizer.js","../node_modules/@automerge/automerge-repo/dist/Repo.js","../node_modules/@automerge/automerge-repo/dist/network/NetworkAdapter.js","../node_modules/@automerge/automerge-repo/dist/storage/StorageAdapter.js","../node_modules/@automerge/automerge-repo-storage-indexeddb/dist/index.js","../node_modules/isomorphic-ws/browser.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/messages.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/protocolVersion.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/assert.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/toArrayBuffer.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/BrowserWebSocketClientAdapter.js","../node_modules/@automerge/automerge-repo-network-websocket/dist/NodeWSServerAdapter.js","../node_modules/@automerge/automerge-repo-network-broadcastchannel/dist/index.js","../src/automerge-bundle.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Properties of the document root object\nexport const STATE = Symbol.for(\"_am_meta\"); // symbol used to hide application metadata on automerge objects\nexport const TRACE = Symbol.for(\"_am_trace\"); // used for debugging\nexport const OBJECT_ID = Symbol.for(\"_am_objectId\"); // symbol used to hide the object id on automerge objects\nexport const IS_PROXY = Symbol.for(\"_am_isProxy\"); // symbol used to test if the document is a proxy object\nexport const CLEAR_CACHE = Symbol.for(\"_am_clearCache\"); // symbol used to tell a proxy object to clear its cache\nexport const UINT = Symbol.for(\"_am_uint\");\nexport const INT = Symbol.for(\"_am_int\");\nexport const F64 = Symbol.for(\"_am_f64\");\nexport const COUNTER = Symbol.for(\"_am_counter\");\nexport const TEXT = Symbol.for(\"_am_text\");\n","import { TEXT, STATE } from \"./constants.js\";\nexport class Text {\n    constructor(text) {\n        if (typeof text === \"string\") {\n            this.elems = [...text];\n        }\n        else if (Array.isArray(text)) {\n            this.elems = text;\n        }\n        else if (text === undefined) {\n            this.elems = [];\n        }\n        else {\n            throw new TypeError(`Unsupported initial value for Text: ${text}`);\n        }\n        Reflect.defineProperty(this, TEXT, { value: true });\n    }\n    get length() {\n        return this.elems.length;\n    }\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get(index) {\n        return this.elems[index];\n    }\n    /**\n     * Iterates over the text elements character by character, including any\n     * inline objects.\n     */\n    [Symbol.iterator]() {\n        const elems = this.elems;\n        let index = -1;\n        return {\n            next() {\n                index += 1;\n                if (index < elems.length) {\n                    return { done: false, value: elems[index] };\n                }\n                else {\n                    return { done: true };\n                }\n            },\n        };\n    }\n    /**\n     * Returns the content of the Text object as a simple string, ignoring any\n     * non-character elements.\n     */\n    toString() {\n        if (!this.str) {\n            // Concatting to a string is faster than creating an array and then\n            // .join()ing for small (<100KB) arrays.\n            // https://jsperf.com/join-vs-loop-w-type-test\n            this.str = \"\";\n            for (const elem of this.elems) {\n                if (typeof elem === \"string\")\n                    this.str += elem;\n                else\n                    this.str += \"\\uFFFC\";\n            }\n        }\n        return this.str;\n    }\n    /**\n     * Returns the content of the Text object as a sequence of strings,\n     * interleaved with non-character elements.\n     *\n     * For example, the value `['a', 'b', {x: 3}, 'c', 'd']` has spans:\n     * `=> ['ab', {x: 3}, 'cd']`\n     */\n    toSpans() {\n        if (!this.spans) {\n            this.spans = [];\n            let chars = \"\";\n            for (const elem of this.elems) {\n                if (typeof elem === \"string\") {\n                    chars += elem;\n                }\n                else {\n                    if (chars.length > 0) {\n                        this.spans.push(chars);\n                        chars = \"\";\n                    }\n                    this.spans.push(elem);\n                }\n            }\n            if (chars.length > 0) {\n                this.spans.push(chars);\n            }\n        }\n        return this.spans;\n    }\n    /**\n     * Returns the content of the Text object as a simple string, so that the\n     * JSON serialization of an Automerge document represents text nicely.\n     */\n    toJSON() {\n        return this.toString();\n    }\n    /**\n     * Updates the list item at position `index` to a new value `value`.\n     */\n    set(index, value) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        this.elems[index] = value;\n    }\n    /**\n     * Inserts new list items `values` starting at position `index`.\n     */\n    insertAt(index, ...values) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        if (values.every(v => typeof v === \"string\")) {\n            this.elems.splice(index, 0, ...values.join(\"\"));\n        }\n        else {\n            this.elems.splice(index, 0, ...values);\n        }\n    }\n    /**\n     * Deletes `numDelete` list items starting at position `index`.\n     * if `numDelete` is not given, one item is deleted.\n     */\n    deleteAt(index, numDelete = 1) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        this.elems.splice(index, numDelete);\n    }\n    map(callback) {\n        this.elems.map(callback);\n    }\n    lastIndexOf(searchElement, fromIndex) {\n        this.elems.lastIndexOf(searchElement, fromIndex);\n    }\n    concat(other) {\n        return new Text(this.elems.concat(other.elems));\n    }\n    every(test) {\n        return this.elems.every(test);\n    }\n    filter(test) {\n        return new Text(this.elems.filter(test));\n    }\n    find(test) {\n        return this.elems.find(test);\n    }\n    findIndex(test) {\n        return this.elems.findIndex(test);\n    }\n    forEach(f) {\n        this.elems.forEach(f);\n    }\n    includes(elem) {\n        return this.elems.includes(elem);\n    }\n    indexOf(elem) {\n        return this.elems.indexOf(elem);\n    }\n    join(sep) {\n        return this.elems.join(sep);\n    }\n    reduce(f) {\n        this.elems.reduce(f);\n    }\n    reduceRight(f) {\n        this.elems.reduceRight(f);\n    }\n    slice(start, end) {\n        return new Text(this.elems.slice(start, end));\n    }\n    some(test) {\n        return this.elems.some(test);\n    }\n    toLocaleString() {\n        this.toString();\n    }\n}\n","import { COUNTER } from \"./constants.js\";\n/**\n * The most basic CRDT: an integer value that can be changed only by\n * incrementing and decrementing. Since addition of integers is commutative,\n * the value trivially converges.\n */\nexport class Counter {\n    constructor(value) {\n        this.value = value || 0;\n        Reflect.defineProperty(this, COUNTER, { value: true });\n    }\n    /**\n     * A peculiar JavaScript language feature from its early days: if the object\n     * `x` has a `valueOf()` method that returns a number, you can use numerical\n     * operators on the object `x` directly, such as `x + 1` or `x < 4`.\n     * This method is also called when coercing a value to a string by\n     * concatenating it with another string, as in `x + ''`.\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf\n     */\n    valueOf() {\n        return this.value;\n    }\n    /**\n     * Returns the counter value as a decimal string. If `x` is a counter object,\n     * this method is called e.g. when you do `['value: ', x].join('')` or when\n     * you use string interpolation: `value: ${x}`.\n     */\n    toString() {\n        return this.valueOf().toString();\n    }\n    /**\n     * Returns the counter value, so that a JSON serialization of an Automerge\n     * document represents the counter simply as an integer.\n     */\n    toJSON() {\n        return this.value;\n    }\n    /**\n     * Increases the value of the counter by `delta`. If `delta` is not given,\n     * increases the value of the counter by 1.\n     *\n     * Will throw an error if used outside of a change callback.\n     */\n    increment(_delta) {\n        throw new Error(\"Counters should not be incremented outside of a change callback\");\n    }\n    /**\n     * Decreases the value of the counter by `delta`. If `delta` is not given,\n     * decreases the value of the counter by 1.\n     *\n     * Will throw an error if used outside of a change callback.\n     */\n    decrement(_delta) {\n        throw new Error(\"Counters should not be decremented outside of a change callback\");\n    }\n}\n/**\n * An instance of this class is used when a counter is accessed within a change\n * callback.\n */\nclass WriteableCounter extends Counter {\n    constructor(value, context, path, objectId, key) {\n        super(value);\n        this.context = context;\n        this.path = path;\n        this.objectId = objectId;\n        this.key = key;\n    }\n    /**\n     * Increases the value of the counter by `delta`. If `delta` is not given,\n     * increases the value of the counter by 1.\n     */\n    increment(delta) {\n        delta = typeof delta === \"number\" ? delta : 1;\n        this.context.increment(this.objectId, this.key, delta);\n        this.value += delta;\n        return this.value;\n    }\n    /**\n     * Decreases the value of the counter by `delta`. If `delta` is not given,\n     * decreases the value of the counter by 1.\n     */\n    decrement(delta) {\n        return this.increment(typeof delta === \"number\" ? -delta : -1);\n    }\n}\n/**\n * Returns an instance of `WriteableCounter` for use in a change callback.\n * `context` is the proxy context that keeps track of the mutations.\n * `objectId` is the ID of the object containing the counter, and `key` is\n * the property name (key in map, or index in list) where the counter is\n * located.\n */\nexport function getWriteableCounter(value, context, path, objectId, key) {\n    return new WriteableCounter(value, context, path, objectId, key);\n}\n//module.exports = { Counter, getWriteableCounter }\n","export class RawString {\n    constructor(val) {\n        this.val = val;\n    }\n    /**\n     * Returns the content of the RawString object as a simple string\n     */\n    toString() {\n        return this.val;\n    }\n}\n","/* eslint-disable  @typescript-eslint/no-explicit-any */\nimport { Text } from \"./text.js\";\nimport { getWriteableCounter } from \"./counter.js\";\nimport { STATE, TRACE, IS_PROXY, OBJECT_ID, CLEAR_CACHE, COUNTER, INT, UINT, F64, } from \"./constants.js\";\nimport { RawString } from \"./raw_string.js\";\nfunction parseListIndex(key) {\n    if (typeof key === \"string\" && /^[0-9]+$/.test(key))\n        key = parseInt(key, 10);\n    if (typeof key !== \"number\") {\n        return key;\n    }\n    if (key < 0 || isNaN(key) || key === Infinity || key === -Infinity) {\n        throw new RangeError(\"A list index must be positive, but you passed \" + key);\n    }\n    return key;\n}\nfunction valueAt(target, prop) {\n    const { context, objectId, path, textV2 } = target;\n    const value = context.getWithType(objectId, prop);\n    if (value === null) {\n        return;\n    }\n    const datatype = value[0];\n    const val = value[1];\n    switch (datatype) {\n        case undefined:\n            return;\n        case \"map\":\n            return mapProxy(context, val, textV2, [...path, prop]);\n        case \"list\":\n            return listProxy(context, val, textV2, [...path, prop]);\n        case \"text\":\n            if (textV2) {\n                return context.text(val);\n            }\n            else {\n                return textProxy(context, val, [\n                    ...path,\n                    prop,\n                ]);\n            }\n        case \"str\":\n            return val;\n        case \"uint\":\n            return val;\n        case \"int\":\n            return val;\n        case \"f64\":\n            return val;\n        case \"boolean\":\n            return val;\n        case \"null\":\n            return null;\n        case \"bytes\":\n            return val;\n        case \"timestamp\":\n            return val;\n        case \"counter\": {\n            const counter = getWriteableCounter(val, context, path, objectId, prop);\n            return counter;\n        }\n        default:\n            throw RangeError(`datatype ${datatype} unimplemented`);\n    }\n}\nfunction import_value(value, textV2, path) {\n    switch (typeof value) {\n        case \"object\":\n            if (value == null) {\n                return [null, \"null\"];\n            }\n            else if (value[UINT]) {\n                return [value.value, \"uint\"];\n            }\n            else if (value[INT]) {\n                return [value.value, \"int\"];\n            }\n            else if (value[F64]) {\n                return [value.value, \"f64\"];\n            }\n            else if (value[COUNTER]) {\n                return [value.value, \"counter\"];\n            }\n            else if (value instanceof Date) {\n                return [value.getTime(), \"timestamp\"];\n            }\n            else if (value instanceof RawString) {\n                return [value.toString(), \"str\"];\n            }\n            else if (value instanceof Text) {\n                return [value, \"text\"];\n            }\n            else if (value instanceof Uint8Array) {\n                return [value, \"bytes\"];\n            }\n            else if (value instanceof Array) {\n                return [value, \"list\"];\n            }\n            else if (Object.getPrototypeOf(value) === Object.getPrototypeOf({})) {\n                return [value, \"map\"];\n            }\n            else if (isSameDocument(value, context)) {\n                throw new RangeError(\"Cannot create a reference to an existing document object\");\n            }\n            else {\n                throw new RangeError(`Cannot assign unknown object: ${value}`);\n            }\n        case \"boolean\":\n            return [value, \"boolean\"];\n        case \"number\":\n            if (Number.isInteger(value)) {\n                return [value, \"int\"];\n            }\n            else {\n                return [value, \"f64\"];\n            }\n        case \"string\":\n            if (textV2) {\n                return [value, \"text\"];\n            }\n            else {\n                return [value, \"str\"];\n            }\n        default:\n            throw new RangeError(`Unsupported type ${typeof value} for path ${printPath(path)}`);\n    }\n}\n// When we assign a value to a property in a proxy we recursively walk through\n// the value we are assigning and copy it into the document. This is generally\n// desirable behaviour. However, a very common bug is to accidentally assign a\n// value which is already in the document to another key within the same\n// document, this often leads to surprising behaviour where users expected to\n// _move_ the object, but it is instead copied. To avoid this we check if the\n// value is from the same document and if it is we throw an error, this means\n// we require an explicit Object.assign call to copy the object, thus avoiding\n// the footgun\nfunction isSameDocument(val, context) {\n    var _b, _c;\n    // Date is technically an object, but immutable, so allowing people to assign\n    // a date from one place in the document to another place in the document is\n    // not likely to be a bug\n    if (val instanceof Date) {\n        return false;\n    }\n    // this depends on __wbg_ptr being the wasm pointer\n    // a new version of wasm-bindgen will break this\n    // but the tests should expose the break\n    if (val && ((_c = (_b = val[STATE]) === null || _b === void 0 ? void 0 : _b.handle) === null || _c === void 0 ? void 0 : _c.__wbg_ptr) === context.__wbg_ptr) {\n        return true;\n    }\n    return false;\n}\nconst MapHandler = {\n    get(target, key) {\n        const { context, objectId, cache } = target;\n        if (key === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (key === OBJECT_ID)\n            return objectId;\n        if (key === IS_PROXY)\n            return true;\n        if (key === TRACE)\n            return target.trace;\n        if (key === STATE)\n            return { handle: context, textV2: target.textV2 };\n        if (!cache[key]) {\n            cache[key] = valueAt(target, key);\n        }\n        return cache[key];\n    },\n    set(target, key, val) {\n        const { context, objectId, path, textV2 } = target;\n        target.cache = {}; // reset cache on set\n        if (isSameDocument(val, context)) {\n            throw new RangeError(\"Cannot create a reference to an existing document object\");\n        }\n        if (key === TRACE) {\n            target.trace = val;\n            return true;\n        }\n        if (key === CLEAR_CACHE) {\n            return true;\n        }\n        const [value, datatype] = import_value(val, textV2, [...path, key]);\n        switch (datatype) {\n            case \"list\": {\n                const list = context.putObject(objectId, key, []);\n                const proxyList = listProxy(context, list, textV2, [...path, key]);\n                for (let i = 0; i < value.length; i++) {\n                    proxyList[i] = value[i];\n                }\n                break;\n            }\n            case \"text\": {\n                if (textV2) {\n                    assertString(value);\n                    context.putObject(objectId, key, value);\n                }\n                else {\n                    assertText(value);\n                    const text = context.putObject(objectId, key, \"\");\n                    const proxyText = textProxy(context, text, [...path, key]);\n                    proxyText.splice(0, 0, ...value);\n                }\n                break;\n            }\n            case \"map\": {\n                const map = context.putObject(objectId, key, {});\n                const proxyMap = mapProxy(context, map, textV2, [...path, key]);\n                for (const key in value) {\n                    proxyMap[key] = value[key];\n                }\n                break;\n            }\n            default:\n                context.put(objectId, key, value, datatype);\n        }\n        return true;\n    },\n    deleteProperty(target, key) {\n        const { context, objectId } = target;\n        target.cache = {}; // reset cache on delete\n        context.delete(objectId, key);\n        return true;\n    },\n    has(target, key) {\n        const value = this.get(target, key);\n        return value !== undefined;\n    },\n    getOwnPropertyDescriptor(target, key) {\n        // const { context, objectId } = target\n        const value = this.get(target, key);\n        if (typeof value !== \"undefined\") {\n            return {\n                configurable: true,\n                enumerable: true,\n                value,\n            };\n        }\n    },\n    ownKeys(target) {\n        const { context, objectId } = target;\n        // FIXME - this is a tmp workaround until fix the dupe key bug in keys()\n        const keys = context.keys(objectId);\n        return [...new Set(keys)];\n    },\n};\nconst ListHandler = {\n    get(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (index === Symbol.hasInstance) {\n            return (instance) => {\n                return Array.isArray(instance);\n            };\n        }\n        if (index === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (index === OBJECT_ID)\n            return objectId;\n        if (index === IS_PROXY)\n            return true;\n        if (index === TRACE)\n            return target.trace;\n        if (index === STATE)\n            return { handle: context };\n        if (index === \"length\")\n            return context.length(objectId);\n        if (typeof index === \"number\") {\n            return valueAt(target, index);\n        }\n        else {\n            return listMethods(target)[index];\n        }\n    },\n    set(target, index, val) {\n        const { context, objectId, path, textV2 } = target;\n        index = parseListIndex(index);\n        if (isSameDocument(val, context)) {\n            throw new RangeError(\"Cannot create a reference to an existing document object\");\n        }\n        if (index === CLEAR_CACHE) {\n            return true;\n        }\n        if (index === TRACE) {\n            target.trace = val;\n            return true;\n        }\n        if (typeof index == \"string\") {\n            throw new RangeError(\"list index must be a number\");\n        }\n        const [value, datatype] = import_value(val, textV2, [...path, index]);\n        switch (datatype) {\n            case \"list\": {\n                let list;\n                if (index >= context.length(objectId)) {\n                    list = context.insertObject(objectId, index, []);\n                }\n                else {\n                    list = context.putObject(objectId, index, []);\n                }\n                const proxyList = listProxy(context, list, textV2, [...path, index]);\n                proxyList.splice(0, 0, ...value);\n                break;\n            }\n            case \"text\": {\n                if (textV2) {\n                    assertString(value);\n                    if (index >= context.length(objectId)) {\n                        context.insertObject(objectId, index, value);\n                    }\n                    else {\n                        context.putObject(objectId, index, value);\n                    }\n                }\n                else {\n                    let text;\n                    assertText(value);\n                    if (index >= context.length(objectId)) {\n                        text = context.insertObject(objectId, index, \"\");\n                    }\n                    else {\n                        text = context.putObject(objectId, index, \"\");\n                    }\n                    const proxyText = textProxy(context, text, [...path, index]);\n                    proxyText.splice(0, 0, ...value);\n                }\n                break;\n            }\n            case \"map\": {\n                let map;\n                if (index >= context.length(objectId)) {\n                    map = context.insertObject(objectId, index, {});\n                }\n                else {\n                    map = context.putObject(objectId, index, {});\n                }\n                const proxyMap = mapProxy(context, map, textV2, [...path, index]);\n                for (const key in value) {\n                    proxyMap[key] = value[key];\n                }\n                break;\n            }\n            default:\n                if (index >= context.length(objectId)) {\n                    context.insert(objectId, index, value, datatype);\n                }\n                else {\n                    context.put(objectId, index, value, datatype);\n                }\n        }\n        return true;\n    },\n    deleteProperty(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        const elem = context.get(objectId, index);\n        if (elem != null && elem[0] == \"counter\") {\n            throw new TypeError(\"Unsupported operation: deleting a counter from a list\");\n        }\n        context.delete(objectId, index);\n        return true;\n    },\n    has(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (typeof index === \"number\") {\n            return index < context.length(objectId);\n        }\n        return index === \"length\";\n    },\n    getOwnPropertyDescriptor(target, index) {\n        const { context, objectId } = target;\n        if (index === \"length\")\n            return { writable: true, value: context.length(objectId) };\n        if (index === OBJECT_ID)\n            return { configurable: false, enumerable: false, value: objectId };\n        index = parseListIndex(index);\n        const value = valueAt(target, index);\n        return { configurable: true, enumerable: true, value };\n    },\n    getPrototypeOf(target) {\n        return Object.getPrototypeOf(target);\n    },\n    ownKeys( /*target*/) {\n        const keys = [];\n        // uncommenting this causes assert.deepEqual() to fail when comparing to a pojo array\n        // but not uncommenting it causes for (i in list) {} to not enumerate values properly\n        //const {context, objectId } = target\n        //for (let i = 0; i < target.context.length(objectId); i++) { keys.push(i.toString()) }\n        keys.push(\"length\");\n        return keys;\n    },\n};\nconst TextHandler = Object.assign({}, ListHandler, {\n    get(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (index === Symbol.hasInstance) {\n            return (instance) => {\n                return Array.isArray(instance);\n            };\n        }\n        if (index === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (index === OBJECT_ID)\n            return objectId;\n        if (index === IS_PROXY)\n            return true;\n        if (index === TRACE)\n            return target.trace;\n        if (index === STATE)\n            return { handle: context };\n        if (index === \"length\")\n            return context.length(objectId);\n        if (typeof index === \"number\") {\n            return valueAt(target, index);\n        }\n        else {\n            return textMethods(target)[index] || listMethods(target)[index];\n        }\n    },\n    getPrototypeOf( /*target*/) {\n        return Object.getPrototypeOf(new Text());\n    },\n});\nexport function mapProxy(context, objectId, textV2, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2,\n    };\n    const proxied = {};\n    Object.assign(proxied, target);\n    const result = new Proxy(proxied, MapHandler);\n    // conversion through unknown is necessary because the types are so different\n    return result;\n}\nexport function listProxy(context, objectId, textV2, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2,\n    };\n    const proxied = [];\n    Object.assign(proxied, target);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return new Proxy(proxied, ListHandler);\n}\nexport function textProxy(context, objectId, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2: false,\n    };\n    const proxied = {};\n    Object.assign(proxied, target);\n    return new Proxy(proxied, TextHandler);\n}\nexport function rootProxy(context, textV2) {\n    /* eslint-disable-next-line */\n    return mapProxy(context, \"_root\", textV2, []);\n}\nfunction listMethods(target) {\n    const { context, objectId, path, textV2 } = target;\n    const methods = {\n        deleteAt(index, numDelete) {\n            if (typeof numDelete === \"number\") {\n                context.splice(objectId, index, numDelete);\n            }\n            else {\n                context.delete(objectId, index);\n            }\n            return this;\n        },\n        fill(val, start, end) {\n            const [value, datatype] = import_value(val, textV2, [...path, start]);\n            const length = context.length(objectId);\n            start = parseListIndex(start || 0);\n            end = parseListIndex(end || length);\n            for (let i = start; i < Math.min(end, length); i++) {\n                if (datatype === \"list\" || datatype === \"map\") {\n                    context.putObject(objectId, i, value);\n                }\n                else if (datatype === \"text\") {\n                    if (textV2) {\n                        assertString(value);\n                        context.putObject(objectId, i, value);\n                    }\n                    else {\n                        assertText(value);\n                        const text = context.putObject(objectId, i, \"\");\n                        const proxyText = textProxy(context, text, [...path, i]);\n                        for (let i = 0; i < value.length; i++) {\n                            proxyText[i] = value.get(i);\n                        }\n                    }\n                }\n                else {\n                    context.put(objectId, i, value, datatype);\n                }\n            }\n            return this;\n        },\n        indexOf(o, start = 0) {\n            const length = context.length(objectId);\n            for (let i = start; i < length; i++) {\n                const value = context.getWithType(objectId, i);\n                if (value && (value[1] === o[OBJECT_ID] || value[1] === o)) {\n                    return i;\n                }\n            }\n            return -1;\n        },\n        insertAt(index, ...values) {\n            this.splice(index, 0, ...values);\n            return this;\n        },\n        pop() {\n            const length = context.length(objectId);\n            if (length == 0) {\n                return undefined;\n            }\n            const last = valueAt(target, length - 1);\n            context.delete(objectId, length - 1);\n            return last;\n        },\n        push(...values) {\n            const len = context.length(objectId);\n            this.splice(len, 0, ...values);\n            return context.length(objectId);\n        },\n        shift() {\n            if (context.length(objectId) == 0)\n                return;\n            const first = valueAt(target, 0);\n            context.delete(objectId, 0);\n            return first;\n        },\n        splice(index, del, ...vals) {\n            index = parseListIndex(index);\n            // if del is undefined, delete until the end of the list\n            if (typeof del !== \"number\") {\n                del = context.length(objectId) - index;\n            }\n            del = parseListIndex(del);\n            for (const val of vals) {\n                if (isSameDocument(val, context)) {\n                    throw new RangeError(\"Cannot create a reference to an existing document object\");\n                }\n            }\n            const result = [];\n            for (let i = 0; i < del; i++) {\n                const value = valueAt(target, index);\n                if (value !== undefined) {\n                    result.push(value);\n                }\n                context.delete(objectId, index);\n            }\n            const values = vals.map((val, index) => {\n                try {\n                    return import_value(val, textV2, [...path]);\n                }\n                catch (e) {\n                    if (e instanceof RangeError) {\n                        throw new RangeError(`${e.message} at index ${index} in the input`);\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            });\n            for (const [value, datatype] of values) {\n                switch (datatype) {\n                    case \"list\": {\n                        const list = context.insertObject(objectId, index, []);\n                        const proxyList = listProxy(context, list, textV2, [...path, index]);\n                        proxyList.splice(0, 0, ...value);\n                        break;\n                    }\n                    case \"text\": {\n                        if (textV2) {\n                            assertString(value);\n                            context.insertObject(objectId, index, value);\n                        }\n                        else {\n                            const text = context.insertObject(objectId, index, \"\");\n                            const proxyText = textProxy(context, text, [...path, index]);\n                            proxyText.splice(0, 0, ...value);\n                        }\n                        break;\n                    }\n                    case \"map\": {\n                        const map = context.insertObject(objectId, index, {});\n                        const proxyMap = mapProxy(context, map, textV2, [...path, index]);\n                        for (const key in value) {\n                            proxyMap[key] = value[key];\n                        }\n                        break;\n                    }\n                    default:\n                        context.insert(objectId, index, value, datatype);\n                }\n                index += 1;\n            }\n            return result;\n        },\n        unshift(...values) {\n            this.splice(0, 0, ...values);\n            return context.length(objectId);\n        },\n        entries() {\n            let i = 0;\n            const iterator = {\n                next: () => {\n                    const value = valueAt(target, i);\n                    if (value === undefined) {\n                        return { value: undefined, done: true };\n                    }\n                    else {\n                        return { value: [i++, value], done: false };\n                    }\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        keys() {\n            let i = 0;\n            const len = context.length(objectId);\n            const iterator = {\n                next: () => {\n                    if (i < len) {\n                        return { value: i++, done: false };\n                    }\n                    return { value: undefined, done: true };\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        values() {\n            let i = 0;\n            const iterator = {\n                next: () => {\n                    const value = valueAt(target, i++);\n                    if (value === undefined) {\n                        return { value: undefined, done: true };\n                    }\n                    else {\n                        return { value, done: false };\n                    }\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        toArray() {\n            const list = [];\n            let value;\n            do {\n                value = valueAt(target, list.length);\n                if (value !== undefined) {\n                    list.push(value);\n                }\n            } while (value !== undefined);\n            return list;\n        },\n        map(f) {\n            return this.toArray().map(f);\n        },\n        toString() {\n            return this.toArray().toString();\n        },\n        toLocaleString() {\n            return this.toArray().toLocaleString();\n        },\n        forEach(f) {\n            return this.toArray().forEach(f);\n        },\n        // todo: real concat function is different\n        concat(other) {\n            return this.toArray().concat(other);\n        },\n        every(f) {\n            return this.toArray().every(f);\n        },\n        filter(f) {\n            return this.toArray().filter(f);\n        },\n        find(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return v;\n                }\n                index += 1;\n            }\n        },\n        findIndex(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return index;\n                }\n                index += 1;\n            }\n            return -1;\n        },\n        includes(elem) {\n            return this.find(e => e === elem) !== undefined;\n        },\n        join(sep) {\n            return this.toArray().join(sep);\n        },\n        reduce(f, initialValue) {\n            return this.toArray().reduce(f, initialValue);\n        },\n        reduceRight(f, initialValue) {\n            return this.toArray().reduceRight(f, initialValue);\n        },\n        lastIndexOf(search, fromIndex = +Infinity) {\n            // this can be faster\n            return this.toArray().lastIndexOf(search, fromIndex);\n        },\n        slice(index, num) {\n            return this.toArray().slice(index, num);\n        },\n        some(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return true;\n                }\n                index += 1;\n            }\n            return false;\n        },\n        [Symbol.iterator]: function* () {\n            let i = 0;\n            let value = valueAt(target, i);\n            while (value !== undefined) {\n                yield value;\n                i += 1;\n                value = valueAt(target, i);\n            }\n        },\n    };\n    return methods;\n}\nfunction textMethods(target) {\n    const { context, objectId } = target;\n    const methods = {\n        set(index, value) {\n            return (this[index] = value);\n        },\n        get(index) {\n            return this[index];\n        },\n        toString() {\n            return context.text(objectId).replace(/ï¿¼/g, \"\");\n        },\n        toSpans() {\n            const spans = [];\n            let chars = \"\";\n            const length = context.length(objectId);\n            for (let i = 0; i < length; i++) {\n                const value = this[i];\n                if (typeof value === \"string\") {\n                    chars += value;\n                }\n                else {\n                    if (chars.length > 0) {\n                        spans.push(chars);\n                        chars = \"\";\n                    }\n                    spans.push(value);\n                }\n            }\n            if (chars.length > 0) {\n                spans.push(chars);\n            }\n            return spans;\n        },\n        toJSON() {\n            return this.toString();\n        },\n        indexOf(o, start = 0) {\n            const text = context.text(objectId);\n            return text.indexOf(o, start);\n        },\n        insertAt(index, ...values) {\n            if (values.every(v => typeof v === \"string\")) {\n                context.splice(objectId, index, 0, values.join(\"\"));\n            }\n            else {\n                listMethods(target).insertAt(index, ...values);\n            }\n        },\n    };\n    return methods;\n}\nfunction assertText(value) {\n    if (!(value instanceof Text)) {\n        throw new Error(\"value was not a Text instance\");\n    }\n}\nfunction assertString(value) {\n    if (typeof value !== \"string\") {\n        throw new Error(\"value was not a string\");\n    }\n}\nfunction printPath(path) {\n    // print the path as a json pointer\n    const jsonPointerComponents = path.map(component => {\n        // if its a number just turn it into a string\n        if (typeof component === \"number\") {\n            return component.toString();\n        }\n        else if (typeof component === \"string\") {\n            // otherwise we have to escape `/` and `~` characters\n            return component.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n        }\n    });\n    if (path.length === 0) {\n        return \"\";\n    }\n    else {\n        return \"/\" + jsonPointerComponents.join(\"/\");\n    }\n}\n","// Convenience classes to allow users to strictly specify the number type they want\nimport { INT, UINT, F64 } from \"./constants.js\";\nexport class Int {\n    constructor(value) {\n        if (!(Number.isInteger(value) &&\n            value <= Number.MAX_SAFE_INTEGER &&\n            value >= Number.MIN_SAFE_INTEGER)) {\n            throw new RangeError(`Value ${value} cannot be a uint`);\n        }\n        this.value = value;\n        Reflect.defineProperty(this, INT, { value: true });\n        Object.freeze(this);\n    }\n}\nexport class Uint {\n    constructor(value) {\n        if (!(Number.isInteger(value) &&\n            value <= Number.MAX_SAFE_INTEGER &&\n            value >= 0)) {\n            throw new RangeError(`Value ${value} cannot be a uint`);\n        }\n        this.value = value;\n        Reflect.defineProperty(this, UINT, { value: true });\n        Object.freeze(this);\n    }\n}\nexport class Float64 {\n    constructor(value) {\n        if (typeof value !== \"number\") {\n            throw new RangeError(`Value ${value} cannot be a float64`);\n        }\n        this.value = value || 0.0;\n        Reflect.defineProperty(this, F64, { value: true });\n        Object.freeze(this);\n    }\n}\n","export function UseApi(api) {\n    for (const k in api) {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi,@typescript-eslint/no-explicit-any\n        ;\n        ApiHandler[k] = api[k];\n    }\n}\n/* eslint-disable */\nexport const ApiHandler = {\n    create(options) {\n        throw new RangeError(\"Automerge.use() not called\");\n    },\n    load(data, options) {\n        throw new RangeError(\"Automerge.use() not called (load)\");\n    },\n    encodeChange(change) {\n        throw new RangeError(\"Automerge.use() not called (encodeChange)\");\n    },\n    decodeChange(change) {\n        throw new RangeError(\"Automerge.use() not called (decodeChange)\");\n    },\n    initSyncState() {\n        throw new RangeError(\"Automerge.use() not called (initSyncState)\");\n    },\n    encodeSyncMessage(message) {\n        throw new RangeError(\"Automerge.use() not called (encodeSyncMessage)\");\n    },\n    decodeSyncMessage(msg) {\n        throw new RangeError(\"Automerge.use() not called (decodeSyncMessage)\");\n    },\n    encodeSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (encodeSyncState)\");\n    },\n    decodeSyncState(data) {\n        throw new RangeError(\"Automerge.use() not called (decodeSyncState)\");\n    },\n    exportSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (exportSyncState)\");\n    },\n    importSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (importSyncState)\");\n    },\n};\n/* eslint-enable */\n","import { STATE, OBJECT_ID, CLEAR_CACHE, TRACE, IS_PROXY } from \"./constants.js\";\nexport function _state(doc, checkroot = true) {\n    if (typeof doc !== \"object\") {\n        throw new RangeError(\"must be the document root\");\n    }\n    const state = Reflect.get(doc, STATE);\n    if (state === undefined ||\n        state == null ||\n        (checkroot && _obj(doc) !== \"_root\")) {\n        throw new RangeError(\"must be the document root\");\n    }\n    return state;\n}\nexport function _clear_cache(doc) {\n    Reflect.set(doc, CLEAR_CACHE, true);\n}\nexport function _trace(doc) {\n    return Reflect.get(doc, TRACE);\n}\nexport function _obj(doc) {\n    if (!(typeof doc === \"object\") || doc === null) {\n        return null;\n    }\n    return Reflect.get(doc, OBJECT_ID);\n}\nexport function _is_proxy(doc) {\n    return !!Reflect.get(doc, IS_PROXY);\n}\n","import { Counter } from \"./types.js\";\nimport { Text } from \"./text.js\";\nimport { mapProxy, listProxy } from \"./proxies.js\";\nexport function stableConflictAt(context, objectId, prop) {\n    return conflictAt(context, objectId, prop, true, (context, conflictId) => {\n        return new Text(context.text(conflictId));\n    });\n}\nexport function unstableConflictAt(context, objectId, prop) {\n    return conflictAt(context, objectId, prop, true, (context, conflictId) => {\n        return context.text(conflictId);\n    });\n}\nfunction conflictAt(context, objectId, prop, textV2, handleText) {\n    const values = context.getAll(objectId, prop);\n    if (values.length <= 1) {\n        return;\n    }\n    const result = {};\n    for (const fullVal of values) {\n        switch (fullVal[0]) {\n            case \"map\":\n                result[fullVal[1]] = mapProxy(context, fullVal[1], textV2, [prop]);\n                break;\n            case \"list\":\n                result[fullVal[1]] = listProxy(context, fullVal[1], textV2, [prop]);\n                break;\n            case \"text\":\n                result[fullVal[1]] = handleText(context, fullVal[1]);\n                break;\n            case \"str\":\n            case \"uint\":\n            case \"int\":\n            case \"f64\":\n            case \"boolean\":\n            case \"bytes\":\n            case \"null\":\n                result[fullVal[2]] = fullVal[1];\n                break;\n            case \"counter\":\n                result[fullVal[2]] = new Counter(fullVal[1]);\n                break;\n            case \"timestamp\":\n                result[fullVal[2]] = new Date(fullVal[1]);\n                break;\n            default:\n                throw RangeError(`datatype ${fullVal[0]} unimplemented`);\n        }\n    }\n    return result;\n}\n","export default \"__VITE_ASSET__CPY4r9f3__\"","export default async (opts = {}, url) => {\n    let result;\n    if (url.startsWith(\"data:\")) {\n        const urlContent = url.replace(/^data:.*?base64,/, \"\");\n        let bytes;\n        if (typeof Buffer === \"function\" && typeof Buffer.from === \"function\") {\n            bytes = Buffer.from(urlContent, \"base64\");\n        }\n        else if (typeof atob === \"function\") {\n            const binaryString = atob(urlContent);\n            bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n        }\n        else {\n            throw new Error(\"Cannot decode base64-encoded data URL\");\n        }\n        result = await WebAssembly.instantiate(bytes, opts);\n    }\n    else {\n        // https://github.com/mdn/webassembly-examples/issues/5\n        // WebAssembly.instantiateStreaming requires the server to provide the\n        // correct MIME type for .wasm files, which unfortunately doesn't work for\n        // a lot of static file servers, so we just work around it by getting the\n        // raw buffer.\n        // @ts-ignore\n        const response = await fetch(url);\n        const contentType = response.headers.get(\"Content-Type\") || \"\";\n        if (\"instantiateStreaming\" in WebAssembly && contentType.startsWith(\"application/wasm\")) {\n            result = await WebAssembly.instantiateStreaming(response, opts);\n        }\n        else {\n            const buffer = await response.arrayBuffer();\n            result = await WebAssembly.instantiate(buffer, opts);\n        }\n    }\n    return result.instance.exports;\n}","let wasm;\nexport function __wbg_set_wasm(val) {\n    wasm = val;\n}\n\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n    if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n        cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachedInt32Memory0;\n}\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n    if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n        cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64Memory0;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n/**\n* @param {any} options\n* @returns {Automerge}\n*/\nexport function create(options) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.create(retptr, addHeapObject(options));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Automerge.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} data\n* @param {any} options\n* @returns {Automerge}\n*/\nexport function load(data, options) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.load(retptr, addHeapObject(data), addHeapObject(options));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Automerge.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {any} change\n* @returns {Uint8Array}\n*/\nexport function encodeChange(change) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.encodeChange(retptr, addHeapObject(change));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} change\n* @returns {any}\n*/\nexport function decodeChange(change) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeChange(retptr, addHeapObject(change));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @returns {SyncState}\n*/\nexport function initSyncState() {\n    const ret = wasm.initSyncState();\n    return SyncState.__wrap(ret);\n}\n\n/**\n* @param {any} state\n* @returns {SyncState}\n*/\nexport function importSyncState(state) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.importSyncState(retptr, addHeapObject(state));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return SyncState.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {SyncState} state\n* @returns {any}\n*/\nexport function exportSyncState(state) {\n    _assertClass(state, SyncState);\n    const ret = wasm.exportSyncState(state.__wbg_ptr);\n    return takeObject(ret);\n}\n\n/**\n* @param {any} message\n* @returns {Uint8Array}\n*/\nexport function encodeSyncMessage(message) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.encodeSyncMessage(retptr, addHeapObject(message));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} msg\n* @returns {any}\n*/\nexport function decodeSyncMessage(msg) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeSyncMessage(retptr, addHeapObject(msg));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {SyncState} state\n* @returns {Uint8Array}\n*/\nexport function encodeSyncState(state) {\n    _assertClass(state, SyncState);\n    const ret = wasm.encodeSyncState(state.__wbg_ptr);\n    return takeObject(ret);\n}\n\n/**\n* @param {Uint8Array} data\n* @returns {SyncState}\n*/\nexport function decodeSyncState(data) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeSyncState(retptr, addHeapObject(data));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return SyncState.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\n/**\n* How text is represented in materialized objects on the JS side\n*/\nexport const TextRepresentation = Object.freeze({\n/**\n* As an array of characters and objects\n*/\nArray:0,\"0\":\"Array\",\n/**\n* As a single JS string\n*/\nString:1,\"1\":\"String\", });\n\nconst AutomergeFinalization = new FinalizationRegistry(ptr => wasm.__wbg_automerge_free(ptr >>> 0));\n/**\n*/\nexport class Automerge {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(Automerge.prototype);\n        obj.__wbg_ptr = ptr;\n        AutomergeFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        AutomergeFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_automerge_free(ptr);\n    }\n    /**\n    * @param {string | undefined} actor\n    * @param {number} text_rep\n    * @returns {Automerge}\n    */\n    static new(actor, text_rep) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_new(retptr, ptr0, len0, text_rep);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} actor\n    * @returns {Automerge}\n    */\n    clone(actor) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_clone(retptr, this.__wbg_ptr, ptr0, len0);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} actor\n    * @param {any} heads\n    * @returns {Automerge}\n    */\n    fork(actor, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_fork(retptr, this.__wbg_ptr, ptr0, len0, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {any}\n    */\n    pendingOps() {\n        const ret = wasm.automerge_pendingOps(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {string | undefined} message\n    * @param {number | undefined} time\n    * @returns {any}\n    */\n    commit(message, time) {\n        var ptr0 = isLikeNone(message) ? 0 : passStringToWasm0(message, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.automerge_commit(this.__wbg_ptr, ptr0, len0, !isLikeNone(time), isLikeNone(time) ? 0 : time);\n        return takeObject(ret);\n    }\n    /**\n    * @param {Automerge} other\n    * @returns {Array<any>}\n    */\n    merge(other) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(other, Automerge);\n            wasm.automerge_merge(retptr, this.__wbg_ptr, other.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {number}\n    */\n    rollback() {\n        const ret = wasm.automerge_rollback(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {Array<any>}\n    */\n    keys(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_keys(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {string}\n    */\n    text(obj, heads) {\n        let deferred2_0;\n        let deferred2_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_text(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            var ptr1 = r0;\n            var len1 = r1;\n            if (r3) {\n                ptr1 = 0; len1 = 0;\n                throw takeObject(r2);\n            }\n            deferred2_0 = ptr1;\n            deferred2_1 = len1;\n            return getStringFromWasm0(ptr1, len1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred2_0, deferred2_1, 1);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {Array<any>}\n    */\n    spans(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_spans(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} start\n    * @param {number} delete_count\n    * @param {any} text\n    */\n    splice(obj, start, delete_count, text) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_splice(retptr, this.__wbg_ptr, addHeapObject(obj), start, delete_count, addHeapObject(text));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} new_text\n    */\n    updateText(obj, new_text) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_updateText(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(new_text));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} value\n    * @param {any} datatype\n    */\n    push(obj, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_push(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} value\n    * @returns {string | undefined}\n    */\n    pushObject(obj, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_pushObject(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1);\n            }\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {any} value\n    * @param {any} datatype\n    */\n    insert(obj, index, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_insert(retptr, this.__wbg_ptr, addHeapObject(obj), index, addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {any} args\n    */\n    splitBlock(obj, index, args) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_splitBlock(retptr, this.__wbg_ptr, addHeapObject(obj), index, addHeapObject(args));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} text\n    * @param {number} index\n    */\n    joinBlock(text, index) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_joinBlock(retptr, this.__wbg_ptr, addHeapObject(text), index);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} text\n    * @param {any} new_blocks\n    */\n    updateBlocks(text, new_blocks) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_updateBlocks(retptr, this.__wbg_ptr, addHeapObject(text), addHeapObject(new_blocks));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} text\n    * @param {number} index\n    * @param {any} args\n    */\n    updateBlock(text, index, args) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_updateBlock(retptr, this.__wbg_ptr, addHeapObject(text), index, addHeapObject(args));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} text\n    * @param {number} index\n    * @returns {any}\n    */\n    getBlock(text, index) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getBlock(retptr, this.__wbg_ptr, addHeapObject(text), index);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {any} value\n    * @returns {string | undefined}\n    */\n    insertObject(obj, index, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_insertObject(retptr, this.__wbg_ptr, addHeapObject(obj), index, addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1);\n            }\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    * @param {any} datatype\n    */\n    put(obj, prop, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_put(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    * @returns {any}\n    */\n    putObject(obj, prop, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_putObject(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    */\n    increment(obj, prop, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_increment(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {Array<any> | undefined} heads\n    * @returns {any}\n    */\n    get(obj, prop, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_get(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {Array<any> | undefined} heads\n    * @returns {any}\n    */\n    getWithType(obj, prop, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getWithType(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {object}\n    */\n    objInfo(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_objInfo(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} arg\n    * @param {Array<any> | undefined} heads\n    * @returns {Array<any>}\n    */\n    getAll(obj, arg, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getAll(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(arg), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} enable\n    * @returns {any}\n    */\n    enableFreeze(enable) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_enableFreeze(retptr, this.__wbg_ptr, addHeapObject(enable));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} datatype\n    * @param {any} _function\n    */\n    registerDatatype(datatype, _function) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_registerDatatype(retptr, this.__wbg_ptr, addHeapObject(datatype), addHeapObject(_function));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} object\n    * @param {any} meta\n    * @returns {any}\n    */\n    applyPatches(object, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyPatches(retptr, this.__wbg_ptr, addHeapObject(object), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} object\n    * @param {any} meta\n    * @returns {any}\n    */\n    applyAndReturnPatches(object, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyAndReturnPatches(retptr, this.__wbg_ptr, addHeapObject(object), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Array<any>}\n    */\n    diffIncremental() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_diffIncremental(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    */\n    updateDiffCursor() {\n        wasm.automerge_updateDiffCursor(this.__wbg_ptr);\n    }\n    /**\n    */\n    resetDiffCursor() {\n        wasm.automerge_resetDiffCursor(this.__wbg_ptr);\n    }\n    /**\n    * @param {Array<any>} before\n    * @param {Array<any>} after\n    * @returns {Array<any>}\n    */\n    diff(before, after) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_diff(retptr, this.__wbg_ptr, addHeapObject(before), addHeapObject(after));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Array<any>} heads\n    */\n    isolate(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_isolate(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    */\n    integrate() {\n        wasm.automerge_integrate(this.__wbg_ptr);\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {number}\n    */\n    length(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_length(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    */\n    delete(obj, prop) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_delete(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    save() {\n        const ret = wasm.automerge_save(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveIncremental() {\n        const ret = wasm.automerge_saveIncremental(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {Array<any>} heads\n    * @returns {Uint8Array}\n    */\n    saveSince(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_saveSince(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveNoCompress() {\n        const ret = wasm.automerge_saveNoCompress(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveAndVerify() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_saveAndVerify(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Uint8Array} data\n    * @returns {number}\n    */\n    loadIncremental(data) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_loadIncremental(retptr, this.__wbg_ptr, addHeapObject(data));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} changes\n    */\n    applyChanges(changes) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyChanges(retptr, this.__wbg_ptr, addHeapObject(changes));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} have_deps\n    * @returns {Array<any>}\n    */\n    getChanges(have_deps) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getChanges(retptr, this.__wbg_ptr, addHeapObject(have_deps));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} hash\n    * @returns {any}\n    */\n    getChangeByHash(hash) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getChangeByHash(retptr, this.__wbg_ptr, addHeapObject(hash));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Automerge} other\n    * @returns {Array<any>}\n    */\n    getChangesAdded(other) {\n        _assertClass(other, Automerge);\n        const ret = wasm.automerge_getChangesAdded(this.__wbg_ptr, other.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Array<any>}\n    */\n    getHeads() {\n        const ret = wasm.automerge_getHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {string}\n    */\n    getActorId() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getActorId(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            deferred1_0 = r0;\n            deferred1_1 = r1;\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n    * @returns {any}\n    */\n    getLastLocalChange() {\n        const ret = wasm.automerge_getLastLocalChange(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    */\n    dump() {\n        wasm.automerge_dump(this.__wbg_ptr);\n    }\n    /**\n    * @param {Array<any> | undefined} heads\n    * @returns {Array<any>}\n    */\n    getMissingDeps(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getMissingDeps(retptr, this.__wbg_ptr, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {SyncState} state\n    * @param {Uint8Array} message\n    */\n    receiveSyncMessage(state, message) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(state, SyncState);\n            wasm.automerge_receiveSyncMessage(retptr, this.__wbg_ptr, state.__wbg_ptr, addHeapObject(message));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {SyncState} state\n    * @returns {any}\n    */\n    generateSyncMessage(state) {\n        _assertClass(state, SyncState);\n        const ret = wasm.automerge_generateSyncMessage(this.__wbg_ptr, state.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} meta\n    * @returns {any}\n    */\n    toJS(meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_toJS(retptr, this.__wbg_ptr, addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @param {any} meta\n    * @returns {any}\n    */\n    materialize(obj, heads, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_materialize(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {Array<any> | undefined} heads\n    * @returns {string}\n    */\n    getCursor(obj, index, heads) {\n        let deferred2_0;\n        let deferred2_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getCursor(retptr, this.__wbg_ptr, addHeapObject(obj), index, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            var ptr1 = r0;\n            var len1 = r1;\n            if (r3) {\n                ptr1 = 0; len1 = 0;\n                throw takeObject(r2);\n            }\n            deferred2_0 = ptr1;\n            deferred2_1 = len1;\n            return getStringFromWasm0(ptr1, len1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred2_0, deferred2_1, 1);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} cursor\n    * @param {Array<any> | undefined} heads\n    * @returns {number}\n    */\n    getCursorPosition(obj, cursor, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getCursorPosition(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(cursor), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} message\n    * @param {number | undefined} time\n    * @returns {any}\n    */\n    emptyChange(message, time) {\n        var ptr0 = isLikeNone(message) ? 0 : passStringToWasm0(message, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.automerge_emptyChange(this.__wbg_ptr, ptr0, len0, !isLikeNone(time), isLikeNone(time) ? 0 : time);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} obj\n    * @param {any} range\n    * @param {any} name\n    * @param {any} value\n    * @param {any} datatype\n    */\n    mark(obj, range, name, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_mark(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(range), addHeapObject(name), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} range\n    * @param {any} name\n    */\n    unmark(obj, range, name) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_unmark(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(range), addHeapObject(name));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @returns {any}\n    */\n    marks(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_marks(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {Array<any> | undefined} heads\n    * @returns {object}\n    */\n    marksAt(obj, index, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_marksAt(retptr, this.__wbg_ptr, addHeapObject(obj), index, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n}\n\nconst SyncStateFinalization = new FinalizationRegistry(ptr => wasm.__wbg_syncstate_free(ptr >>> 0));\n/**\n*/\nexport class SyncState {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(SyncState.prototype);\n        obj.__wbg_ptr = ptr;\n        SyncStateFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        SyncStateFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_syncstate_free(ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    get sharedHeads() {\n        const ret = wasm.syncstate_sharedHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {any}\n    */\n    get lastSentHeads() {\n        const ret = wasm.syncstate_lastSentHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} heads\n    */\n    set lastSentHeads(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.syncstate_set_lastSentHeads(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} hashes\n    */\n    set sentHashes(hashes) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.syncstate_set_sentHashes(retptr, this.__wbg_ptr, addHeapObject(hashes));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {SyncState}\n    */\n    clone() {\n        const ret = wasm.syncstate_clone(this.__wbg_ptr);\n        return SyncState.__wrap(ret);\n    }\n}\n\nexport function __wbindgen_string_get(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof(obj) === 'string' ? obj : undefined;\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_is_object(arg0) {\n    const val = getObject(arg0);\n    const ret = typeof(val) === 'object' && val !== null;\n    return ret;\n};\n\nexport function __wbindgen_jsval_eq(arg0, arg1) {\n    const ret = getObject(arg0) === getObject(arg1);\n    return ret;\n};\n\nexport function __wbindgen_object_drop_ref(arg0) {\n    takeObject(arg0);\n};\n\nexport function __wbindgen_error_new(arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_object_clone_ref(arg0) {\n    const ret = getObject(arg0);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_string_new(arg0, arg1) {\n    const ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_number_new(arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_number_get(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof(obj) === 'number' ? obj : undefined;\n    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n};\n\nexport function __wbindgen_is_undefined(arg0) {\n    const ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nexport function __wbindgen_boolean_get(arg0) {\n    const v = getObject(arg0);\n    const ret = typeof(v) === 'boolean' ? (v ? 1 : 0) : 2;\n    return ret;\n};\n\nexport function __wbindgen_is_null(arg0) {\n    const ret = getObject(arg0) === null;\n    return ret;\n};\n\nexport function __wbindgen_is_string(arg0) {\n    const ret = typeof(getObject(arg0)) === 'string';\n    return ret;\n};\n\nexport function __wbindgen_is_function(arg0) {\n    const ret = typeof(getObject(arg0)) === 'function';\n    return ret;\n};\n\nexport function __wbindgen_is_array(arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n};\n\nexport function __wbindgen_json_serialize(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = JSON.stringify(obj === undefined ? null : obj);\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbg_new_abda76e883ba8a5f() {\n    const ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_stack_658279fe44541cf6(arg0, arg1) {\n    const ret = getObject(arg1).stack;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbg_error_f851667af71bcfc6(arg0, arg1) {\n    let deferred0_0;\n    let deferred0_1;\n    try {\n        deferred0_0 = arg0;\n        deferred0_1 = arg1;\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(deferred0_0, deferred0_1, 1);\n    }\n};\n\nexport function __wbindgen_jsval_loose_eq(arg0, arg1) {\n    const ret = getObject(arg0) == getObject(arg1);\n    return ret;\n};\n\nexport function __wbg_String_91fba7ded13ba54c(arg0, arg1) {\n    const ret = String(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_bigint_from_i64(arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_bigint_from_u64(arg0) {\n    const ret = BigInt.asUintN(64, arg0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_set_20cbc34131e76824(arg0, arg1, arg2) {\n    getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\n};\n\nexport function __wbg_getRandomValues_37fa2ca9e4e07fab() { return handleError(function (arg0, arg1) {\n    getObject(arg0).getRandomValues(getObject(arg1));\n}, arguments) };\n\nexport function __wbg_randomFillSync_dc1e9a60c158336d() { return handleError(function (arg0, arg1) {\n    getObject(arg0).randomFillSync(takeObject(arg1));\n}, arguments) };\n\nexport function __wbg_crypto_c48a774b022d20ac(arg0) {\n    const ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_process_298734cf255a885d(arg0) {\n    const ret = getObject(arg0).process;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_versions_e2e78e134e3e5d01(arg0) {\n    const ret = getObject(arg0).versions;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_node_1cd7a5d853dbea79(arg0) {\n    const ret = getObject(arg0).node;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_msCrypto_bcb970640f50a1e8(arg0) {\n    const ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_require_8f08ceecec0f4fee() { return handleError(function () {\n    const ret = module.require;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_log_1d3ae0273d8f4f8a(arg0) {\n    console.log(getObject(arg0));\n};\n\nexport function __wbg_log_576ca876af0d4a77(arg0, arg1) {\n    console.log(getObject(arg0), getObject(arg1));\n};\n\nexport function __wbg_get_44be0491f933a435(arg0, arg1) {\n    const ret = getObject(arg0)[arg1 >>> 0];\n    return addHeapObject(ret);\n};\n\nexport function __wbg_length_fff51ee6522a1a18(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_new_898a68150f225f2e() {\n    const ret = new Array();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_newnoargs_581967eacc0e2604(arg0, arg1) {\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_next_526fc47e980da008(arg0) {\n    const ret = getObject(arg0).next;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_next_ddb3312ca1c4e32a() { return handleError(function (arg0) {\n    const ret = getObject(arg0).next();\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_done_5c1f01fb660d73b5(arg0) {\n    const ret = getObject(arg0).done;\n    return ret;\n};\n\nexport function __wbg_value_1695675138684bd5(arg0) {\n    const ret = getObject(arg0).value;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_iterator_97f0c81209c6c35a() {\n    const ret = Symbol.iterator;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_get_97b561fb56f034b5() { return handleError(function (arg0, arg1) {\n    const ret = Reflect.get(getObject(arg0), getObject(arg1));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_call_cb65541d95d71282() { return handleError(function (arg0, arg1) {\n    const ret = getObject(arg0).call(getObject(arg1));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_new_b51585de1b234aff() {\n    const ret = new Object();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_length_b3de0c6587c18245(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_set_502d29070ea18557(arg0, arg1, arg2) {\n    getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\n};\n\nexport function __wbg_from_d7c216d4616bb368(arg0) {\n    const ret = Array.from(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_isArray_4c24b343cb13cfb1(arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n};\n\nexport function __wbg_push_ca1c26067ef907ac(arg0, arg1) {\n    const ret = getObject(arg0).push(getObject(arg1));\n    return ret;\n};\n\nexport function __wbg_unshift_de5fe028746b7cec(arg0, arg1) {\n    const ret = getObject(arg0).unshift(getObject(arg1));\n    return ret;\n};\n\nexport function __wbg_instanceof_ArrayBuffer_39ac22089b74fddb(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof ArrayBuffer;\n    } catch {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_new_d258248ed531ff54(arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_call_01734de55d61e11d() { return handleError(function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_call_4c92f6aec1e1d6e6() { return handleError(function (arg0, arg1, arg2, arg3) {\n    const ret = getObject(arg0).call(getObject(arg1), getObject(arg2), getObject(arg3));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_instanceof_Date_91c15a742581fc41(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Date;\n    } catch {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_getTime_5e2054f832d82ec9(arg0) {\n    const ret = getObject(arg0).getTime();\n    return ret;\n};\n\nexport function __wbg_new_cd59bfc8881f487b(arg0) {\n    const ret = new Date(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_instanceof_Object_3daa8298c86298be(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Object;\n    } catch {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_assign_999478a110912e87(arg0, arg1) {\n    const ret = Object.assign(getObject(arg0), getObject(arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_defineProperty_2db1bcb00cd9da96(arg0, arg1, arg2) {\n    const ret = Object.defineProperty(getObject(arg0), getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_entries_e51f29c7bba0c054(arg0) {\n    const ret = Object.entries(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_freeze_29fdec6af26e40df(arg0) {\n    const ret = Object.freeze(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_keys_386d224d0262f361(arg0) {\n    const ret = Object.keys(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_values_88acfd44c7ef08d7(arg0) {\n    const ret = Object.values(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_new_732c49c4e03c98a1(arg0, arg1) {\n    const ret = new RangeError(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_apply_f9ecfcbfefaf7349() { return handleError(function (arg0, arg1, arg2) {\n    const ret = Reflect.apply(getObject(arg0), getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_deleteProperty_568c26e52bc57565() { return handleError(function (arg0, arg1) {\n    const ret = Reflect.deleteProperty(getObject(arg0), getObject(arg1));\n    return ret;\n}, arguments) };\n\nexport function __wbg_ownKeys_391189872004f097() { return handleError(function (arg0) {\n    const ret = Reflect.ownKeys(getObject(arg0));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_set_092e06b0f9d71865() { return handleError(function (arg0, arg1, arg2) {\n    const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n    return ret;\n}, arguments) };\n\nexport function __wbg_buffer_085ec1f694018c4f(arg0) {\n    const ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_concat_c15e9c7e01e04001(arg0, arg1) {\n    const ret = getObject(arg0).concat(getObject(arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_slice_0a0d91ee629d603a(arg0, arg1, arg2) {\n    const ret = getObject(arg0).slice(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_for_2256af0eb4ac96ac(arg0, arg1) {\n    const ret = Symbol.for(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_toString_bb5de5cb12268093(arg0) {\n    const ret = getObject(arg0).toString();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_self_1ff1d729e9aae938() { return handleError(function () {\n    const ret = self.self;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_window_5f4faef6c12b79ec() { return handleError(function () {\n    const ret = window.window;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_globalThis_1d39714405582d3c() { return handleError(function () {\n    const ret = globalThis.globalThis;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_global_651f05c6a0944d1c() { return handleError(function () {\n    const ret = global.global;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_newwithbyteoffsetandlength_6da8e527659b86aa(arg0, arg1, arg2) {\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_new_8125e318e6245eed(arg0) {\n    const ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_set_5cf90238115182c3(arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n};\n\nexport function __wbg_length_72e2208bbc0efc61(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Uint8Array;\n    } catch {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_newwithlength_e5d69174d6984cd7(arg0) {\n    const ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_subarray_13db269f57aa838d(arg0, arg1, arg2) {\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_debug_string(arg0, arg1) {\n    const ret = debugString(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_throw(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nexport function __wbindgen_memory() {\n    const ret = wasm.memory;\n    return addHeapObject(ret);\n};\n\n","\nURL = globalThis.URL\nimport __vite__wasmUrl from \"/Users/andreas/rozek/GitHub/automerge-bundle/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm?url\"\nimport __vite__initWasm from \"/__vite-plugin-wasm-helper\"\n\nimport { __wbindgen_string_get as __vite__wasmImport_0_0, __wbindgen_is_object as __vite__wasmImport_0_1, __wbindgen_jsval_eq as __vite__wasmImport_0_2, __wbindgen_object_drop_ref as __vite__wasmImport_0_3, __wbindgen_error_new as __vite__wasmImport_0_4, __wbindgen_object_clone_ref as __vite__wasmImport_0_5, __wbindgen_string_new as __vite__wasmImport_0_6, __wbindgen_number_new as __vite__wasmImport_0_7, __wbindgen_number_get as __vite__wasmImport_0_8, __wbindgen_is_undefined as __vite__wasmImport_0_9, __wbindgen_boolean_get as __vite__wasmImport_0_10, __wbindgen_is_null as __vite__wasmImport_0_11, __wbindgen_is_string as __vite__wasmImport_0_12, __wbindgen_is_function as __vite__wasmImport_0_13, __wbindgen_is_array as __vite__wasmImport_0_14, __wbindgen_json_serialize as __vite__wasmImport_0_15, __wbg_new_abda76e883ba8a5f as __vite__wasmImport_0_16, __wbg_stack_658279fe44541cf6 as __vite__wasmImport_0_17, __wbg_error_f851667af71bcfc6 as __vite__wasmImport_0_18, __wbindgen_jsval_loose_eq as __vite__wasmImport_0_19, __wbg_String_91fba7ded13ba54c as __vite__wasmImport_0_20, __wbindgen_bigint_from_i64 as __vite__wasmImport_0_21, __wbindgen_bigint_from_u64 as __vite__wasmImport_0_22, __wbg_set_20cbc34131e76824 as __vite__wasmImport_0_23, __wbg_getRandomValues_37fa2ca9e4e07fab as __vite__wasmImport_0_24, __wbg_randomFillSync_dc1e9a60c158336d as __vite__wasmImport_0_25, __wbg_crypto_c48a774b022d20ac as __vite__wasmImport_0_26, __wbg_process_298734cf255a885d as __vite__wasmImport_0_27, __wbg_versions_e2e78e134e3e5d01 as __vite__wasmImport_0_28, __wbg_node_1cd7a5d853dbea79 as __vite__wasmImport_0_29, __wbg_msCrypto_bcb970640f50a1e8 as __vite__wasmImport_0_30, __wbg_require_8f08ceecec0f4fee as __vite__wasmImport_0_31, __wbg_log_1d3ae0273d8f4f8a as __vite__wasmImport_0_32, __wbg_log_576ca876af0d4a77 as __vite__wasmImport_0_33, __wbg_get_44be0491f933a435 as __vite__wasmImport_0_34, __wbg_length_fff51ee6522a1a18 as __vite__wasmImport_0_35, __wbg_new_898a68150f225f2e as __vite__wasmImport_0_36, __wbg_newnoargs_581967eacc0e2604 as __vite__wasmImport_0_37, __wbg_next_526fc47e980da008 as __vite__wasmImport_0_38, __wbg_next_ddb3312ca1c4e32a as __vite__wasmImport_0_39, __wbg_done_5c1f01fb660d73b5 as __vite__wasmImport_0_40, __wbg_value_1695675138684bd5 as __vite__wasmImport_0_41, __wbg_iterator_97f0c81209c6c35a as __vite__wasmImport_0_42, __wbg_get_97b561fb56f034b5 as __vite__wasmImport_0_43, __wbg_call_cb65541d95d71282 as __vite__wasmImport_0_44, __wbg_new_b51585de1b234aff as __vite__wasmImport_0_45, __wbg_length_b3de0c6587c18245 as __vite__wasmImport_0_46, __wbg_set_502d29070ea18557 as __vite__wasmImport_0_47, __wbg_from_d7c216d4616bb368 as __vite__wasmImport_0_48, __wbg_isArray_4c24b343cb13cfb1 as __vite__wasmImport_0_49, __wbg_push_ca1c26067ef907ac as __vite__wasmImport_0_50, __wbg_unshift_de5fe028746b7cec as __vite__wasmImport_0_51, __wbg_instanceof_ArrayBuffer_39ac22089b74fddb as __vite__wasmImport_0_52, __wbg_new_d258248ed531ff54 as __vite__wasmImport_0_53, __wbg_call_01734de55d61e11d as __vite__wasmImport_0_54, __wbg_call_4c92f6aec1e1d6e6 as __vite__wasmImport_0_55, __wbg_instanceof_Date_91c15a742581fc41 as __vite__wasmImport_0_56, __wbg_getTime_5e2054f832d82ec9 as __vite__wasmImport_0_57, __wbg_new_cd59bfc8881f487b as __vite__wasmImport_0_58, __wbg_instanceof_Object_3daa8298c86298be as __vite__wasmImport_0_59, __wbg_assign_999478a110912e87 as __vite__wasmImport_0_60, __wbg_defineProperty_2db1bcb00cd9da96 as __vite__wasmImport_0_61, __wbg_entries_e51f29c7bba0c054 as __vite__wasmImport_0_62, __wbg_freeze_29fdec6af26e40df as __vite__wasmImport_0_63, __wbg_keys_386d224d0262f361 as __vite__wasmImport_0_64, __wbg_values_88acfd44c7ef08d7 as __vite__wasmImport_0_65, __wbg_new_732c49c4e03c98a1 as __vite__wasmImport_0_66, __wbg_apply_f9ecfcbfefaf7349 as __vite__wasmImport_0_67, __wbg_deleteProperty_568c26e52bc57565 as __vite__wasmImport_0_68, __wbg_ownKeys_391189872004f097 as __vite__wasmImport_0_69, __wbg_set_092e06b0f9d71865 as __vite__wasmImport_0_70, __wbg_buffer_085ec1f694018c4f as __vite__wasmImport_0_71, __wbg_concat_c15e9c7e01e04001 as __vite__wasmImport_0_72, __wbg_slice_0a0d91ee629d603a as __vite__wasmImport_0_73, __wbg_for_2256af0eb4ac96ac as __vite__wasmImport_0_74, __wbg_toString_bb5de5cb12268093 as __vite__wasmImport_0_75, __wbg_self_1ff1d729e9aae938 as __vite__wasmImport_0_76, __wbg_window_5f4faef6c12b79ec as __vite__wasmImport_0_77, __wbg_globalThis_1d39714405582d3c as __vite__wasmImport_0_78, __wbg_global_651f05c6a0944d1c as __vite__wasmImport_0_79, __wbg_newwithbyteoffsetandlength_6da8e527659b86aa as __vite__wasmImport_0_80, __wbg_new_8125e318e6245eed as __vite__wasmImport_0_81, __wbg_set_5cf90238115182c3 as __vite__wasmImport_0_82, __wbg_length_72e2208bbc0efc61 as __vite__wasmImport_0_83, __wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4 as __vite__wasmImport_0_84, __wbg_newwithlength_e5d69174d6984cd7 as __vite__wasmImport_0_85, __wbg_subarray_13db269f57aa838d as __vite__wasmImport_0_86, __wbindgen_debug_string as __vite__wasmImport_0_87, __wbindgen_throw as __vite__wasmImport_0_88, __wbindgen_memory as __vite__wasmImport_0_89 } from \"./automerge_wasm_bg.js\";\nconst __vite__wasmModule = await __vite__initWasm({ \"./automerge_wasm_bg.js\": { __wbindgen_string_get: __vite__wasmImport_0_0, __wbindgen_is_object: __vite__wasmImport_0_1, __wbindgen_jsval_eq: __vite__wasmImport_0_2, __wbindgen_object_drop_ref: __vite__wasmImport_0_3, __wbindgen_error_new: __vite__wasmImport_0_4, __wbindgen_object_clone_ref: __vite__wasmImport_0_5, __wbindgen_string_new: __vite__wasmImport_0_6, __wbindgen_number_new: __vite__wasmImport_0_7, __wbindgen_number_get: __vite__wasmImport_0_8, __wbindgen_is_undefined: __vite__wasmImport_0_9, __wbindgen_boolean_get: __vite__wasmImport_0_10, __wbindgen_is_null: __vite__wasmImport_0_11, __wbindgen_is_string: __vite__wasmImport_0_12, __wbindgen_is_function: __vite__wasmImport_0_13, __wbindgen_is_array: __vite__wasmImport_0_14, __wbindgen_json_serialize: __vite__wasmImport_0_15, __wbg_new_abda76e883ba8a5f: __vite__wasmImport_0_16, __wbg_stack_658279fe44541cf6: __vite__wasmImport_0_17, __wbg_error_f851667af71bcfc6: __vite__wasmImport_0_18, __wbindgen_jsval_loose_eq: __vite__wasmImport_0_19, __wbg_String_91fba7ded13ba54c: __vite__wasmImport_0_20, __wbindgen_bigint_from_i64: __vite__wasmImport_0_21, __wbindgen_bigint_from_u64: __vite__wasmImport_0_22, __wbg_set_20cbc34131e76824: __vite__wasmImport_0_23, __wbg_getRandomValues_37fa2ca9e4e07fab: __vite__wasmImport_0_24, __wbg_randomFillSync_dc1e9a60c158336d: __vite__wasmImport_0_25, __wbg_crypto_c48a774b022d20ac: __vite__wasmImport_0_26, __wbg_process_298734cf255a885d: __vite__wasmImport_0_27, __wbg_versions_e2e78e134e3e5d01: __vite__wasmImport_0_28, __wbg_node_1cd7a5d853dbea79: __vite__wasmImport_0_29, __wbg_msCrypto_bcb970640f50a1e8: __vite__wasmImport_0_30, __wbg_require_8f08ceecec0f4fee: __vite__wasmImport_0_31, __wbg_log_1d3ae0273d8f4f8a: __vite__wasmImport_0_32, __wbg_log_576ca876af0d4a77: __vite__wasmImport_0_33, __wbg_get_44be0491f933a435: __vite__wasmImport_0_34, __wbg_length_fff51ee6522a1a18: __vite__wasmImport_0_35, __wbg_new_898a68150f225f2e: __vite__wasmImport_0_36, __wbg_newnoargs_581967eacc0e2604: __vite__wasmImport_0_37, __wbg_next_526fc47e980da008: __vite__wasmImport_0_38, __wbg_next_ddb3312ca1c4e32a: __vite__wasmImport_0_39, __wbg_done_5c1f01fb660d73b5: __vite__wasmImport_0_40, __wbg_value_1695675138684bd5: __vite__wasmImport_0_41, __wbg_iterator_97f0c81209c6c35a: __vite__wasmImport_0_42, __wbg_get_97b561fb56f034b5: __vite__wasmImport_0_43, __wbg_call_cb65541d95d71282: __vite__wasmImport_0_44, __wbg_new_b51585de1b234aff: __vite__wasmImport_0_45, __wbg_length_b3de0c6587c18245: __vite__wasmImport_0_46, __wbg_set_502d29070ea18557: __vite__wasmImport_0_47, __wbg_from_d7c216d4616bb368: __vite__wasmImport_0_48, __wbg_isArray_4c24b343cb13cfb1: __vite__wasmImport_0_49, __wbg_push_ca1c26067ef907ac: __vite__wasmImport_0_50, __wbg_unshift_de5fe028746b7cec: __vite__wasmImport_0_51, __wbg_instanceof_ArrayBuffer_39ac22089b74fddb: __vite__wasmImport_0_52, __wbg_new_d258248ed531ff54: __vite__wasmImport_0_53, __wbg_call_01734de55d61e11d: __vite__wasmImport_0_54, __wbg_call_4c92f6aec1e1d6e6: __vite__wasmImport_0_55, __wbg_instanceof_Date_91c15a742581fc41: __vite__wasmImport_0_56, __wbg_getTime_5e2054f832d82ec9: __vite__wasmImport_0_57, __wbg_new_cd59bfc8881f487b: __vite__wasmImport_0_58, __wbg_instanceof_Object_3daa8298c86298be: __vite__wasmImport_0_59, __wbg_assign_999478a110912e87: __vite__wasmImport_0_60, __wbg_defineProperty_2db1bcb00cd9da96: __vite__wasmImport_0_61, __wbg_entries_e51f29c7bba0c054: __vite__wasmImport_0_62, __wbg_freeze_29fdec6af26e40df: __vite__wasmImport_0_63, __wbg_keys_386d224d0262f361: __vite__wasmImport_0_64, __wbg_values_88acfd44c7ef08d7: __vite__wasmImport_0_65, __wbg_new_732c49c4e03c98a1: __vite__wasmImport_0_66, __wbg_apply_f9ecfcbfefaf7349: __vite__wasmImport_0_67, __wbg_deleteProperty_568c26e52bc57565: __vite__wasmImport_0_68, __wbg_ownKeys_391189872004f097: __vite__wasmImport_0_69, __wbg_set_092e06b0f9d71865: __vite__wasmImport_0_70, __wbg_buffer_085ec1f694018c4f: __vite__wasmImport_0_71, __wbg_concat_c15e9c7e01e04001: __vite__wasmImport_0_72, __wbg_slice_0a0d91ee629d603a: __vite__wasmImport_0_73, __wbg_for_2256af0eb4ac96ac: __vite__wasmImport_0_74, __wbg_toString_bb5de5cb12268093: __vite__wasmImport_0_75, __wbg_self_1ff1d729e9aae938: __vite__wasmImport_0_76, __wbg_window_5f4faef6c12b79ec: __vite__wasmImport_0_77, __wbg_globalThis_1d39714405582d3c: __vite__wasmImport_0_78, __wbg_global_651f05c6a0944d1c: __vite__wasmImport_0_79, __wbg_newwithbyteoffsetandlength_6da8e527659b86aa: __vite__wasmImport_0_80, __wbg_new_8125e318e6245eed: __vite__wasmImport_0_81, __wbg_set_5cf90238115182c3: __vite__wasmImport_0_82, __wbg_length_72e2208bbc0efc61: __vite__wasmImport_0_83, __wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4: __vite__wasmImport_0_84, __wbg_newwithlength_e5d69174d6984cd7: __vite__wasmImport_0_85, __wbg_subarray_13db269f57aa838d: __vite__wasmImport_0_86, __wbindgen_debug_string: __vite__wasmImport_0_87, __wbindgen_throw: __vite__wasmImport_0_88, __wbindgen_memory: __vite__wasmImport_0_89 } }, __vite__wasmUrl);\nexport const memory = __vite__wasmModule.memory;\nexport const __wbg_syncstate_free = __vite__wasmModule.__wbg_syncstate_free;\nexport const syncstate_sharedHeads = __vite__wasmModule.syncstate_sharedHeads;\nexport const syncstate_lastSentHeads = __vite__wasmModule.syncstate_lastSentHeads;\nexport const syncstate_set_lastSentHeads = __vite__wasmModule.syncstate_set_lastSentHeads;\nexport const syncstate_set_sentHashes = __vite__wasmModule.syncstate_set_sentHashes;\nexport const syncstate_clone = __vite__wasmModule.syncstate_clone;\nexport const __wbg_automerge_free = __vite__wasmModule.__wbg_automerge_free;\nexport const automerge_new = __vite__wasmModule.automerge_new;\nexport const automerge_clone = __vite__wasmModule.automerge_clone;\nexport const automerge_fork = __vite__wasmModule.automerge_fork;\nexport const automerge_pendingOps = __vite__wasmModule.automerge_pendingOps;\nexport const automerge_commit = __vite__wasmModule.automerge_commit;\nexport const automerge_merge = __vite__wasmModule.automerge_merge;\nexport const automerge_rollback = __vite__wasmModule.automerge_rollback;\nexport const automerge_keys = __vite__wasmModule.automerge_keys;\nexport const automerge_text = __vite__wasmModule.automerge_text;\nexport const automerge_spans = __vite__wasmModule.automerge_spans;\nexport const automerge_splice = __vite__wasmModule.automerge_splice;\nexport const automerge_updateText = __vite__wasmModule.automerge_updateText;\nexport const automerge_push = __vite__wasmModule.automerge_push;\nexport const automerge_pushObject = __vite__wasmModule.automerge_pushObject;\nexport const automerge_insert = __vite__wasmModule.automerge_insert;\nexport const automerge_splitBlock = __vite__wasmModule.automerge_splitBlock;\nexport const automerge_joinBlock = __vite__wasmModule.automerge_joinBlock;\nexport const automerge_updateBlocks = __vite__wasmModule.automerge_updateBlocks;\nexport const automerge_updateBlock = __vite__wasmModule.automerge_updateBlock;\nexport const automerge_getBlock = __vite__wasmModule.automerge_getBlock;\nexport const automerge_insertObject = __vite__wasmModule.automerge_insertObject;\nexport const automerge_put = __vite__wasmModule.automerge_put;\nexport const automerge_putObject = __vite__wasmModule.automerge_putObject;\nexport const automerge_increment = __vite__wasmModule.automerge_increment;\nexport const automerge_get = __vite__wasmModule.automerge_get;\nexport const automerge_getWithType = __vite__wasmModule.automerge_getWithType;\nexport const automerge_objInfo = __vite__wasmModule.automerge_objInfo;\nexport const automerge_getAll = __vite__wasmModule.automerge_getAll;\nexport const automerge_enableFreeze = __vite__wasmModule.automerge_enableFreeze;\nexport const automerge_registerDatatype = __vite__wasmModule.automerge_registerDatatype;\nexport const automerge_applyPatches = __vite__wasmModule.automerge_applyPatches;\nexport const automerge_applyAndReturnPatches = __vite__wasmModule.automerge_applyAndReturnPatches;\nexport const automerge_diffIncremental = __vite__wasmModule.automerge_diffIncremental;\nexport const automerge_updateDiffCursor = __vite__wasmModule.automerge_updateDiffCursor;\nexport const automerge_resetDiffCursor = __vite__wasmModule.automerge_resetDiffCursor;\nexport const automerge_diff = __vite__wasmModule.automerge_diff;\nexport const automerge_isolate = __vite__wasmModule.automerge_isolate;\nexport const automerge_integrate = __vite__wasmModule.automerge_integrate;\nexport const automerge_length = __vite__wasmModule.automerge_length;\nexport const automerge_delete = __vite__wasmModule.automerge_delete;\nexport const automerge_save = __vite__wasmModule.automerge_save;\nexport const automerge_saveIncremental = __vite__wasmModule.automerge_saveIncremental;\nexport const automerge_saveSince = __vite__wasmModule.automerge_saveSince;\nexport const automerge_saveNoCompress = __vite__wasmModule.automerge_saveNoCompress;\nexport const automerge_saveAndVerify = __vite__wasmModule.automerge_saveAndVerify;\nexport const automerge_loadIncremental = __vite__wasmModule.automerge_loadIncremental;\nexport const automerge_applyChanges = __vite__wasmModule.automerge_applyChanges;\nexport const automerge_getChanges = __vite__wasmModule.automerge_getChanges;\nexport const automerge_getChangeByHash = __vite__wasmModule.automerge_getChangeByHash;\nexport const automerge_getChangesAdded = __vite__wasmModule.automerge_getChangesAdded;\nexport const automerge_getHeads = __vite__wasmModule.automerge_getHeads;\nexport const automerge_getActorId = __vite__wasmModule.automerge_getActorId;\nexport const automerge_getLastLocalChange = __vite__wasmModule.automerge_getLastLocalChange;\nexport const automerge_dump = __vite__wasmModule.automerge_dump;\nexport const automerge_getMissingDeps = __vite__wasmModule.automerge_getMissingDeps;\nexport const automerge_receiveSyncMessage = __vite__wasmModule.automerge_receiveSyncMessage;\nexport const automerge_generateSyncMessage = __vite__wasmModule.automerge_generateSyncMessage;\nexport const automerge_toJS = __vite__wasmModule.automerge_toJS;\nexport const automerge_materialize = __vite__wasmModule.automerge_materialize;\nexport const automerge_getCursor = __vite__wasmModule.automerge_getCursor;\nexport const automerge_getCursorPosition = __vite__wasmModule.automerge_getCursorPosition;\nexport const automerge_emptyChange = __vite__wasmModule.automerge_emptyChange;\nexport const automerge_mark = __vite__wasmModule.automerge_mark;\nexport const automerge_unmark = __vite__wasmModule.automerge_unmark;\nexport const automerge_marks = __vite__wasmModule.automerge_marks;\nexport const automerge_marksAt = __vite__wasmModule.automerge_marksAt;\nexport const create = __vite__wasmModule.create;\nexport const load = __vite__wasmModule.load;\nexport const encodeChange = __vite__wasmModule.encodeChange;\nexport const decodeChange = __vite__wasmModule.decodeChange;\nexport const initSyncState = __vite__wasmModule.initSyncState;\nexport const importSyncState = __vite__wasmModule.importSyncState;\nexport const exportSyncState = __vite__wasmModule.exportSyncState;\nexport const encodeSyncMessage = __vite__wasmModule.encodeSyncMessage;\nexport const decodeSyncMessage = __vite__wasmModule.decodeSyncMessage;\nexport const encodeSyncState = __vite__wasmModule.encodeSyncState;\nexport const decodeSyncState = __vite__wasmModule.decodeSyncState;\nexport const __wbindgen_malloc = __vite__wasmModule.__wbindgen_malloc;\nexport const __wbindgen_realloc = __vite__wasmModule.__wbindgen_realloc;\nexport const __wbindgen_add_to_stack_pointer = __vite__wasmModule.__wbindgen_add_to_stack_pointer;\nexport const __wbindgen_free = __vite__wasmModule.__wbindgen_free;\nexport const __wbindgen_exn_store = __vite__wasmModule.__wbindgen_exn_store;\n","import * as wasm from \"./automerge_wasm_bg.wasm\";\nimport { __wbg_set_wasm } from \"./automerge_wasm_bg.js\";\n__wbg_set_wasm(wasm);\nexport * from \"./automerge_wasm_bg.js\";\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/** @hidden **/\nexport { /** @hidden */ uuid } from \"./uuid.js\";\nimport { rootProxy } from \"./proxies.js\";\nimport { STATE } from \"./constants.js\";\nimport { Counter, } from \"./types.js\";\nexport { Counter, Int, Uint, Float64, } from \"./types.js\";\nimport { Text } from \"./text.js\";\nexport { Text } from \"./text.js\";\nconst SyncStateSymbol = Symbol(\"_syncstate\");\nimport { ApiHandler, UseApi } from \"./low_level.js\";\nimport { RawString } from \"./raw_string.js\";\nimport { _state, _is_proxy, _trace, _obj } from \"./internal_state.js\";\nimport { stableConflictAt } from \"./conflicts.js\";\n/**\n * Function for use in {@link change} which inserts values into a list at a given index\n * @param list\n * @param index\n * @param values\n */\nexport function insertAt(list, index, ...values) {\n    if (!_is_proxy(list)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    ;\n    list.insertAt(index, ...values);\n}\n/**\n * Function for use in {@link change} which deletes values from a list at a given index\n * @param list\n * @param index\n * @param numDelete\n */\nexport function deleteAt(list, index, numDelete) {\n    if (!_is_proxy(list)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    ;\n    list.deleteAt(index, numDelete);\n}\n/** @hidden **/\nexport function use(api) {\n    UseApi(api);\n}\nimport * as wasm from \"@automerge/automerge-wasm\";\nuse(wasm);\n/** @hidden */\nexport function getBackend(doc) {\n    return _state(doc).handle;\n}\nfunction importOpts(_actor) {\n    if (typeof _actor === \"object\") {\n        return _actor;\n    }\n    else {\n        return { actor: _actor };\n    }\n}\n/**\n * Create a new automerge document\n *\n * @typeParam T - The type of value contained in the document. This will be the\n *     type that is passed to the change closure in {@link change}\n * @param _opts - Either an actorId or an {@link InitOptions} (which may\n *     contain an actorId). If this is null the document will be initialised with a\n *     random actor ID\n */\nexport function init(_opts) {\n    const opts = importOpts(_opts);\n    const freeze = !!opts.freeze;\n    const patchCallback = opts.patchCallback;\n    const text_v1 = !(opts.enableTextV2 || false);\n    const actor = opts.actor;\n    const handle = ApiHandler.create({ actor, text_v1 });\n    handle.enableFreeze(!!opts.freeze);\n    handle.registerDatatype(\"counter\", (n) => new Counter(n));\n    const textV2 = opts.enableTextV2 || false;\n    if (textV2) {\n        handle.registerDatatype(\"str\", (n, { context }) => {\n            if (context === \"blockAttr\") {\n                return n;\n            }\n            else {\n                return new RawString(n);\n            }\n        });\n    }\n    else {\n        handle.registerDatatype(\"text\", (n) => new Text(n));\n    }\n    const doc = handle.materialize(\"/\", undefined, {\n        handle,\n        heads: undefined,\n        freeze,\n        patchCallback,\n        textV2,\n    });\n    return doc;\n}\n/**\n * Make an immutable view of an automerge document as at `heads`\n *\n * @remarks\n * The document returned from this function cannot be passed to {@link change}.\n * This is because it shares the same underlying memory as `doc`, but it is\n * consequently a very cheap copy.\n *\n * Note that this function will throw an error if any of the hashes in `heads`\n * are not in the document.\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to create a view of\n * @param heads - The hashes of the heads to create a view at\n */\nexport function view(doc, heads) {\n    const state = _state(doc);\n    const handle = state.handle;\n    return state.handle.materialize(\"/\", heads, Object.assign(Object.assign({}, state), { handle,\n        heads }));\n}\n/**\n * Make a full writable copy of an automerge document\n *\n * @remarks\n * Unlike {@link view} this function makes a full copy of the memory backing\n * the document and can thus be passed to {@link change}. It also generates a\n * new actor ID so that changes made in the new document do not create duplicate\n * sequence numbers with respect to the old document. If you need control over\n * the actor ID which is generated you can pass the actor ID as the second\n * argument\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to clone\n * @param _opts - Either an actor ID to use for the new doc or an {@link InitOptions}\n */\nexport function clone(doc, _opts) {\n    const state = _state(doc);\n    const heads = state.heads;\n    const opts = importOpts(_opts);\n    const handle = state.handle.fork(opts.actor, heads);\n    handle.updateDiffCursor();\n    // `change` uses the presence of state.heads to determine if we are in a view\n    // set it to undefined to indicate that this is a full fat document\n    const { heads: _oldHeads } = state, stateSansHeads = __rest(state, [\"heads\"]);\n    stateSansHeads.patchCallback = opts.patchCallback;\n    return handle.applyPatches(doc, Object.assign(Object.assign({}, stateSansHeads), { handle }));\n}\n/** Explicity free the memory backing a document. Note that this is note\n * necessary in environments which support\n * [`FinalizationRegistry`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/FinalizationRegistry)\n */\nexport function free(doc) {\n    return _state(doc).handle.free();\n}\n/**\n * Create an automerge document from a POJO\n *\n * @param initialState - The initial state which will be copied into the document\n * @typeParam T - The type of the value passed to `from` _and_ the type the resulting document will contain\n * @typeParam actor - The actor ID of the resulting document, if this is null a random actor ID will be used\n *\n * @example\n * ```\n * const doc = automerge.from({\n *     tasks: [\n *         {description: \"feed dogs\", done: false}\n *     ]\n * })\n * ```\n */\nexport function from(initialState, _opts) {\n    return _change(init(_opts), \"from\", {}, d => Object.assign(d, initialState))\n        .newDoc;\n}\n/**\n * Update the contents of an automerge document\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to update\n * @param options - Either a message, an {@link ChangeOptions}, or a {@link ChangeFn}\n * @param callback - A `ChangeFn` to be used if `options` was a `string`\n *\n * Note that if the second argument is a function it will be used as the `ChangeFn` regardless of what the third argument is.\n *\n * @example A simple change\n * ```\n * let doc1 = automerge.init()\n * doc1 = automerge.change(doc1, d => {\n *     d.key = \"value\"\n * })\n * assert.equal(doc1.key, \"value\")\n * ```\n *\n * @example A change with a message\n *\n * ```\n * doc1 = automerge.change(doc1, \"add another value\", d => {\n *     d.key2 = \"value2\"\n * })\n * ```\n *\n * @example A change with a message and a timestamp\n *\n * ```\n * doc1 = automerge.change(doc1, {message: \"add another value\", time: 1640995200}, d => {\n *     d.key2 = \"value2\"\n * })\n * ```\n *\n * @example responding to a patch callback\n * ```\n * let patchedPath\n * let patchCallback = patch => {\n *    patchedPath = patch.path\n * }\n * doc1 = automerge.change(doc1, {message: \"add another value\", time: 1640995200, patchCallback}, d => {\n *     d.key2 = \"value2\"\n * })\n * assert.equal(patchedPath, [\"key2\"])\n * ```\n */\nexport function change(doc, options, callback) {\n    if (typeof options === \"function\") {\n        return _change(doc, \"change\", {}, options).newDoc;\n    }\n    else if (typeof callback === \"function\") {\n        if (typeof options === \"string\") {\n            options = { message: options };\n        }\n        return _change(doc, \"change\", options, callback).newDoc;\n    }\n    else {\n        throw RangeError(\"Invalid args for change\");\n    }\n}\n/**\n * Make a change to the document as it was at a particular point in history\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to update\n * @param scope - The heads representing the point in history to make the change\n * @param options - Either a message or a {@link ChangeOptions} for the new change\n * @param callback - A `ChangeFn` to be used if `options` was a `string`\n *\n * @remarks\n * This function is similar to {@link change} but allows you to make changes to\n * the document as if it were at a particular point in time. To understand this\n * imagine a document created with the following history:\n *\n * ```ts\n * let doc = automerge.from({..})\n * doc = automerge.change(doc, () => {...})\n *\n * const heads = automerge.getHeads(doc)\n *\n * // fork the document make a change\n * let fork = automerge.fork(doc)\n * fork = automerge.change(fork, () => {...})\n * const headsOnFork = automerge.getHeads(fork)\n *\n * // make a change on the original doc\n * doc = automerge.change(doc, () => {...})\n * const headsOnOriginal = automerge.getHeads(doc)\n *\n * // now merge the changes back to the original document\n * doc = automerge.merge(doc, fork)\n *\n * // The heads of the document will now be (headsOnFork, headsOnOriginal)\n * ```\n *\n * {@link ChangeAt} produces an equivalent history, but without having to\n * create a fork of the document. In particular the `newHeads` field of the\n * returned {@link ChangeAtResult} will be the same as `headsOnFork`.\n *\n * Why would you want this? It's typically used in conjunction with {@link diff}\n * to reconcile state which is managed concurrently with the document. For\n * example, if you have a text editor component which the user is modifying\n * and you can't send the changes to the document synchronously you might follow\n * a workflow like this:\n *\n * * On initialization save the current heads of the document in the text editor state\n * * Every time the user makes a change record the change in the text editor state\n *\n * Now from time to time reconcile the editor state and the document\n * * Load the last saved heads from the text editor state, call them `oldHeads`\n * * Apply all the unreconciled changes to the document using `changeAt(doc, oldHeads, ...)`\n * * Get the diff from the resulting document to the current document using {@link diff}\n *   passing the {@link ChangeAtResult.newHeads} as the `before` argument and the\n *   heads of the entire document as the `after` argument.\n * * Apply the diff to the text editor state\n * * Save the current heads of the document in the text editor state\n */\nexport function changeAt(doc, scope, options, callback) {\n    if (typeof options === \"function\") {\n        return _change(doc, \"changeAt\", {}, options, scope);\n    }\n    else if (typeof callback === \"function\") {\n        if (typeof options === \"string\") {\n            options = { message: options };\n        }\n        return _change(doc, \"changeAt\", options, callback, scope);\n    }\n    else {\n        throw RangeError(\"Invalid args for changeAt\");\n    }\n}\nfunction progressDocument(doc, source, heads, callback) {\n    if (heads == null) {\n        return doc;\n    }\n    const state = _state(doc);\n    const nextState = Object.assign(Object.assign({}, state), { heads: undefined });\n    const { value: nextDoc, patches } = state.handle.applyAndReturnPatches(doc, nextState);\n    if (patches.length > 0) {\n        if (callback != null) {\n            callback(patches, { before: doc, after: nextDoc, source });\n        }\n        const newState = _state(nextDoc);\n        newState.mostRecentPatch = {\n            before: _state(doc).heads,\n            after: newState.handle.getHeads(),\n            patches,\n            source,\n        };\n    }\n    state.heads = heads;\n    return nextDoc;\n}\nfunction _change(doc, source, options, callback, scope) {\n    if (typeof callback !== \"function\") {\n        throw new RangeError(\"invalid change function\");\n    }\n    const state = _state(doc);\n    if (doc === undefined || state === undefined) {\n        throw new RangeError(\"must be the document root\");\n    }\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    let heads = state.handle.getHeads();\n    if (scope && headsEqual(scope, heads)) {\n        scope = undefined;\n    }\n    if (scope) {\n        state.handle.isolate(scope);\n        heads = scope;\n    }\n    try {\n        state.heads = heads;\n        const root = rootProxy(state.handle, state.textV2);\n        callback(root);\n        if (state.handle.pendingOps() === 0) {\n            state.heads = undefined;\n            if (scope) {\n                state.handle.integrate();\n            }\n            return {\n                newDoc: doc,\n                newHeads: null,\n            };\n        }\n        else {\n            const newHead = state.handle.commit(options.message, options.time);\n            state.handle.integrate();\n            return {\n                newDoc: progressDocument(doc, source, heads, options.patchCallback || state.patchCallback),\n                newHeads: newHead != null ? [newHead] : null,\n            };\n        }\n    }\n    catch (e) {\n        state.heads = undefined;\n        state.handle.rollback();\n        throw e;\n    }\n}\n/**\n * Make a change to a document which does not modify the document\n *\n * @param doc - The doc to add the empty change to\n * @param options - Either a message or a {@link ChangeOptions} for the new change\n *\n * Why would you want to do this? One reason might be that you have merged\n * changes from some other peers and you want to generate a change which\n * depends on those merged changes so that you can sign the new change with all\n * of the merged changes as part of the new change.\n */\nexport function emptyChange(doc, options) {\n    if (options === undefined) {\n        options = {};\n    }\n    if (typeof options === \"string\") {\n        options = { message: options };\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.emptyChange(options.message, options.time);\n    return progressDocument(doc, \"emptyChange\", heads);\n}\n/**\n * Load an automerge document from a compressed document produce by {@link save}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressed document\n * @param _opts - Either an actor ID or some {@link InitOptions}, if the actor\n *                ID is null a random actor ID will be created\n *\n * Note that `load` will throw an error if passed incomplete content (for\n * example if you are receiving content over the network and don't know if you\n * have the complete document yet). If you need to handle incomplete content use\n * {@link init} followed by {@link loadIncremental}.\n */\nexport function load(data, _opts) {\n    const opts = importOpts(_opts);\n    const actor = opts.actor;\n    const patchCallback = opts.patchCallback;\n    const text_v1 = !(opts.enableTextV2 || false);\n    const unchecked = opts.unchecked || false;\n    const allowMissingDeps = opts.allowMissingChanges || false;\n    const convertRawStringsToText = opts.convertRawStringsToText || false;\n    const handle = ApiHandler.load(data, {\n        text_v1,\n        actor,\n        unchecked,\n        allowMissingDeps,\n        convertRawStringsToText,\n    });\n    handle.enableFreeze(!!opts.freeze);\n    handle.registerDatatype(\"counter\", (n) => new Counter(n));\n    const textV2 = opts.enableTextV2 || false;\n    if (textV2) {\n        handle.registerDatatype(\"str\", (n) => new RawString(n));\n    }\n    else {\n        handle.registerDatatype(\"text\", (n) => new Text(n));\n    }\n    const doc = handle.materialize(\"/\", undefined, {\n        handle,\n        heads: undefined,\n        patchCallback,\n        textV2,\n    });\n    return doc;\n}\n/**\n * Load changes produced by {@link saveIncremental}, or partial changes\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressedchanges\n * @param opts  - an {@link ApplyOptions}\n *\n * This function is useful when staying up to date with a connected peer.\n * Perhaps the other end sent you a full compresed document which you loaded\n * with {@link load} and they're sending you the result of\n * {@link getLastLocalChange} every time they make a change.\n *\n * Note that this function will succesfully load the results of {@link save} as\n * well as {@link getLastLocalChange} or any other incremental change.\n */\nexport function loadIncremental(doc, data, opts) {\n    if (!opts) {\n        opts = {};\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(doc));\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.loadIncremental(data);\n    return progressDocument(doc, \"loadIncremental\", heads, opts.patchCallback || state.patchCallback);\n}\n/**\n * Create binary save data to be appended to a save file or fed into {@link loadIncremental}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n *\n * This function is useful for incrementally saving state.  The data can be appended to a\n * automerge save file, or passed to a document replicating its state.\n *\n */\nexport function saveIncremental(doc) {\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(doc));\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    return state.handle.saveIncremental();\n}\n/**\n * Export the contents of a document to a compressed format\n *\n * @param doc - The doc to save\n *\n * The returned bytes can be passed to {@link load} or {@link loadIncremental}\n */\nexport function save(doc) {\n    return _state(doc).handle.save();\n}\n/**\n * Merge `remote` into `local`\n * @typeParam T - The type of values contained in each document\n * @param local - The document to merge changes into\n * @param remote - The document to merge changes from\n *\n * @returns - The merged document\n *\n * Often when you are merging documents you will also need to clone them. Both\n * arguments to `merge` are frozen after the call so you can no longer call\n * mutating methods (such as {@link change}) on them. The symtom of this will be\n * an error which says \"Attempting to change an out of date document\". To\n * overcome this call {@link clone} on the argument before passing it to {@link\n * merge}.\n */\nexport function merge(local, remote) {\n    const localState = _state(local);\n    if (localState.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(local));\n    }\n    const heads = localState.handle.getHeads();\n    const remoteState = _state(remote);\n    const changes = localState.handle.getChangesAdded(remoteState.handle);\n    localState.handle.applyChanges(changes);\n    return progressDocument(local, \"merge\", heads, localState.patchCallback);\n}\n/**\n * Get the actor ID associated with the document\n */\nexport function getActorId(doc) {\n    const state = _state(doc);\n    return state.handle.getActorId();\n}\n/**\n * Get the conflicts associated with a property\n *\n * The values of properties in a map in automerge can be conflicted if there\n * are concurrent \"put\" operations to the same key. Automerge chooses one value\n * arbitrarily (but deterministically, any two nodes who have the same set of\n * changes will choose the same value) from the set of conflicting values to\n * present as the value of the key.\n *\n * Sometimes you may want to examine these conflicts, in this case you can use\n * {@link getConflicts} to get the conflicts for the key.\n *\n * @example\n * ```\n * import * as automerge from \"@automerge/automerge\"\n *\n * type Profile = {\n *     pets: Array<{name: string, type: string}>\n * }\n *\n * let doc1 = automerge.init<Profile>(\"aaaa\")\n * doc1 = automerge.change(doc1, d => {\n *     d.pets = [{name: \"Lassie\", type: \"dog\"}]\n * })\n * let doc2 = automerge.init<Profile>(\"bbbb\")\n * doc2 = automerge.merge(doc2, automerge.clone(doc1))\n *\n * doc2 = automerge.change(doc2, d => {\n *     d.pets[0].name = \"Beethoven\"\n * })\n *\n * doc1 = automerge.change(doc1, d => {\n *     d.pets[0].name = \"Babe\"\n * })\n *\n * const doc3 = automerge.merge(doc1, doc2)\n *\n * // Note that here we pass `doc3.pets`, not `doc3`\n * let conflicts = automerge.getConflicts(doc3.pets[0], \"name\")\n *\n * // The two conflicting values are the keys of the conflicts object\n * assert.deepEqual(Object.values(conflicts), [\"Babe\", Beethoven\"])\n * ```\n */\nexport function getConflicts(doc, prop) {\n    const state = _state(doc, false);\n    if (state.textV2) {\n        throw new Error(\"use unstable.getConflicts for an unstable document\");\n    }\n    const objectId = _obj(doc);\n    if (objectId != null) {\n        return stableConflictAt(state.handle, objectId, prop);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * Get the binary representation of the last change which was made to this doc\n *\n * This is most useful when staying in sync with other peers, every time you\n * make a change locally via {@link change} you immediately call {@link\n * getLastLocalChange} and send the result over the network to other peers.\n */\nexport function getLastLocalChange(doc) {\n    const state = _state(doc);\n    return state.handle.getLastLocalChange() || undefined;\n}\n/**\n * Return the object ID of an arbitrary javascript value\n *\n * This is useful to determine if something is actually an automerge document,\n * if `doc` is not an automerge document this will return null.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getObjectId(doc, prop) {\n    if (prop) {\n        const state = _state(doc, false);\n        const objectId = _obj(doc);\n        if (!state || !objectId) {\n            return null;\n        }\n        return state.handle.get(objectId, prop);\n    }\n    else {\n        return _obj(doc);\n    }\n}\n/**\n * Get the changes which are in `newState` but not in `oldState`. The returned\n * changes can be loaded in `oldState` via {@link applyChanges}.\n *\n * Note that this will crash if there are changes in `oldState` which are not in `newState`.\n */\nexport function getChanges(oldState, newState) {\n    const n = _state(newState);\n    return n.handle.getChanges(getHeads(oldState));\n}\n/**\n * Get all the changes in a document\n *\n * This is different to {@link save} because the output is an array of changes\n * which can be individually applied via {@link applyChanges}`\n *\n */\nexport function getAllChanges(doc) {\n    const state = _state(doc);\n    return state.handle.getChanges([]);\n}\n/**\n * Apply changes received from another document\n *\n * `doc` will be updated to reflect the `changes`. If there are changes which\n * we do not have dependencies for yet those will be stored in the document and\n * applied when the depended on changes arrive.\n *\n * You can use the {@link ApplyOptions} to pass a patchcallback which will be\n * informed of any changes which occur as a result of applying the changes\n *\n */\nexport function applyChanges(doc, changes, opts) {\n    const state = _state(doc);\n    if (!opts) {\n        opts = {};\n    }\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.applyChanges(changes);\n    state.heads = heads;\n    return [\n        progressDocument(doc, \"applyChanges\", heads, opts.patchCallback || state.patchCallback),\n    ];\n}\n/** @hidden */\nexport function getHistory(doc) {\n    const textV2 = _state(doc).textV2;\n    const history = getAllChanges(doc);\n    return history.map((change, index) => ({\n        get change() {\n            return decodeChange(change);\n        },\n        get snapshot() {\n            const [state] = applyChanges(init({ enableTextV2: textV2 }), history.slice(0, index + 1));\n            return state;\n        },\n    }));\n}\n/**\n * Create a set of patches representing the change from one set of heads to another\n *\n * If either of the heads are missing from the document the returned set of patches will be empty\n */\nexport function diff(doc, before, after) {\n    checkHeads(before, \"before\");\n    checkHeads(after, \"after\");\n    const state = _state(doc);\n    if (state.mostRecentPatch &&\n        equals(state.mostRecentPatch.before, before) &&\n        equals(state.mostRecentPatch.after, after)) {\n        return state.mostRecentPatch.patches;\n    }\n    return state.handle.diff(before, after);\n}\nfunction headsEqual(heads1, heads2) {\n    if (heads1.length !== heads2.length) {\n        return false;\n    }\n    for (let i = 0; i < heads1.length; i++) {\n        if (heads1[i] !== heads2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction checkHeads(heads, fieldname) {\n    if (!Array.isArray(heads)) {\n        throw new Error(`${fieldname} must be an array`);\n    }\n}\n/** @hidden */\n// FIXME : no tests\n// FIXME can we just use deep equals now?\nexport function equals(val1, val2) {\n    if (!isObject(val1) || !isObject(val2))\n        return val1 === val2;\n    const keys1 = Object.keys(val1).sort(), keys2 = Object.keys(val2).sort();\n    if (keys1.length !== keys2.length)\n        return false;\n    for (let i = 0; i < keys1.length; i++) {\n        if (keys1[i] !== keys2[i])\n            return false;\n        if (!equals(val1[keys1[i]], val2[keys2[i]]))\n            return false;\n    }\n    return true;\n}\n/**\n * encode a {@link SyncState} into binary to send over the network\n *\n * @group sync\n * */\nexport function encodeSyncState(state) {\n    const sync = ApiHandler.importSyncState(state);\n    const result = ApiHandler.encodeSyncState(sync);\n    sync.free();\n    return result;\n}\n/**\n * Decode some binary data into a {@link SyncState}\n *\n * @group sync\n */\nexport function decodeSyncState(state) {\n    const sync = ApiHandler.decodeSyncState(state);\n    const result = ApiHandler.exportSyncState(sync);\n    sync.free();\n    return result;\n}\n/**\n * Generate a sync message to send to the peer represented by `inState`\n * @param doc - The doc to generate messages about\n * @param inState - The {@link SyncState} representing the peer we are talking to\n *\n * @group sync\n *\n * @returns An array of `[newSyncState, syncMessage | null]` where\n * `newSyncState` should replace `inState` and `syncMessage` should be sent to\n * the peer if it is not null. If `syncMessage` is null then we are up to date.\n */\nexport function generateSyncMessage(doc, inState) {\n    const state = _state(doc);\n    const syncState = ApiHandler.importSyncState(inState);\n    const message = state.handle.generateSyncMessage(syncState);\n    const outState = ApiHandler.exportSyncState(syncState);\n    return [outState, message];\n}\n/**\n * Update a document and our sync state on receiving a sync message\n *\n * @group sync\n *\n * @param doc     - The doc the sync message is about\n * @param inState - The {@link SyncState} for the peer we are communicating with\n * @param message - The message which was received\n * @param opts    - Any {@link ApplyOption}s, used for passing a\n *                  {@link PatchCallback} which will be informed of any changes\n *                  in `doc` which occur because of the received sync message.\n *\n * @returns An array of `[newDoc, newSyncState, syncMessage | null]` where\n * `newDoc` is the updated state of `doc`, `newSyncState` should replace\n * `inState` and `syncMessage` should be sent to the peer if it is not null. If\n * `syncMessage` is null then we are up to date.\n */\nexport function receiveSyncMessage(doc, inState, message, opts) {\n    const syncState = ApiHandler.importSyncState(inState);\n    if (!opts) {\n        opts = {};\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.receiveSyncMessage(syncState, message);\n    const outSyncState = ApiHandler.exportSyncState(syncState);\n    return [\n        progressDocument(doc, \"receiveSyncMessage\", heads, opts.patchCallback || state.patchCallback),\n        outSyncState,\n        null,\n    ];\n}\n/**\n * Create a new, blank {@link SyncState}\n *\n * When communicating with a peer for the first time use this to generate a new\n * {@link SyncState} for them\n *\n * @group sync\n */\nexport function initSyncState() {\n    return ApiHandler.exportSyncState(ApiHandler.initSyncState());\n}\n/** @hidden */\nexport function encodeChange(change) {\n    return ApiHandler.encodeChange(change);\n}\n/** @hidden */\nexport function decodeChange(data) {\n    return ApiHandler.decodeChange(data);\n}\n/** @hidden */\nexport function encodeSyncMessage(message) {\n    return ApiHandler.encodeSyncMessage(message);\n}\n/** @hidden */\nexport function decodeSyncMessage(message) {\n    return ApiHandler.decodeSyncMessage(message);\n}\n/**\n * Get any changes in `doc` which are not dependencies of `heads`\n */\nexport function getMissingDeps(doc, heads) {\n    const state = _state(doc);\n    return state.handle.getMissingDeps(heads);\n}\n/**\n * Get the hashes of the heads of this document\n */\nexport function getHeads(doc) {\n    const state = _state(doc);\n    return state.heads || state.handle.getHeads();\n}\n/** @hidden */\nexport function dump(doc) {\n    const state = _state(doc);\n    state.handle.dump();\n}\n/** @hidden */\nexport function toJS(doc) {\n    const state = _state(doc);\n    const enabled = state.handle.enableFreeze(false);\n    const result = state.handle.materialize();\n    state.handle.enableFreeze(enabled);\n    return result;\n}\nexport function isAutomerge(doc) {\n    if (typeof doc == \"object\" && doc !== null) {\n        return getObjectId(doc) === \"_root\" && !!Reflect.get(doc, STATE);\n    }\n    else {\n        return false;\n    }\n}\nfunction isObject(obj) {\n    return typeof obj === \"object\" && obj !== null;\n}\nexport function saveSince(doc, heads) {\n    const state = _state(doc);\n    const result = state.handle.saveSince(heads);\n    return result;\n}\n","/**\n * # The next API\n *\n * This module contains new features we are working on which are backwards\n * incompatible with the current API of Automerge. This module will become the\n * API of the next major version of Automerge\n *\n * ## Differences from stable\n *\n * In the stable API text objects are represented using the {@link Text} class.\n * This means you must decide up front whether your string data might need\n * concurrent merges in the future and if you change your mind you have to\n * figure out how to migrate your data. In the unstable API the `Text` class is\n * gone and all `string`s are represented using the text CRDT, allowing for\n * concurrent changes. Modifying a string is done using the {@link splice}\n * function. You can still access the old behaviour of strings which do not\n * support merging behaviour via the {@link RawString} class.\n *\n * This leads to the following differences from `stable`:\n *\n * * There is no `unstable.Text` class, all strings are text objects\n * * Reading strings in an `unstable` document is the same as reading any other\n *   javascript string\n * * To modify strings in an `unstable` document use {@link splice}\n * * The {@link AutomergeValue} type does not include the {@link Text}\n *   class but the  {@link RawString} class is included in the {@link ScalarValue}\n *   type\n *\n * ## CHANGELOG\n * * Rename this module to `next` to reflect our increased confidence in it\n *   and stability commitment to it\n * * Introduce this module to expose the new API which has no `Text` class\n *\n *\n * @module\n */\nexport { Counter, Int, Uint, Float64, } from \"./next_types.js\";\nimport { unstableConflictAt } from \"./conflicts.js\";\nexport { view, free, getHeads, change, changeAt, emptyChange, loadIncremental, saveIncremental, save, merge, getActorId, getLastLocalChange, getChanges, getAllChanges, applyChanges, getHistory, equals, encodeSyncState, decodeSyncState, generateSyncMessage, receiveSyncMessage, initSyncState, encodeChange, decodeChange, encodeSyncMessage, decodeSyncMessage, getMissingDeps, dump, toJS, isAutomerge, getObjectId, diff, insertAt, deleteAt, saveSince, } from \"./stable.js\";\nimport * as stable from \"./stable.js\";\nexport { RawString } from \"./raw_string.js\";\n/** @hidden */\nexport const getBackend = stable.getBackend;\nimport { _is_proxy, _state, _obj, _clear_cache } from \"./internal_state.js\";\n/**\n * Create a new automerge document\n *\n * @typeParam T - The type of value contained in the document. This will be the\n *     type that is passed to the change closure in {@link change}\n * @param _opts - Either an actorId or an {@link InitOptions} (which may\n *     contain an actorId). If this is null the document will be initialised with a\n *     random actor ID\n */\nexport function init(_opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.init(opts);\n}\n/**\n * Make a full writable copy of an automerge document\n *\n * @remarks\n * Unlike {@link view} this function makes a full copy of the memory backing\n * the document and can thus be passed to {@link change}. It also generates a\n * new actor ID so that changes made in the new document do not create duplicate\n * sequence numbers with respect to the old document. If you need control over\n * the actor ID which is generated you can pass the actor ID as the second\n * argument\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to clone\n * @param _opts - Either an actor ID to use for the new doc or an {@link InitOptions}\n */\nexport function clone(doc, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.clone(doc, opts);\n}\n/**\n * Create an automerge document from a POJO\n *\n * @param initialState - The initial state which will be copied into the document\n * @typeParam T - The type of the value passed to `from` _and_ the type the resulting document will contain\n * @typeParam actor - The actor ID of the resulting document, if this is null a random actor ID will be used\n *\n * @example\n * ```\n * const doc = automerge.from({\n *     tasks: [\n *         {description: \"feed dogs\", done: false}\n *     ]\n * })\n * ```\n */\nexport function from(initialState, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.from(initialState, opts);\n}\n/**\n * Load an automerge document from a compressed document produce by {@link save}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressed document\n * @param _opts - Either an actor ID or some {@link InitOptions}, if the actor\n *                ID is null a random actor ID will be created\n *\n * Note that `load` will throw an error if passed incomplete content (for\n * example if you are receiving content over the network and don't know if you\n * have the complete document yet). If you need to handle incomplete content use\n * {@link init} followed by {@link loadIncremental}.\n */\nexport function load(data, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    if (opts.patchCallback) {\n        return stable.loadIncremental(stable.init(opts), data);\n    }\n    else {\n        return stable.load(data, opts);\n    }\n}\nfunction importOpts(_actor) {\n    if (typeof _actor === \"object\") {\n        return _actor;\n    }\n    else {\n        return { actor: _actor };\n    }\n}\nfunction cursorToIndex(state, value, index) {\n    if (typeof index == \"string\") {\n        if (/^[0-9]+@[0-9a-zA-z]+$/.test(index)) {\n            return state.handle.getCursorPosition(value, index);\n        }\n        else {\n            throw new RangeError(\"index must be a number or cursor\");\n        }\n    }\n    else {\n        return index;\n    }\n}\n/**\n * Modify a string\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to modify\n * @param path - The path to the string to modify\n * @param index - The position (as a {@link Cursor} or index) to edit.\n *   If a cursor is used then the edit happens such that the cursor will\n *   now point to the end of the newText, so you can continue to reuse\n *   the same cursor for multiple calls to splice.\n * @param del - The number of code units to delete, a positive number\n *   deletes N characters after the cursor, a negative number deletes\n *   N characters before the cursor.\n * @param newText - The string to insert (if any).\n */\nexport function splice(doc, path, index, del, newText) {\n    const objPath = absoluteObjPath(doc, path, \"splice\");\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    index = cursorToIndex(state, objPath, index);\n    try {\n        return state.handle.splice(objPath, index, del, newText);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot splice: ${e}`);\n    }\n}\n/**\n * Update the value of a string\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to modify\n * @param path - The path to the string to modify\n * @param newText - The new text to update the value to\n *\n * @remarks\n * This will calculate a diff between the current value and the new value and\n * then convert that diff into calls to {@link splice}. This will produce results\n * which don't merge as well as directly capturing the user input actions, but\n * sometimes it's not possible to capture user input and this is the best you\n * can do.\n *\n * This is an experimental API and may change in the future.\n *\n * @beta\n */\nexport function updateText(doc, path, newText) {\n    const objPath = absoluteObjPath(doc, path, \"updateText\");\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    try {\n        return state.handle.updateText(objPath, newText);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot updateText: ${e}`);\n    }\n}\nexport function spans(doc, path) {\n    const state = _state(doc, false);\n    const objPath = absoluteObjPath(doc, path, \"spans\");\n    try {\n        return state.handle.spans(objPath, state.heads);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot splice: ${e}`);\n    }\n}\nexport function block(doc, path, index) {\n    const objPath = absoluteObjPath(doc, path, \"splitBlock\");\n    const state = _state(doc, false);\n    index = cursorToIndex(state, objPath, index);\n    try {\n        return state.handle.getBlock(objPath, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot get block: ${e}`);\n    }\n}\nexport function splitBlock(doc, path, index, block) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const objPath = absoluteObjPath(doc, path, \"splitBlock\");\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    index = cursorToIndex(state, objPath, index);\n    try {\n        state.handle.splitBlock(objPath, index, block);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot splice: ${e}`);\n    }\n}\nexport function joinBlock(doc, path, index) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const objPath = absoluteObjPath(doc, path, \"joinBlock\");\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    index = cursorToIndex(state, objPath, index);\n    try {\n        state.handle.joinBlock(objPath, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot joinBlock: ${e}`);\n    }\n}\nexport function updateBlock(doc, path, index, block) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const objPath = absoluteObjPath(doc, path, \"updateBlock\");\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    index = cursorToIndex(state, objPath, index);\n    try {\n        state.handle.updateBlock(objPath, index, block);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot updateBlock: ${e}`);\n    }\n}\nexport function updateBlocks(doc, path, blocks) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const objPath = absoluteObjPath(doc, path, \"updateBlock\");\n    const state = _state(doc, false);\n    _clear_cache(doc);\n    try {\n        state.handle.updateBlocks(objPath, blocks);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot updateBlock: ${e}`);\n    }\n}\n/**\n * Returns a cursor for the given position in a string.\n *\n * @remarks\n * A cursor represents a relative position, \"before character X\",\n * rather than an absolute position. As the document is edited, the\n * cursor remains stable relative to its context, just as you'd expect\n * from a cursor in a concurrent text editor.\n *\n * The string representation is shareable, and so you can use this both\n * to edit the document yourself (using {@link splice}) or to share multiple\n * collaborator's current cursor positions over the network.\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document\n * @param path - The path to the string\n * @param index - The current index of the position of the cursor\n */\nexport function getCursor(doc, path, index) {\n    const objPath = absoluteObjPath(doc, path, \"getCursor\");\n    const state = _state(doc, false);\n    try {\n        return state.handle.getCursor(objPath, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot getCursor: ${e}`);\n    }\n}\n/**\n * Returns the current index of the cursor.\n *\n * @typeParam T - The type of the value contained in the document\n *\n * @param doc - The document\n * @param path - The path to the string\n * @param index - The cursor\n */\nexport function getCursorPosition(doc, path, cursor) {\n    const objPath = absoluteObjPath(doc, path, \"getCursorPosition\");\n    const state = _state(doc, false);\n    try {\n        return state.handle.getCursorPosition(objPath, cursor);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot getCursorPosition: ${e}`);\n    }\n}\nexport function mark(doc, path, range, name, value) {\n    const objPath = absoluteObjPath(doc, path, \"mark\");\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    try {\n        return state.handle.mark(objPath, range, name, value);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot mark: ${e}`);\n    }\n}\nexport function unmark(doc, path, range, name) {\n    const objPath = absoluteObjPath(doc, path, \"unmark\");\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    try {\n        return state.handle.unmark(objPath, range, name);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot unmark: ${e}`);\n    }\n}\nexport function marks(doc, path) {\n    const objPath = absoluteObjPath(doc, path, \"marks\");\n    const state = _state(doc, false);\n    try {\n        return state.handle.marks(objPath);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot call marks(): ${e}`);\n    }\n}\nexport function marksAt(doc, path, index) {\n    const objPath = absoluteObjPath(doc, path, \"marksAt\");\n    const state = _state(doc, false);\n    try {\n        return state.handle.marksAt(objPath, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot call marksAt(): ${e}`);\n    }\n}\n/**\n * Get the conflicts associated with a property\n *\n * The values of properties in a map in automerge can be conflicted if there\n * are concurrent \"put\" operations to the same key. Automerge chooses one value\n * arbitrarily (but deterministically, any two nodes who have the same set of\n * changes will choose the same value) from the set of conflicting values to\n * present as the value of the key.\n *\n * Sometimes you may want to examine these conflicts, in this case you can use\n * {@link getConflicts} to get the conflicts for the key.\n *\n * @example\n * ```\n * import * as automerge from \"@automerge/automerge\"\n *\n * type Profile = {\n *     pets: Array<{name: string, type: string}>\n * }\n *\n * let doc1 = automerge.init<Profile>(\"aaaa\")\n * doc1 = automerge.change(doc1, d => {\n *     d.pets = [{name: \"Lassie\", type: \"dog\"}]\n * })\n * let doc2 = automerge.init<Profile>(\"bbbb\")\n * doc2 = automerge.merge(doc2, automerge.clone(doc1))\n *\n * doc2 = automerge.change(doc2, d => {\n *     d.pets[0].name = \"Beethoven\"\n * })\n *\n * doc1 = automerge.change(doc1, d => {\n *     d.pets[0].name = \"Babe\"\n * })\n *\n * const doc3 = automerge.merge(doc1, doc2)\n *\n * // Note that here we pass `doc3.pets`, not `doc3`\n * let conflicts = automerge.getConflicts(doc3.pets[0], \"name\")\n *\n * // The two conflicting values are the keys of the conflicts object\n * assert.deepEqual(Object.values(conflicts), [\"Babe\", \"Beethoven\"])\n * ```\n */\nexport function getConflicts(doc, prop) {\n    const state = _state(doc, false);\n    if (!state.textV2) {\n        throw new Error(\"use getConflicts for a stable document\");\n    }\n    const objectId = _obj(doc);\n    if (objectId != null) {\n        return unstableConflictAt(state.handle, objectId, prop);\n    }\n    else {\n        return undefined;\n    }\n}\nfunction absoluteObjPath(doc, path, functionName) {\n    path = path.slice();\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(`invalid object for ${functionName}`);\n    }\n    path.unshift(objectId);\n    return path.join(\"/\");\n}\n","// Properties of the document root object\nexport const STATE = Symbol.for(\"_am_meta\"); // symbol used to hide application metadata on automerge objects\nexport const TRACE = Symbol.for(\"_am_trace\"); // used for debugging\nexport const OBJECT_ID = Symbol.for(\"_am_objectId\"); // symbol used to hide the object id on automerge objects\nexport const IS_PROXY = Symbol.for(\"_am_isProxy\"); // symbol used to test if the document is a proxy object\nexport const CLEAR_CACHE = Symbol.for(\"_am_clearCache\"); // symbol used to tell a proxy object to clear its cache\nexport const UINT = Symbol.for(\"_am_uint\");\nexport const INT = Symbol.for(\"_am_int\");\nexport const F64 = Symbol.for(\"_am_f64\");\nexport const COUNTER = Symbol.for(\"_am_counter\");\nexport const TEXT = Symbol.for(\"_am_text\");\n","import { TEXT, STATE } from \"./constants.js\";\nexport class Text {\n    constructor(text) {\n        if (typeof text === \"string\") {\n            this.elems = [...text];\n        }\n        else if (Array.isArray(text)) {\n            this.elems = text;\n        }\n        else if (text === undefined) {\n            this.elems = [];\n        }\n        else {\n            throw new TypeError(`Unsupported initial value for Text: ${text}`);\n        }\n        Reflect.defineProperty(this, TEXT, { value: true });\n    }\n    get length() {\n        return this.elems.length;\n    }\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get(index) {\n        return this.elems[index];\n    }\n    /**\n     * Iterates over the text elements character by character, including any\n     * inline objects.\n     */\n    [Symbol.iterator]() {\n        const elems = this.elems;\n        let index = -1;\n        return {\n            next() {\n                index += 1;\n                if (index < elems.length) {\n                    return { done: false, value: elems[index] };\n                }\n                else {\n                    return { done: true };\n                }\n            },\n        };\n    }\n    /**\n     * Returns the content of the Text object as a simple string, ignoring any\n     * non-character elements.\n     */\n    toString() {\n        if (!this.str) {\n            // Concatting to a string is faster than creating an array and then\n            // .join()ing for small (<100KB) arrays.\n            // https://jsperf.com/join-vs-loop-w-type-test\n            this.str = \"\";\n            for (const elem of this.elems) {\n                if (typeof elem === \"string\")\n                    this.str += elem;\n                else\n                    this.str += \"\\uFFFC\";\n            }\n        }\n        return this.str;\n    }\n    /**\n     * Returns the content of the Text object as a sequence of strings,\n     * interleaved with non-character elements.\n     *\n     * For example, the value `['a', 'b', {x: 3}, 'c', 'd']` has spans:\n     * `=> ['ab', {x: 3}, 'cd']`\n     */\n    toSpans() {\n        if (!this.spans) {\n            this.spans = [];\n            let chars = \"\";\n            for (const elem of this.elems) {\n                if (typeof elem === \"string\") {\n                    chars += elem;\n                }\n                else {\n                    if (chars.length > 0) {\n                        this.spans.push(chars);\n                        chars = \"\";\n                    }\n                    this.spans.push(elem);\n                }\n            }\n            if (chars.length > 0) {\n                this.spans.push(chars);\n            }\n        }\n        return this.spans;\n    }\n    /**\n     * Returns the content of the Text object as a simple string, so that the\n     * JSON serialization of an Automerge document represents text nicely.\n     */\n    toJSON() {\n        return this.toString();\n    }\n    /**\n     * Updates the list item at position `index` to a new value `value`.\n     */\n    set(index, value) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        this.elems[index] = value;\n    }\n    /**\n     * Inserts new list items `values` starting at position `index`.\n     */\n    insertAt(index, ...values) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        if (values.every(v => typeof v === \"string\")) {\n            this.elems.splice(index, 0, ...values.join(\"\"));\n        }\n        else {\n            this.elems.splice(index, 0, ...values);\n        }\n    }\n    /**\n     * Deletes `numDelete` list items starting at position `index`.\n     * if `numDelete` is not given, one item is deleted.\n     */\n    deleteAt(index, numDelete = 1) {\n        if (this[STATE]) {\n            throw new RangeError(\"object cannot be modified outside of a change block\");\n        }\n        this.elems.splice(index, numDelete);\n    }\n    map(callback) {\n        this.elems.map(callback);\n    }\n    lastIndexOf(searchElement, fromIndex) {\n        this.elems.lastIndexOf(searchElement, fromIndex);\n    }\n    concat(other) {\n        return new Text(this.elems.concat(other.elems));\n    }\n    every(test) {\n        return this.elems.every(test);\n    }\n    filter(test) {\n        return new Text(this.elems.filter(test));\n    }\n    find(test) {\n        return this.elems.find(test);\n    }\n    findIndex(test) {\n        return this.elems.findIndex(test);\n    }\n    forEach(f) {\n        this.elems.forEach(f);\n    }\n    includes(elem) {\n        return this.elems.includes(elem);\n    }\n    indexOf(elem) {\n        return this.elems.indexOf(elem);\n    }\n    join(sep) {\n        return this.elems.join(sep);\n    }\n    reduce(f) {\n        this.elems.reduce(f);\n    }\n    reduceRight(f) {\n        this.elems.reduceRight(f);\n    }\n    slice(start, end) {\n        return new Text(this.elems.slice(start, end));\n    }\n    some(test) {\n        return this.elems.some(test);\n    }\n    toLocaleString() {\n        this.toString();\n    }\n}\n","import { COUNTER } from \"./constants.js\";\n/**\n * The most basic CRDT: an integer value that can be changed only by\n * incrementing and decrementing. Since addition of integers is commutative,\n * the value trivially converges.\n */\nexport class Counter {\n    constructor(value) {\n        this.value = value || 0;\n        Reflect.defineProperty(this, COUNTER, { value: true });\n    }\n    /**\n     * A peculiar JavaScript language feature from its early days: if the object\n     * `x` has a `valueOf()` method that returns a number, you can use numerical\n     * operators on the object `x` directly, such as `x + 1` or `x < 4`.\n     * This method is also called when coercing a value to a string by\n     * concatenating it with another string, as in `x + ''`.\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf\n     */\n    valueOf() {\n        return this.value;\n    }\n    /**\n     * Returns the counter value as a decimal string. If `x` is a counter object,\n     * this method is called e.g. when you do `['value: ', x].join('')` or when\n     * you use string interpolation: `value: ${x}`.\n     */\n    toString() {\n        return this.valueOf().toString();\n    }\n    /**\n     * Returns the counter value, so that a JSON serialization of an Automerge\n     * document represents the counter simply as an integer.\n     */\n    toJSON() {\n        return this.value;\n    }\n    /**\n     * Increases the value of the counter by `delta`. If `delta` is not given,\n     * increases the value of the counter by 1.\n     *\n     * Will throw an error if used outside of a change callback.\n     */\n    increment(_delta) {\n        throw new Error(\"Counters should not be incremented outside of a change callback\");\n    }\n    /**\n     * Decreases the value of the counter by `delta`. If `delta` is not given,\n     * decreases the value of the counter by 1.\n     *\n     * Will throw an error if used outside of a change callback.\n     */\n    decrement(_delta) {\n        throw new Error(\"Counters should not be decremented outside of a change callback\");\n    }\n}\n/**\n * An instance of this class is used when a counter is accessed within a change\n * callback.\n */\nclass WriteableCounter extends Counter {\n    constructor(value, context, path, objectId, key) {\n        super(value);\n        this.context = context;\n        this.path = path;\n        this.objectId = objectId;\n        this.key = key;\n    }\n    /**\n     * Increases the value of the counter by `delta`. If `delta` is not given,\n     * increases the value of the counter by 1.\n     */\n    increment(delta) {\n        delta = typeof delta === \"number\" ? delta : 1;\n        this.context.increment(this.objectId, this.key, delta);\n        this.value += delta;\n        return this.value;\n    }\n    /**\n     * Decreases the value of the counter by `delta`. If `delta` is not given,\n     * decreases the value of the counter by 1.\n     */\n    decrement(delta) {\n        return this.increment(typeof delta === \"number\" ? -delta : -1);\n    }\n}\n/**\n * Returns an instance of `WriteableCounter` for use in a change callback.\n * `context` is the proxy context that keeps track of the mutations.\n * `objectId` is the ID of the object containing the counter, and `key` is\n * the property name (key in map, or index in list) where the counter is\n * located.\n */\nexport function getWriteableCounter(value, context, path, objectId, key) {\n    return new WriteableCounter(value, context, path, objectId, key);\n}\n//module.exports = { Counter, getWriteableCounter }\n","export class RawString {\n    constructor(val) {\n        this.val = val;\n    }\n    /**\n     * Returns the content of the RawString object as a simple string\n     */\n    toString() {\n        return this.val;\n    }\n}\n","/* eslint-disable  @typescript-eslint/no-explicit-any */\nimport { Text } from \"./text.js\";\nimport { getWriteableCounter } from \"./counter.js\";\nimport { STATE, TRACE, IS_PROXY, OBJECT_ID, CLEAR_CACHE, COUNTER, INT, UINT, F64, } from \"./constants.js\";\nimport { RawString } from \"./raw_string.js\";\nfunction parseListIndex(key) {\n    if (typeof key === \"string\" && /^[0-9]+$/.test(key))\n        key = parseInt(key, 10);\n    if (typeof key !== \"number\") {\n        return key;\n    }\n    if (key < 0 || isNaN(key) || key === Infinity || key === -Infinity) {\n        throw new RangeError(\"A list index must be positive, but you passed \" + key);\n    }\n    return key;\n}\nfunction valueAt(target, prop) {\n    const { context, objectId, path, textV2 } = target;\n    const value = context.getWithType(objectId, prop);\n    if (value === null) {\n        return;\n    }\n    const datatype = value[0];\n    const val = value[1];\n    switch (datatype) {\n        case undefined:\n            return;\n        case \"map\":\n            return mapProxy(context, val, textV2, [...path, prop]);\n        case \"list\":\n            return listProxy(context, val, textV2, [...path, prop]);\n        case \"text\":\n            if (textV2) {\n                return context.text(val);\n            }\n            else {\n                return textProxy(context, val, [\n                    ...path,\n                    prop,\n                ]);\n            }\n        case \"str\":\n            return val;\n        case \"uint\":\n            return val;\n        case \"int\":\n            return val;\n        case \"f64\":\n            return val;\n        case \"boolean\":\n            return val;\n        case \"null\":\n            return null;\n        case \"bytes\":\n            return val;\n        case \"timestamp\":\n            return val;\n        case \"counter\": {\n            const counter = getWriteableCounter(val, context, path, objectId, prop);\n            return counter;\n        }\n        default:\n            throw RangeError(`datatype ${datatype} unimplemented`);\n    }\n}\nfunction import_value(value, textV2, path) {\n    switch (typeof value) {\n        case \"object\":\n            if (value == null) {\n                return [null, \"null\"];\n            }\n            else if (value[UINT]) {\n                return [value.value, \"uint\"];\n            }\n            else if (value[INT]) {\n                return [value.value, \"int\"];\n            }\n            else if (value[F64]) {\n                return [value.value, \"f64\"];\n            }\n            else if (value[COUNTER]) {\n                return [value.value, \"counter\"];\n            }\n            else if (value instanceof Date) {\n                return [value.getTime(), \"timestamp\"];\n            }\n            else if (value instanceof RawString) {\n                return [value.toString(), \"str\"];\n            }\n            else if (value instanceof Text) {\n                return [value, \"text\"];\n            }\n            else if (value instanceof Uint8Array) {\n                return [value, \"bytes\"];\n            }\n            else if (value instanceof Array) {\n                return [value, \"list\"];\n            }\n            else if (Object.getPrototypeOf(value) === Object.getPrototypeOf({})) {\n                return [value, \"map\"];\n            }\n            else if (isSameDocument(value, context)) {\n                throw new RangeError(\"Cannot create a reference to an existing document object\");\n            }\n            else {\n                throw new RangeError(`Cannot assign unknown object: ${value}`);\n            }\n        case \"boolean\":\n            return [value, \"boolean\"];\n        case \"number\":\n            if (Number.isInteger(value)) {\n                return [value, \"int\"];\n            }\n            else {\n                return [value, \"f64\"];\n            }\n        case \"string\":\n            if (textV2) {\n                return [value, \"text\"];\n            }\n            else {\n                return [value, \"str\"];\n            }\n        default:\n            throw new RangeError(`Unsupported type ${typeof value} for path ${printPath(path)}`);\n    }\n}\n// When we assign a value to a property in a proxy we recursively walk through\n// the value we are assigning and copy it into the document. This is generally\n// desirable behaviour. However, a very common bug is to accidentally assign a\n// value which is already in the document to another key within the same\n// document, this often leads to surprising behaviour where users expected to\n// _move_ the object, but it is instead copied. To avoid this we check if the\n// value is from the same document and if it is we throw an error, this means\n// we require an explicit Object.assign call to copy the object, thus avoiding\n// the footgun\nfunction isSameDocument(val, context) {\n    var _b, _c;\n    // Date is technically an object, but immutable, so allowing people to assign\n    // a date from one place in the document to another place in the document is\n    // not likely to be a bug\n    if (val instanceof Date) {\n        return false;\n    }\n    // this depends on __wbg_ptr being the wasm pointer\n    // a new version of wasm-bindgen will break this\n    // but the tests should expose the break\n    if (val && ((_c = (_b = val[STATE]) === null || _b === void 0 ? void 0 : _b.handle) === null || _c === void 0 ? void 0 : _c.__wbg_ptr) === context.__wbg_ptr) {\n        return true;\n    }\n    return false;\n}\nconst MapHandler = {\n    get(target, key) {\n        const { context, objectId, cache } = target;\n        if (key === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (key === OBJECT_ID)\n            return objectId;\n        if (key === IS_PROXY)\n            return true;\n        if (key === TRACE)\n            return target.trace;\n        if (key === STATE)\n            return { handle: context };\n        if (!cache[key]) {\n            cache[key] = valueAt(target, key);\n        }\n        return cache[key];\n    },\n    set(target, key, val) {\n        const { context, objectId, path, textV2 } = target;\n        target.cache = {}; // reset cache on set\n        if (isSameDocument(val, context)) {\n            throw new RangeError(\"Cannot create a reference to an existing document object\");\n        }\n        if (key === TRACE) {\n            target.trace = val;\n            return true;\n        }\n        if (key === CLEAR_CACHE) {\n            return true;\n        }\n        const [value, datatype] = import_value(val, textV2, [...path, key]);\n        switch (datatype) {\n            case \"list\": {\n                const list = context.putObject(objectId, key, []);\n                const proxyList = listProxy(context, list, textV2, [...path, key]);\n                for (let i = 0; i < value.length; i++) {\n                    proxyList[i] = value[i];\n                }\n                break;\n            }\n            case \"text\": {\n                if (textV2) {\n                    assertString(value);\n                    context.putObject(objectId, key, value);\n                }\n                else {\n                    assertText(value);\n                    const text = context.putObject(objectId, key, \"\");\n                    const proxyText = textProxy(context, text, [...path, key]);\n                    proxyText.splice(0, 0, ...value);\n                }\n                break;\n            }\n            case \"map\": {\n                const map = context.putObject(objectId, key, {});\n                const proxyMap = mapProxy(context, map, textV2, [...path, key]);\n                for (const key in value) {\n                    proxyMap[key] = value[key];\n                }\n                break;\n            }\n            default:\n                context.put(objectId, key, value, datatype);\n        }\n        return true;\n    },\n    deleteProperty(target, key) {\n        const { context, objectId } = target;\n        target.cache = {}; // reset cache on delete\n        context.delete(objectId, key);\n        return true;\n    },\n    has(target, key) {\n        const value = this.get(target, key);\n        return value !== undefined;\n    },\n    getOwnPropertyDescriptor(target, key) {\n        // const { context, objectId } = target\n        const value = this.get(target, key);\n        if (typeof value !== \"undefined\") {\n            return {\n                configurable: true,\n                enumerable: true,\n                value,\n            };\n        }\n    },\n    ownKeys(target) {\n        const { context, objectId } = target;\n        // FIXME - this is a tmp workaround until fix the dupe key bug in keys()\n        const keys = context.keys(objectId);\n        return [...new Set(keys)];\n    },\n};\nconst ListHandler = {\n    get(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (index === Symbol.hasInstance) {\n            return (instance) => {\n                return Array.isArray(instance);\n            };\n        }\n        if (index === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (index === OBJECT_ID)\n            return objectId;\n        if (index === IS_PROXY)\n            return true;\n        if (index === TRACE)\n            return target.trace;\n        if (index === STATE)\n            return { handle: context };\n        if (index === \"length\")\n            return context.length(objectId);\n        if (typeof index === \"number\") {\n            return valueAt(target, index);\n        }\n        else {\n            return listMethods(target)[index];\n        }\n    },\n    set(target, index, val) {\n        const { context, objectId, path, textV2 } = target;\n        index = parseListIndex(index);\n        if (isSameDocument(val, context)) {\n            throw new RangeError(\"Cannot create a reference to an existing document object\");\n        }\n        if (index === CLEAR_CACHE) {\n            return true;\n        }\n        if (index === TRACE) {\n            target.trace = val;\n            return true;\n        }\n        if (typeof index == \"string\") {\n            throw new RangeError(\"list index must be a number\");\n        }\n        const [value, datatype] = import_value(val, textV2, [...path, index]);\n        switch (datatype) {\n            case \"list\": {\n                let list;\n                if (index >= context.length(objectId)) {\n                    list = context.insertObject(objectId, index, []);\n                }\n                else {\n                    list = context.putObject(objectId, index, []);\n                }\n                const proxyList = listProxy(context, list, textV2, [...path, index]);\n                proxyList.splice(0, 0, ...value);\n                break;\n            }\n            case \"text\": {\n                if (textV2) {\n                    assertString(value);\n                    if (index >= context.length(objectId)) {\n                        context.insertObject(objectId, index, value);\n                    }\n                    else {\n                        context.putObject(objectId, index, value);\n                    }\n                }\n                else {\n                    let text;\n                    assertText(value);\n                    if (index >= context.length(objectId)) {\n                        text = context.insertObject(objectId, index, \"\");\n                    }\n                    else {\n                        text = context.putObject(objectId, index, \"\");\n                    }\n                    const proxyText = textProxy(context, text, [...path, index]);\n                    proxyText.splice(0, 0, ...value);\n                }\n                break;\n            }\n            case \"map\": {\n                let map;\n                if (index >= context.length(objectId)) {\n                    map = context.insertObject(objectId, index, {});\n                }\n                else {\n                    map = context.putObject(objectId, index, {});\n                }\n                const proxyMap = mapProxy(context, map, textV2, [...path, index]);\n                for (const key in value) {\n                    proxyMap[key] = value[key];\n                }\n                break;\n            }\n            default:\n                if (index >= context.length(objectId)) {\n                    context.insert(objectId, index, value, datatype);\n                }\n                else {\n                    context.put(objectId, index, value, datatype);\n                }\n        }\n        return true;\n    },\n    deleteProperty(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        const elem = context.get(objectId, index);\n        if (elem != null && elem[0] == \"counter\") {\n            throw new TypeError(\"Unsupported operation: deleting a counter from a list\");\n        }\n        context.delete(objectId, index);\n        return true;\n    },\n    has(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (typeof index === \"number\") {\n            return index < context.length(objectId);\n        }\n        return index === \"length\";\n    },\n    getOwnPropertyDescriptor(target, index) {\n        const { context, objectId } = target;\n        if (index === \"length\")\n            return { writable: true, value: context.length(objectId) };\n        if (index === OBJECT_ID)\n            return { configurable: false, enumerable: false, value: objectId };\n        index = parseListIndex(index);\n        const value = valueAt(target, index);\n        return { configurable: true, enumerable: true, value };\n    },\n    getPrototypeOf(target) {\n        return Object.getPrototypeOf(target);\n    },\n    ownKeys( /*target*/) {\n        const keys = [];\n        // uncommenting this causes assert.deepEqual() to fail when comparing to a pojo array\n        // but not uncommenting it causes for (i in list) {} to not enumerate values properly\n        //const {context, objectId } = target\n        //for (let i = 0; i < target.context.length(objectId); i++) { keys.push(i.toString()) }\n        keys.push(\"length\");\n        return keys;\n    },\n};\nconst TextHandler = Object.assign({}, ListHandler, {\n    get(target, index) {\n        const { context, objectId } = target;\n        index = parseListIndex(index);\n        if (index === Symbol.hasInstance) {\n            return (instance) => {\n                return Array.isArray(instance);\n            };\n        }\n        if (index === Symbol.toStringTag) {\n            return target[Symbol.toStringTag];\n        }\n        if (index === OBJECT_ID)\n            return objectId;\n        if (index === IS_PROXY)\n            return true;\n        if (index === TRACE)\n            return target.trace;\n        if (index === STATE)\n            return { handle: context };\n        if (index === \"length\")\n            return context.length(objectId);\n        if (typeof index === \"number\") {\n            return valueAt(target, index);\n        }\n        else {\n            return textMethods(target)[index] || listMethods(target)[index];\n        }\n    },\n    getPrototypeOf( /*target*/) {\n        return Object.getPrototypeOf(new Text());\n    },\n});\nexport function mapProxy(context, objectId, textV2, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2,\n    };\n    const proxied = {};\n    Object.assign(proxied, target);\n    const result = new Proxy(proxied, MapHandler);\n    // conversion through unknown is necessary because the types are so different\n    return result;\n}\nexport function listProxy(context, objectId, textV2, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2,\n    };\n    const proxied = [];\n    Object.assign(proxied, target);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return new Proxy(proxied, ListHandler);\n}\nexport function textProxy(context, objectId, path) {\n    const target = {\n        context,\n        objectId,\n        path: path || [],\n        cache: {},\n        textV2: false,\n    };\n    const proxied = {};\n    Object.assign(proxied, target);\n    return new Proxy(proxied, TextHandler);\n}\nexport function rootProxy(context, textV2) {\n    /* eslint-disable-next-line */\n    return mapProxy(context, \"_root\", textV2, []);\n}\nfunction listMethods(target) {\n    const { context, objectId, path, textV2 } = target;\n    const methods = {\n        deleteAt(index, numDelete) {\n            if (typeof numDelete === \"number\") {\n                context.splice(objectId, index, numDelete);\n            }\n            else {\n                context.delete(objectId, index);\n            }\n            return this;\n        },\n        fill(val, start, end) {\n            const [value, datatype] = import_value(val, textV2, [...path, start]);\n            const length = context.length(objectId);\n            start = parseListIndex(start || 0);\n            end = parseListIndex(end || length);\n            for (let i = start; i < Math.min(end, length); i++) {\n                if (datatype === \"list\" || datatype === \"map\") {\n                    context.putObject(objectId, i, value);\n                }\n                else if (datatype === \"text\") {\n                    if (textV2) {\n                        assertString(value);\n                        context.putObject(objectId, i, value);\n                    }\n                    else {\n                        assertText(value);\n                        const text = context.putObject(objectId, i, \"\");\n                        const proxyText = textProxy(context, text, [...path, i]);\n                        for (let i = 0; i < value.length; i++) {\n                            proxyText[i] = value.get(i);\n                        }\n                    }\n                }\n                else {\n                    context.put(objectId, i, value, datatype);\n                }\n            }\n            return this;\n        },\n        indexOf(o, start = 0) {\n            const length = context.length(objectId);\n            for (let i = start; i < length; i++) {\n                const value = context.getWithType(objectId, i);\n                if (value && (value[1] === o[OBJECT_ID] || value[1] === o)) {\n                    return i;\n                }\n            }\n            return -1;\n        },\n        insertAt(index, ...values) {\n            this.splice(index, 0, ...values);\n            return this;\n        },\n        pop() {\n            const length = context.length(objectId);\n            if (length == 0) {\n                return undefined;\n            }\n            const last = valueAt(target, length - 1);\n            context.delete(objectId, length - 1);\n            return last;\n        },\n        push(...values) {\n            const len = context.length(objectId);\n            this.splice(len, 0, ...values);\n            return context.length(objectId);\n        },\n        shift() {\n            if (context.length(objectId) == 0)\n                return;\n            const first = valueAt(target, 0);\n            context.delete(objectId, 0);\n            return first;\n        },\n        splice(index, del, ...vals) {\n            index = parseListIndex(index);\n            // if del is undefined, delete until the end of the list\n            if (typeof del !== \"number\") {\n                del = context.length(objectId) - index;\n            }\n            del = parseListIndex(del);\n            for (const val of vals) {\n                if (isSameDocument(val, context)) {\n                    throw new RangeError(\"Cannot create a reference to an existing document object\");\n                }\n            }\n            const result = [];\n            for (let i = 0; i < del; i++) {\n                const value = valueAt(target, index);\n                if (value !== undefined) {\n                    result.push(value);\n                }\n                context.delete(objectId, index);\n            }\n            const values = vals.map((val, index) => {\n                try {\n                    return import_value(val, textV2, [...path]);\n                }\n                catch (e) {\n                    if (e instanceof RangeError) {\n                        throw new RangeError(`${e.message} at index ${index} in the input`);\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            });\n            for (const [value, datatype] of values) {\n                switch (datatype) {\n                    case \"list\": {\n                        const list = context.insertObject(objectId, index, []);\n                        const proxyList = listProxy(context, list, textV2, [...path, index]);\n                        proxyList.splice(0, 0, ...value);\n                        break;\n                    }\n                    case \"text\": {\n                        if (textV2) {\n                            assertString(value);\n                            context.insertObject(objectId, index, value);\n                        }\n                        else {\n                            const text = context.insertObject(objectId, index, \"\");\n                            const proxyText = textProxy(context, text, [...path, index]);\n                            proxyText.splice(0, 0, ...value);\n                        }\n                        break;\n                    }\n                    case \"map\": {\n                        const map = context.insertObject(objectId, index, {});\n                        const proxyMap = mapProxy(context, map, textV2, [...path, index]);\n                        for (const key in value) {\n                            proxyMap[key] = value[key];\n                        }\n                        break;\n                    }\n                    default:\n                        context.insert(objectId, index, value, datatype);\n                }\n                index += 1;\n            }\n            return result;\n        },\n        unshift(...values) {\n            this.splice(0, 0, ...values);\n            return context.length(objectId);\n        },\n        entries() {\n            let i = 0;\n            const iterator = {\n                next: () => {\n                    const value = valueAt(target, i);\n                    if (value === undefined) {\n                        return { value: undefined, done: true };\n                    }\n                    else {\n                        return { value: [i++, value], done: false };\n                    }\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        keys() {\n            let i = 0;\n            const len = context.length(objectId);\n            const iterator = {\n                next: () => {\n                    if (i < len) {\n                        return { value: i++, done: false };\n                    }\n                    return { value: undefined, done: true };\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        values() {\n            let i = 0;\n            const iterator = {\n                next: () => {\n                    const value = valueAt(target, i++);\n                    if (value === undefined) {\n                        return { value: undefined, done: true };\n                    }\n                    else {\n                        return { value, done: false };\n                    }\n                },\n                [Symbol.iterator]() {\n                    return this;\n                },\n            };\n            return iterator;\n        },\n        toArray() {\n            const list = [];\n            let value;\n            do {\n                value = valueAt(target, list.length);\n                if (value !== undefined) {\n                    list.push(value);\n                }\n            } while (value !== undefined);\n            return list;\n        },\n        map(f) {\n            return this.toArray().map(f);\n        },\n        toString() {\n            return this.toArray().toString();\n        },\n        toLocaleString() {\n            return this.toArray().toLocaleString();\n        },\n        forEach(f) {\n            return this.toArray().forEach(f);\n        },\n        // todo: real concat function is different\n        concat(other) {\n            return this.toArray().concat(other);\n        },\n        every(f) {\n            return this.toArray().every(f);\n        },\n        filter(f) {\n            return this.toArray().filter(f);\n        },\n        find(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return v;\n                }\n                index += 1;\n            }\n        },\n        findIndex(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return index;\n                }\n                index += 1;\n            }\n            return -1;\n        },\n        includes(elem) {\n            return this.find(e => e === elem) !== undefined;\n        },\n        join(sep) {\n            return this.toArray().join(sep);\n        },\n        reduce(f, initialValue) {\n            return this.toArray().reduce(f, initialValue);\n        },\n        reduceRight(f, initialValue) {\n            return this.toArray().reduceRight(f, initialValue);\n        },\n        lastIndexOf(search, fromIndex = +Infinity) {\n            // this can be faster\n            return this.toArray().lastIndexOf(search, fromIndex);\n        },\n        slice(index, num) {\n            return this.toArray().slice(index, num);\n        },\n        some(f) {\n            let index = 0;\n            for (const v of this) {\n                if (f(v, index)) {\n                    return true;\n                }\n                index += 1;\n            }\n            return false;\n        },\n        [Symbol.iterator]: function* () {\n            let i = 0;\n            let value = valueAt(target, i);\n            while (value !== undefined) {\n                yield value;\n                i += 1;\n                value = valueAt(target, i);\n            }\n        },\n    };\n    return methods;\n}\nfunction textMethods(target) {\n    const { context, objectId } = target;\n    const methods = {\n        set(index, value) {\n            return (this[index] = value);\n        },\n        get(index) {\n            return this[index];\n        },\n        toString() {\n            return context.text(objectId).replace(/ï¿¼/g, \"\");\n        },\n        toSpans() {\n            const spans = [];\n            let chars = \"\";\n            const length = context.length(objectId);\n            for (let i = 0; i < length; i++) {\n                const value = this[i];\n                if (typeof value === \"string\") {\n                    chars += value;\n                }\n                else {\n                    if (chars.length > 0) {\n                        spans.push(chars);\n                        chars = \"\";\n                    }\n                    spans.push(value);\n                }\n            }\n            if (chars.length > 0) {\n                spans.push(chars);\n            }\n            return spans;\n        },\n        toJSON() {\n            return this.toString();\n        },\n        indexOf(o, start = 0) {\n            const text = context.text(objectId);\n            return text.indexOf(o, start);\n        },\n        insertAt(index, ...values) {\n            if (values.every(v => typeof v === \"string\")) {\n                context.splice(objectId, index, 0, values.join(\"\"));\n            }\n            else {\n                listMethods(target).insertAt(index, ...values);\n            }\n        },\n    };\n    return methods;\n}\nfunction assertText(value) {\n    if (!(value instanceof Text)) {\n        throw new Error(\"value was not a Text instance\");\n    }\n}\nfunction assertString(value) {\n    if (typeof value !== \"string\") {\n        throw new Error(\"value was not a string\");\n    }\n}\nfunction printPath(path) {\n    // print the path as a json pointer\n    const jsonPointerComponents = path.map(component => {\n        // if its a number just turn it into a string\n        if (typeof component === \"number\") {\n            return component.toString();\n        }\n        else if (typeof component === \"string\") {\n            // otherwise we have to escape `/` and `~` characters\n            return component.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n        }\n    });\n    if (path.length === 0) {\n        return \"\";\n    }\n    else {\n        return \"/\" + jsonPointerComponents.join(\"/\");\n    }\n}\n","export function UseApi(api) {\n    for (const k in api) {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi,@typescript-eslint/no-explicit-any\n        ;\n        ApiHandler[k] = api[k];\n    }\n}\n/* eslint-disable */\nexport const ApiHandler = {\n    create(options) {\n        throw new RangeError(\"Automerge.use() not called\");\n    },\n    load(data, options) {\n        throw new RangeError(\"Automerge.use() not called (load)\");\n    },\n    encodeChange(change) {\n        throw new RangeError(\"Automerge.use() not called (encodeChange)\");\n    },\n    decodeChange(change) {\n        throw new RangeError(\"Automerge.use() not called (decodeChange)\");\n    },\n    initSyncState() {\n        throw new RangeError(\"Automerge.use() not called (initSyncState)\");\n    },\n    encodeSyncMessage(message) {\n        throw new RangeError(\"Automerge.use() not called (encodeSyncMessage)\");\n    },\n    decodeSyncMessage(msg) {\n        throw new RangeError(\"Automerge.use() not called (decodeSyncMessage)\");\n    },\n    encodeSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (encodeSyncState)\");\n    },\n    decodeSyncState(data) {\n        throw new RangeError(\"Automerge.use() not called (decodeSyncState)\");\n    },\n    exportSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (exportSyncState)\");\n    },\n    importSyncState(state) {\n        throw new RangeError(\"Automerge.use() not called (importSyncState)\");\n    },\n};\n/* eslint-enable */\n","import { STATE, OBJECT_ID, CLEAR_CACHE, TRACE, IS_PROXY } from \"./constants.js\";\nexport function _state(doc, checkroot = true) {\n    if (typeof doc !== \"object\") {\n        throw new RangeError(\"must be the document root\");\n    }\n    const state = Reflect.get(doc, STATE);\n    if (state === undefined ||\n        state == null ||\n        (checkroot && _obj(doc) !== \"_root\")) {\n        throw new RangeError(\"must be the document root\");\n    }\n    return state;\n}\nexport function _clear_cache(doc) {\n    Reflect.set(doc, CLEAR_CACHE, true);\n}\nexport function _trace(doc) {\n    return Reflect.get(doc, TRACE);\n}\nexport function _obj(doc) {\n    if (!(typeof doc === \"object\") || doc === null) {\n        return null;\n    }\n    return Reflect.get(doc, OBJECT_ID);\n}\nexport function _is_proxy(doc) {\n    return !!Reflect.get(doc, IS_PROXY);\n}\n","export default \"__VITE_ASSET__DG1CEUL7__\"","let wasm;\nexport function __wbg_set_wasm(val) {\n    wasm = val;\n}\n\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n    if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n        cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachedInt32Memory0;\n}\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n    if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n        cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64Memory0;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n/**\n* @param {any} options\n* @returns {Automerge}\n*/\nexport function create(options) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.create(retptr, addHeapObject(options));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Automerge.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} data\n* @param {any} options\n* @returns {Automerge}\n*/\nexport function load(data, options) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.load(retptr, addHeapObject(data), addHeapObject(options));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Automerge.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {any} change\n* @returns {Uint8Array}\n*/\nexport function encodeChange(change) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.encodeChange(retptr, addHeapObject(change));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} change\n* @returns {any}\n*/\nexport function decodeChange(change) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeChange(retptr, addHeapObject(change));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @returns {SyncState}\n*/\nexport function initSyncState() {\n    const ret = wasm.initSyncState();\n    return SyncState.__wrap(ret);\n}\n\n/**\n* @param {any} state\n* @returns {SyncState}\n*/\nexport function importSyncState(state) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.importSyncState(retptr, addHeapObject(state));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return SyncState.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {SyncState} state\n* @returns {any}\n*/\nexport function exportSyncState(state) {\n    _assertClass(state, SyncState);\n    const ret = wasm.exportSyncState(state.__wbg_ptr);\n    return takeObject(ret);\n}\n\n/**\n* @param {any} message\n* @returns {Uint8Array}\n*/\nexport function encodeSyncMessage(message) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.encodeSyncMessage(retptr, addHeapObject(message));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {Uint8Array} msg\n* @returns {any}\n*/\nexport function decodeSyncMessage(msg) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeSyncMessage(retptr, addHeapObject(msg));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return takeObject(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n* @param {SyncState} state\n* @returns {Uint8Array}\n*/\nexport function encodeSyncState(state) {\n    _assertClass(state, SyncState);\n    const ret = wasm.encodeSyncState(state.__wbg_ptr);\n    return takeObject(ret);\n}\n\n/**\n* @param {Uint8Array} data\n* @returns {SyncState}\n*/\nexport function decodeSyncState(data) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm.decodeSyncState(retptr, addHeapObject(data));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var r2 = getInt32Memory0()[retptr / 4 + 2];\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return SyncState.__wrap(r0);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\n/**\n* How text is represented in materialized objects on the JS side\n*/\nexport const TextRepresentation = Object.freeze({\n/**\n* As an array of characters and objects\n*/\nArray:0,\"0\":\"Array\",\n/**\n* As a single JS string\n*/\nString:1,\"1\":\"String\", });\n\nconst AutomergeFinalization = new FinalizationRegistry(ptr => wasm.__wbg_automerge_free(ptr >>> 0));\n/**\n*/\nexport class Automerge {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(Automerge.prototype);\n        obj.__wbg_ptr = ptr;\n        AutomergeFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        AutomergeFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_automerge_free(ptr);\n    }\n    /**\n    * @param {string | undefined} actor\n    * @param {TextRepresentation} text_rep\n    * @returns {Automerge}\n    */\n    static new(actor, text_rep) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_new(retptr, ptr0, len0, text_rep);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} [actor]\n    * @returns {Automerge}\n    */\n    clone(actor) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_clone(retptr, this.__wbg_ptr, ptr0, len0);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} actor\n    * @param {any} heads\n    * @returns {Automerge}\n    */\n    fork(actor, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(actor) ? 0 : passStringToWasm0(actor, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.automerge_fork(retptr, this.__wbg_ptr, ptr0, len0, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Automerge.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {any}\n    */\n    pendingOps() {\n        const ret = wasm.automerge_pendingOps(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {string | undefined} [message]\n    * @param {number | undefined} [time]\n    * @returns {any}\n    */\n    commit(message, time) {\n        var ptr0 = isLikeNone(message) ? 0 : passStringToWasm0(message, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.automerge_commit(this.__wbg_ptr, ptr0, len0, !isLikeNone(time), isLikeNone(time) ? 0 : time);\n        return takeObject(ret);\n    }\n    /**\n    * @param {Automerge} other\n    * @returns {Array<any>}\n    */\n    merge(other) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(other, Automerge);\n            wasm.automerge_merge(retptr, this.__wbg_ptr, other.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {number}\n    */\n    rollback() {\n        const ret = wasm.automerge_rollback(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} [heads]\n    * @returns {Array<any>}\n    */\n    keys(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_keys(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} [heads]\n    * @returns {string}\n    */\n    text(obj, heads) {\n        let deferred2_0;\n        let deferred2_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_text(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            var ptr1 = r0;\n            var len1 = r1;\n            if (r3) {\n                ptr1 = 0; len1 = 0;\n                throw takeObject(r2);\n            }\n            deferred2_0 = ptr1;\n            deferred2_1 = len1;\n            return getStringFromWasm0(ptr1, len1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred2_0, deferred2_1, 1);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} start\n    * @param {number} delete_count\n    * @param {any} text\n    */\n    splice(obj, start, delete_count, text) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_splice(retptr, this.__wbg_ptr, addHeapObject(obj), start, delete_count, addHeapObject(text));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} new_text\n    */\n    updateText(obj, new_text) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_updateText(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(new_text));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} value\n    * @param {any} datatype\n    */\n    push(obj, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_push(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} value\n    * @returns {string | undefined}\n    */\n    pushObject(obj, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_pushObject(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1, 1);\n            }\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {any} value\n    * @param {any} datatype\n    */\n    insert(obj, index, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_insert(retptr, this.__wbg_ptr, addHeapObject(obj), index, addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {any} value\n    * @returns {string | undefined}\n    */\n    insertObject(obj, index, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_insertObject(retptr, this.__wbg_ptr, addHeapObject(obj), index, addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1, 1);\n            }\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    * @param {any} datatype\n    */\n    put(obj, prop, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_put(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    * @returns {any}\n    */\n    putObject(obj, prop, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_putObject(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {any} value\n    */\n    increment(obj, prop, value) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_increment(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), addHeapObject(value));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {Array<any> | undefined} [heads]\n    * @returns {any}\n    */\n    get(obj, prop, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_get(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    * @param {Array<any> | undefined} [heads]\n    * @returns {any}\n    */\n    getWithType(obj, prop, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getWithType(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} arg\n    * @param {Array<any> | undefined} [heads]\n    * @returns {Array<any>}\n    */\n    getAll(obj, arg, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getAll(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(arg), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} enable\n    * @returns {any}\n    */\n    enableFreeze(enable) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_enableFreeze(retptr, this.__wbg_ptr, addHeapObject(enable));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} datatype\n    * @param {any} _function\n    */\n    registerDatatype(datatype, _function) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_registerDatatype(retptr, this.__wbg_ptr, addHeapObject(datatype), addHeapObject(_function));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} object\n    * @param {any} meta\n    * @returns {any}\n    */\n    applyPatches(object, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyPatches(retptr, this.__wbg_ptr, addHeapObject(object), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} object\n    * @param {any} meta\n    * @returns {any}\n    */\n    applyAndReturnPatches(object, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyAndReturnPatches(retptr, this.__wbg_ptr, addHeapObject(object), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Array<any>}\n    */\n    diffIncremental() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_diffIncremental(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    */\n    updateDiffCursor() {\n        wasm.automerge_updateDiffCursor(this.__wbg_ptr);\n    }\n    /**\n    */\n    resetDiffCursor() {\n        wasm.automerge_resetDiffCursor(this.__wbg_ptr);\n    }\n    /**\n    * @param {Array<any>} before\n    * @param {Array<any>} after\n    * @returns {Array<any>}\n    */\n    diff(before, after) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_diff(retptr, this.__wbg_ptr, addHeapObject(before), addHeapObject(after));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Array<any>} heads\n    */\n    isolate(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_isolate(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    */\n    integrate() {\n        wasm.automerge_integrate(this.__wbg_ptr);\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} [heads]\n    * @returns {number}\n    */\n    length(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_length(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} prop\n    */\n    delete(obj, prop) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_delete(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(prop));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    save() {\n        const ret = wasm.automerge_save(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveIncremental() {\n        const ret = wasm.automerge_saveIncremental(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {Array<any>} heads\n    * @returns {Uint8Array}\n    */\n    saveSince(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_saveSince(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveNoCompress() {\n        const ret = wasm.automerge_saveNoCompress(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Uint8Array}\n    */\n    saveAndVerify() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_saveAndVerify(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Uint8Array} data\n    * @returns {number}\n    */\n    loadIncremental(data) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_loadIncremental(retptr, this.__wbg_ptr, addHeapObject(data));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} changes\n    */\n    applyChanges(changes) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_applyChanges(retptr, this.__wbg_ptr, addHeapObject(changes));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} have_deps\n    * @returns {Array<any>}\n    */\n    getChanges(have_deps) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getChanges(retptr, this.__wbg_ptr, addHeapObject(have_deps));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} hash\n    * @returns {any}\n    */\n    getChangeByHash(hash) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getChangeByHash(retptr, this.__wbg_ptr, addHeapObject(hash));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {Automerge} other\n    * @returns {Array<any>}\n    */\n    getChangesAdded(other) {\n        _assertClass(other, Automerge);\n        const ret = wasm.automerge_getChangesAdded(this.__wbg_ptr, other.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Array<any>}\n    */\n    getHeads() {\n        const ret = wasm.automerge_getHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {string}\n    */\n    getActorId() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getActorId(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            deferred1_0 = r0;\n            deferred1_1 = r1;\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n    * @returns {any}\n    */\n    getLastLocalChange() {\n        const ret = wasm.automerge_getLastLocalChange(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    */\n    dump() {\n        wasm.automerge_dump(this.__wbg_ptr);\n    }\n    /**\n    * @param {Array<any> | undefined} [heads]\n    * @returns {Array<any>}\n    */\n    getMissingDeps(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getMissingDeps(retptr, this.__wbg_ptr, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {SyncState} state\n    * @param {Uint8Array} message\n    */\n    receiveSyncMessage(state, message) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(state, SyncState);\n            wasm.automerge_receiveSyncMessage(retptr, this.__wbg_ptr, state.__wbg_ptr, addHeapObject(message));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {SyncState} state\n    * @returns {any}\n    */\n    generateSyncMessage(state) {\n        _assertClass(state, SyncState);\n        const ret = wasm.automerge_generateSyncMessage(this.__wbg_ptr, state.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} meta\n    * @returns {any}\n    */\n    toJS(meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_toJS(retptr, this.__wbg_ptr, addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} heads\n    * @param {any} meta\n    * @returns {any}\n    */\n    materialize(obj, heads, meta) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_materialize(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads), addHeapObject(meta));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {Array<any> | undefined} [heads]\n    * @returns {string}\n    */\n    getCursor(obj, index, heads) {\n        let deferred2_0;\n        let deferred2_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getCursor(retptr, this.__wbg_ptr, addHeapObject(obj), index, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            var ptr1 = r0;\n            var len1 = r1;\n            if (r3) {\n                ptr1 = 0; len1 = 0;\n                throw takeObject(r2);\n            }\n            deferred2_0 = ptr1;\n            deferred2_1 = len1;\n            return getStringFromWasm0(ptr1, len1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred2_0, deferred2_1, 1);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} cursor\n    * @param {Array<any> | undefined} [heads]\n    * @returns {number}\n    */\n    getCursorPosition(obj, cursor, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_getCursorPosition(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(cursor), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getFloat64Memory0()[retptr / 8 + 0];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            if (r3) {\n                throw takeObject(r2);\n            }\n            return r0;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {string | undefined} [message]\n    * @param {number | undefined} [time]\n    * @returns {any}\n    */\n    emptyChange(message, time) {\n        var ptr0 = isLikeNone(message) ? 0 : passStringToWasm0(message, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.automerge_emptyChange(this.__wbg_ptr, ptr0, len0, !isLikeNone(time), isLikeNone(time) ? 0 : time);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} obj\n    * @param {any} range\n    * @param {any} name\n    * @param {any} value\n    * @param {any} datatype\n    */\n    mark(obj, range, name, value, datatype) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_mark(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(range), addHeapObject(name), addHeapObject(value), addHeapObject(datatype));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {any} range\n    * @param {any} name\n    */\n    unmark(obj, range, name) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_unmark(retptr, this.__wbg_ptr, addHeapObject(obj), addHeapObject(range), addHeapObject(name));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {Array<any> | undefined} [heads]\n    * @returns {any}\n    */\n    marks(obj, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_marks(retptr, this.__wbg_ptr, addHeapObject(obj), isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} obj\n    * @param {number} index\n    * @param {Array<any> | undefined} [heads]\n    * @returns {object}\n    */\n    marksAt(obj, index, heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.automerge_marksAt(retptr, this.__wbg_ptr, addHeapObject(obj), index, isLikeNone(heads) ? 0 : addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n}\n\nconst SyncStateFinalization = new FinalizationRegistry(ptr => wasm.__wbg_syncstate_free(ptr >>> 0));\n/**\n*/\nexport class SyncState {\n\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(SyncState.prototype);\n        obj.__wbg_ptr = ptr;\n        SyncStateFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        SyncStateFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_syncstate_free(ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    get sharedHeads() {\n        const ret = wasm.syncstate_sharedHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {any}\n    */\n    get lastSentHeads() {\n        const ret = wasm.syncstate_lastSentHeads(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} heads\n    */\n    set lastSentHeads(heads) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.syncstate_set_lastSentHeads(retptr, this.__wbg_ptr, addHeapObject(heads));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @param {any} hashes\n    */\n    set sentHashes(hashes) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.syncstate_set_sentHashes(retptr, this.__wbg_ptr, addHeapObject(hashes));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * @returns {SyncState}\n    */\n    clone() {\n        const ret = wasm.syncstate_clone(this.__wbg_ptr);\n        return SyncState.__wrap(ret);\n    }\n}\n\nexport function __wbindgen_string_get(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof(obj) === 'string' ? obj : undefined;\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_object_drop_ref(arg0) {\n    takeObject(arg0);\n};\n\nexport function __wbindgen_error_new(arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_object_clone_ref(arg0) {\n    const ret = getObject(arg0);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_string_new(arg0, arg1) {\n    const ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_number_new(arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_number_get(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof(obj) === 'number' ? obj : undefined;\n    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n};\n\nexport function __wbindgen_is_undefined(arg0) {\n    const ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nexport function __wbindgen_boolean_get(arg0) {\n    const v = getObject(arg0);\n    const ret = typeof(v) === 'boolean' ? (v ? 1 : 0) : 2;\n    return ret;\n};\n\nexport function __wbindgen_is_null(arg0) {\n    const ret = getObject(arg0) === null;\n    return ret;\n};\n\nexport function __wbindgen_is_function(arg0) {\n    const ret = typeof(getObject(arg0)) === 'function';\n    return ret;\n};\n\nexport function __wbindgen_is_string(arg0) {\n    const ret = typeof(getObject(arg0)) === 'string';\n    return ret;\n};\n\nexport function __wbindgen_is_object(arg0) {\n    const val = getObject(arg0);\n    const ret = typeof(val) === 'object' && val !== null;\n    return ret;\n};\n\nexport function __wbindgen_is_array(arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n};\n\nexport function __wbindgen_json_serialize(arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = JSON.stringify(obj === undefined ? null : obj);\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbg_new_abda76e883ba8a5f() {\n    const ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_stack_658279fe44541cf6(arg0, arg1) {\n    const ret = getObject(arg1).stack;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbg_error_f851667af71bcfc6(arg0, arg1) {\n    let deferred0_0;\n    let deferred0_1;\n    try {\n        deferred0_0 = arg0;\n        deferred0_1 = arg1;\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(deferred0_0, deferred0_1, 1);\n    }\n};\n\nexport function __wbindgen_jsval_loose_eq(arg0, arg1) {\n    const ret = getObject(arg0) == getObject(arg1);\n    return ret;\n};\n\nexport function __wbg_String_91fba7ded13ba54c(arg0, arg1) {\n    const ret = String(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_bigint_from_i64(arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_bigint_from_u64(arg0) {\n    const ret = BigInt.asUintN(64, arg0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_set_20cbc34131e76824(arg0, arg1, arg2) {\n    getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\n};\n\nexport function __wbg_getRandomValues_504510b5564925af() { return handleError(function (arg0, arg1) {\n    getObject(arg0).getRandomValues(getObject(arg1));\n}, arguments) };\n\nexport function __wbg_randomFillSync_a0d98aa11c81fe89() { return handleError(function (arg0, arg1) {\n    getObject(arg0).randomFillSync(takeObject(arg1));\n}, arguments) };\n\nexport function __wbg_crypto_58f13aa23ffcb166(arg0) {\n    const ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_process_5b786e71d465a513(arg0) {\n    const ret = getObject(arg0).process;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_versions_c2ab80650590b6a2(arg0) {\n    const ret = getObject(arg0).versions;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_node_523d7bd03ef69fba(arg0) {\n    const ret = getObject(arg0).node;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_msCrypto_abcb1295e768d1f2(arg0) {\n    const ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_require_2784e593a4674877() { return handleError(function () {\n    const ret = module.require;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_log_a4530b4fe289336f(arg0) {\n    console.log(getObject(arg0));\n};\n\nexport function __wbg_log_00cf3417193182f2(arg0, arg1) {\n    console.log(getObject(arg0), getObject(arg1));\n};\n\nexport function __wbg_get_f01601b5a68d10e3(arg0, arg1) {\n    const ret = getObject(arg0)[arg1 >>> 0];\n    return addHeapObject(ret);\n};\n\nexport function __wbg_length_1009b1af0c481d7b(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_new_ffc6d4d085022169() {\n    const ret = new Array();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_newnoargs_c62ea9419c21fbac(arg0, arg1) {\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_next_9b877f231f476d01(arg0) {\n    const ret = getObject(arg0).next;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_next_6529ee0cca8d57ed() { return handleError(function (arg0) {\n    const ret = getObject(arg0).next();\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_done_5fe336b092d60cf2(arg0) {\n    const ret = getObject(arg0).done;\n    return ret;\n};\n\nexport function __wbg_value_0c248a78fdc8e19f(arg0) {\n    const ret = getObject(arg0).value;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_iterator_db7ca081358d4fb2() {\n    const ret = Symbol.iterator;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_get_7b48513de5dc5ea4() { return handleError(function (arg0, arg1) {\n    const ret = Reflect.get(getObject(arg0), getObject(arg1));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_call_90c26b09837aba1c() { return handleError(function (arg0, arg1) {\n    const ret = getObject(arg0).call(getObject(arg1));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_new_9fb8d994e1c0aaac() {\n    const ret = new Object();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_length_36658cb09b6ec34a(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_set_f2740edb12e318cd(arg0, arg1, arg2) {\n    getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\n};\n\nexport function __wbg_from_71add2e723d1f1b2(arg0) {\n    const ret = Array.from(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_isArray_74fb723e24f76012(arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n};\n\nexport function __wbg_push_901f3914205d44de(arg0, arg1) {\n    const ret = getObject(arg0).push(getObject(arg1));\n    return ret;\n};\n\nexport function __wbg_unshift_5436cf2bdfb8635d(arg0, arg1) {\n    const ret = getObject(arg0).unshift(getObject(arg1));\n    return ret;\n};\n\nexport function __wbg_instanceof_ArrayBuffer_e7d53d51371448e2(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof ArrayBuffer;\n    } catch (_) {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_new_a64e3f2afc2cf2f8(arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_call_5da1969d7cd31ccd() { return handleError(function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_instanceof_Date_cfa5d171ed8093a1(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Date;\n    } catch (_) {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_getTime_9272be78826033e1(arg0) {\n    const ret = getObject(arg0).getTime();\n    return ret;\n};\n\nexport function __wbg_new_d77fabdc03b9edd6(arg0) {\n    const ret = new Date(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_instanceof_Object_702c4990f4c3db8d(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Object;\n    } catch (_) {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_assign_6fdd54658ed70520(arg0, arg1) {\n    const ret = Object.assign(getObject(arg0), getObject(arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_defineProperty_2982dad69ce66029(arg0, arg1, arg2) {\n    const ret = Object.defineProperty(getObject(arg0), getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_entries_9e2e2aa45aa5094a(arg0) {\n    const ret = Object.entries(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_freeze_3cb3d8155bb1dc4d(arg0) {\n    const ret = Object.freeze(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_keys_fb74497f0cb41c2a(arg0) {\n    const ret = Object.keys(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_values_ab825057174d69d1(arg0) {\n    const ret = Object.values(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_new_9fa4bec794556db1(arg0, arg1) {\n    const ret = new RangeError(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_apply_4d8fcf4ddc362ff9() { return handleError(function (arg0, arg1, arg2) {\n    const ret = Reflect.apply(getObject(arg0), getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_deleteProperty_8c212ef4944e69d8() { return handleError(function (arg0, arg1) {\n    const ret = Reflect.deleteProperty(getObject(arg0), getObject(arg1));\n    return ret;\n}, arguments) };\n\nexport function __wbg_ownKeys_7ac8657f7af0c859() { return handleError(function (arg0) {\n    const ret = Reflect.ownKeys(getObject(arg0));\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_set_759f75cd92b612d2() { return handleError(function (arg0, arg1, arg2) {\n    const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n    return ret;\n}, arguments) };\n\nexport function __wbg_buffer_a448f833075b71ba(arg0) {\n    const ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n};\n\nexport function __wbg_concat_48d0d62f514d0161(arg0, arg1) {\n    const ret = getObject(arg0).concat(getObject(arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_slice_be7863d04044cbc1(arg0, arg1, arg2) {\n    const ret = getObject(arg0).slice(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_for_bcf4067191afa30f(arg0, arg1) {\n    const ret = Symbol.for(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_toString_b18b2b1e8378cebc(arg0) {\n    const ret = getObject(arg0).toString();\n    return addHeapObject(ret);\n};\n\nexport function __wbg_self_f0e34d89f33b99fd() { return handleError(function () {\n    const ret = self.self;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_window_d3b084224f4774d7() { return handleError(function () {\n    const ret = window.window;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_globalThis_9caa27ff917c6860() { return handleError(function () {\n    const ret = globalThis.globalThis;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_global_35dfdd59a4da3e74() { return handleError(function () {\n    const ret = global.global;\n    return addHeapObject(ret);\n}, arguments) };\n\nexport function __wbg_newwithbyteoffsetandlength_d0482f893617af71(arg0, arg1, arg2) {\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_new_8f67e318f15d7254(arg0) {\n    const ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport function __wbg_set_2357bf09366ee480(arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n};\n\nexport function __wbg_length_1d25fa9e4ac21ce7(arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n};\n\nexport function __wbg_instanceof_Uint8Array_bced6f43aed8c1aa(arg0) {\n    let result;\n    try {\n        result = getObject(arg0) instanceof Uint8Array;\n    } catch (_) {\n        result = false;\n    }\n    const ret = result;\n    return ret;\n};\n\nexport function __wbg_newwithlength_6c2df9e2f3028c43(arg0) {\n    const ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbg_subarray_2e940e41c0f5a1d9(arg0, arg1, arg2) {\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport function __wbindgen_debug_string(arg0, arg1) {\n    const ret = debugString(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n};\n\nexport function __wbindgen_throw(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nexport function __wbindgen_memory() {\n    const ret = wasm.memory;\n    return addHeapObject(ret);\n};\n\n","\nURL = globalThis.URL\nimport __vite__wasmUrl from \"/Users/andreas/rozek/GitHub/automerge-bundle/node_modules/@automerge/automerge-repo/node_modules/@automerge/automerge-wasm/bundler/automerge_wasm_bg.wasm?url\"\nimport __vite__initWasm from \"/__vite-plugin-wasm-helper\"\n\nimport { __wbindgen_string_get as __vite__wasmImport_0_0, __wbindgen_object_drop_ref as __vite__wasmImport_0_1, __wbindgen_error_new as __vite__wasmImport_0_2, __wbindgen_object_clone_ref as __vite__wasmImport_0_3, __wbindgen_string_new as __vite__wasmImport_0_4, __wbindgen_number_new as __vite__wasmImport_0_5, __wbindgen_number_get as __vite__wasmImport_0_6, __wbindgen_is_undefined as __vite__wasmImport_0_7, __wbindgen_boolean_get as __vite__wasmImport_0_8, __wbindgen_is_null as __vite__wasmImport_0_9, __wbindgen_is_function as __vite__wasmImport_0_10, __wbindgen_is_string as __vite__wasmImport_0_11, __wbindgen_is_object as __vite__wasmImport_0_12, __wbindgen_is_array as __vite__wasmImport_0_13, __wbindgen_json_serialize as __vite__wasmImport_0_14, __wbg_new_abda76e883ba8a5f as __vite__wasmImport_0_15, __wbg_stack_658279fe44541cf6 as __vite__wasmImport_0_16, __wbg_error_f851667af71bcfc6 as __vite__wasmImport_0_17, __wbindgen_jsval_loose_eq as __vite__wasmImport_0_18, __wbg_String_91fba7ded13ba54c as __vite__wasmImport_0_19, __wbindgen_bigint_from_i64 as __vite__wasmImport_0_20, __wbindgen_bigint_from_u64 as __vite__wasmImport_0_21, __wbg_set_20cbc34131e76824 as __vite__wasmImport_0_22, __wbg_getRandomValues_504510b5564925af as __vite__wasmImport_0_23, __wbg_randomFillSync_a0d98aa11c81fe89 as __vite__wasmImport_0_24, __wbg_crypto_58f13aa23ffcb166 as __vite__wasmImport_0_25, __wbg_process_5b786e71d465a513 as __vite__wasmImport_0_26, __wbg_versions_c2ab80650590b6a2 as __vite__wasmImport_0_27, __wbg_node_523d7bd03ef69fba as __vite__wasmImport_0_28, __wbg_msCrypto_abcb1295e768d1f2 as __vite__wasmImport_0_29, __wbg_require_2784e593a4674877 as __vite__wasmImport_0_30, __wbg_log_a4530b4fe289336f as __vite__wasmImport_0_31, __wbg_log_00cf3417193182f2 as __vite__wasmImport_0_32, __wbg_get_f01601b5a68d10e3 as __vite__wasmImport_0_33, __wbg_length_1009b1af0c481d7b as __vite__wasmImport_0_34, __wbg_new_ffc6d4d085022169 as __vite__wasmImport_0_35, __wbg_newnoargs_c62ea9419c21fbac as __vite__wasmImport_0_36, __wbg_next_9b877f231f476d01 as __vite__wasmImport_0_37, __wbg_next_6529ee0cca8d57ed as __vite__wasmImport_0_38, __wbg_done_5fe336b092d60cf2 as __vite__wasmImport_0_39, __wbg_value_0c248a78fdc8e19f as __vite__wasmImport_0_40, __wbg_iterator_db7ca081358d4fb2 as __vite__wasmImport_0_41, __wbg_get_7b48513de5dc5ea4 as __vite__wasmImport_0_42, __wbg_call_90c26b09837aba1c as __vite__wasmImport_0_43, __wbg_new_9fb8d994e1c0aaac as __vite__wasmImport_0_44, __wbg_length_36658cb09b6ec34a as __vite__wasmImport_0_45, __wbg_set_f2740edb12e318cd as __vite__wasmImport_0_46, __wbg_from_71add2e723d1f1b2 as __vite__wasmImport_0_47, __wbg_isArray_74fb723e24f76012 as __vite__wasmImport_0_48, __wbg_push_901f3914205d44de as __vite__wasmImport_0_49, __wbg_unshift_5436cf2bdfb8635d as __vite__wasmImport_0_50, __wbg_instanceof_ArrayBuffer_e7d53d51371448e2 as __vite__wasmImport_0_51, __wbg_new_a64e3f2afc2cf2f8 as __vite__wasmImport_0_52, __wbg_call_5da1969d7cd31ccd as __vite__wasmImport_0_53, __wbg_instanceof_Date_cfa5d171ed8093a1 as __vite__wasmImport_0_54, __wbg_getTime_9272be78826033e1 as __vite__wasmImport_0_55, __wbg_new_d77fabdc03b9edd6 as __vite__wasmImport_0_56, __wbg_instanceof_Object_702c4990f4c3db8d as __vite__wasmImport_0_57, __wbg_assign_6fdd54658ed70520 as __vite__wasmImport_0_58, __wbg_defineProperty_2982dad69ce66029 as __vite__wasmImport_0_59, __wbg_entries_9e2e2aa45aa5094a as __vite__wasmImport_0_60, __wbg_freeze_3cb3d8155bb1dc4d as __vite__wasmImport_0_61, __wbg_keys_fb74497f0cb41c2a as __vite__wasmImport_0_62, __wbg_values_ab825057174d69d1 as __vite__wasmImport_0_63, __wbg_new_9fa4bec794556db1 as __vite__wasmImport_0_64, __wbg_apply_4d8fcf4ddc362ff9 as __vite__wasmImport_0_65, __wbg_deleteProperty_8c212ef4944e69d8 as __vite__wasmImport_0_66, __wbg_ownKeys_7ac8657f7af0c859 as __vite__wasmImport_0_67, __wbg_set_759f75cd92b612d2 as __vite__wasmImport_0_68, __wbg_buffer_a448f833075b71ba as __vite__wasmImport_0_69, __wbg_concat_48d0d62f514d0161 as __vite__wasmImport_0_70, __wbg_slice_be7863d04044cbc1 as __vite__wasmImport_0_71, __wbg_for_bcf4067191afa30f as __vite__wasmImport_0_72, __wbg_toString_b18b2b1e8378cebc as __vite__wasmImport_0_73, __wbg_self_f0e34d89f33b99fd as __vite__wasmImport_0_74, __wbg_window_d3b084224f4774d7 as __vite__wasmImport_0_75, __wbg_globalThis_9caa27ff917c6860 as __vite__wasmImport_0_76, __wbg_global_35dfdd59a4da3e74 as __vite__wasmImport_0_77, __wbg_newwithbyteoffsetandlength_d0482f893617af71 as __vite__wasmImport_0_78, __wbg_new_8f67e318f15d7254 as __vite__wasmImport_0_79, __wbg_set_2357bf09366ee480 as __vite__wasmImport_0_80, __wbg_length_1d25fa9e4ac21ce7 as __vite__wasmImport_0_81, __wbg_instanceof_Uint8Array_bced6f43aed8c1aa as __vite__wasmImport_0_82, __wbg_newwithlength_6c2df9e2f3028c43 as __vite__wasmImport_0_83, __wbg_subarray_2e940e41c0f5a1d9 as __vite__wasmImport_0_84, __wbindgen_debug_string as __vite__wasmImport_0_85, __wbindgen_throw as __vite__wasmImport_0_86, __wbindgen_memory as __vite__wasmImport_0_87 } from \"./automerge_wasm_bg.js\";\nconst __vite__wasmModule = await __vite__initWasm({ \"./automerge_wasm_bg.js\": { __wbindgen_string_get: __vite__wasmImport_0_0, __wbindgen_object_drop_ref: __vite__wasmImport_0_1, __wbindgen_error_new: __vite__wasmImport_0_2, __wbindgen_object_clone_ref: __vite__wasmImport_0_3, __wbindgen_string_new: __vite__wasmImport_0_4, __wbindgen_number_new: __vite__wasmImport_0_5, __wbindgen_number_get: __vite__wasmImport_0_6, __wbindgen_is_undefined: __vite__wasmImport_0_7, __wbindgen_boolean_get: __vite__wasmImport_0_8, __wbindgen_is_null: __vite__wasmImport_0_9, __wbindgen_is_function: __vite__wasmImport_0_10, __wbindgen_is_string: __vite__wasmImport_0_11, __wbindgen_is_object: __vite__wasmImport_0_12, __wbindgen_is_array: __vite__wasmImport_0_13, __wbindgen_json_serialize: __vite__wasmImport_0_14, __wbg_new_abda76e883ba8a5f: __vite__wasmImport_0_15, __wbg_stack_658279fe44541cf6: __vite__wasmImport_0_16, __wbg_error_f851667af71bcfc6: __vite__wasmImport_0_17, __wbindgen_jsval_loose_eq: __vite__wasmImport_0_18, __wbg_String_91fba7ded13ba54c: __vite__wasmImport_0_19, __wbindgen_bigint_from_i64: __vite__wasmImport_0_20, __wbindgen_bigint_from_u64: __vite__wasmImport_0_21, __wbg_set_20cbc34131e76824: __vite__wasmImport_0_22, __wbg_getRandomValues_504510b5564925af: __vite__wasmImport_0_23, __wbg_randomFillSync_a0d98aa11c81fe89: __vite__wasmImport_0_24, __wbg_crypto_58f13aa23ffcb166: __vite__wasmImport_0_25, __wbg_process_5b786e71d465a513: __vite__wasmImport_0_26, __wbg_versions_c2ab80650590b6a2: __vite__wasmImport_0_27, __wbg_node_523d7bd03ef69fba: __vite__wasmImport_0_28, __wbg_msCrypto_abcb1295e768d1f2: __vite__wasmImport_0_29, __wbg_require_2784e593a4674877: __vite__wasmImport_0_30, __wbg_log_a4530b4fe289336f: __vite__wasmImport_0_31, __wbg_log_00cf3417193182f2: __vite__wasmImport_0_32, __wbg_get_f01601b5a68d10e3: __vite__wasmImport_0_33, __wbg_length_1009b1af0c481d7b: __vite__wasmImport_0_34, __wbg_new_ffc6d4d085022169: __vite__wasmImport_0_35, __wbg_newnoargs_c62ea9419c21fbac: __vite__wasmImport_0_36, __wbg_next_9b877f231f476d01: __vite__wasmImport_0_37, __wbg_next_6529ee0cca8d57ed: __vite__wasmImport_0_38, __wbg_done_5fe336b092d60cf2: __vite__wasmImport_0_39, __wbg_value_0c248a78fdc8e19f: __vite__wasmImport_0_40, __wbg_iterator_db7ca081358d4fb2: __vite__wasmImport_0_41, __wbg_get_7b48513de5dc5ea4: __vite__wasmImport_0_42, __wbg_call_90c26b09837aba1c: __vite__wasmImport_0_43, __wbg_new_9fb8d994e1c0aaac: __vite__wasmImport_0_44, __wbg_length_36658cb09b6ec34a: __vite__wasmImport_0_45, __wbg_set_f2740edb12e318cd: __vite__wasmImport_0_46, __wbg_from_71add2e723d1f1b2: __vite__wasmImport_0_47, __wbg_isArray_74fb723e24f76012: __vite__wasmImport_0_48, __wbg_push_901f3914205d44de: __vite__wasmImport_0_49, __wbg_unshift_5436cf2bdfb8635d: __vite__wasmImport_0_50, __wbg_instanceof_ArrayBuffer_e7d53d51371448e2: __vite__wasmImport_0_51, __wbg_new_a64e3f2afc2cf2f8: __vite__wasmImport_0_52, __wbg_call_5da1969d7cd31ccd: __vite__wasmImport_0_53, __wbg_instanceof_Date_cfa5d171ed8093a1: __vite__wasmImport_0_54, __wbg_getTime_9272be78826033e1: __vite__wasmImport_0_55, __wbg_new_d77fabdc03b9edd6: __vite__wasmImport_0_56, __wbg_instanceof_Object_702c4990f4c3db8d: __vite__wasmImport_0_57, __wbg_assign_6fdd54658ed70520: __vite__wasmImport_0_58, __wbg_defineProperty_2982dad69ce66029: __vite__wasmImport_0_59, __wbg_entries_9e2e2aa45aa5094a: __vite__wasmImport_0_60, __wbg_freeze_3cb3d8155bb1dc4d: __vite__wasmImport_0_61, __wbg_keys_fb74497f0cb41c2a: __vite__wasmImport_0_62, __wbg_values_ab825057174d69d1: __vite__wasmImport_0_63, __wbg_new_9fa4bec794556db1: __vite__wasmImport_0_64, __wbg_apply_4d8fcf4ddc362ff9: __vite__wasmImport_0_65, __wbg_deleteProperty_8c212ef4944e69d8: __vite__wasmImport_0_66, __wbg_ownKeys_7ac8657f7af0c859: __vite__wasmImport_0_67, __wbg_set_759f75cd92b612d2: __vite__wasmImport_0_68, __wbg_buffer_a448f833075b71ba: __vite__wasmImport_0_69, __wbg_concat_48d0d62f514d0161: __vite__wasmImport_0_70, __wbg_slice_be7863d04044cbc1: __vite__wasmImport_0_71, __wbg_for_bcf4067191afa30f: __vite__wasmImport_0_72, __wbg_toString_b18b2b1e8378cebc: __vite__wasmImport_0_73, __wbg_self_f0e34d89f33b99fd: __vite__wasmImport_0_74, __wbg_window_d3b084224f4774d7: __vite__wasmImport_0_75, __wbg_globalThis_9caa27ff917c6860: __vite__wasmImport_0_76, __wbg_global_35dfdd59a4da3e74: __vite__wasmImport_0_77, __wbg_newwithbyteoffsetandlength_d0482f893617af71: __vite__wasmImport_0_78, __wbg_new_8f67e318f15d7254: __vite__wasmImport_0_79, __wbg_set_2357bf09366ee480: __vite__wasmImport_0_80, __wbg_length_1d25fa9e4ac21ce7: __vite__wasmImport_0_81, __wbg_instanceof_Uint8Array_bced6f43aed8c1aa: __vite__wasmImport_0_82, __wbg_newwithlength_6c2df9e2f3028c43: __vite__wasmImport_0_83, __wbg_subarray_2e940e41c0f5a1d9: __vite__wasmImport_0_84, __wbindgen_debug_string: __vite__wasmImport_0_85, __wbindgen_throw: __vite__wasmImport_0_86, __wbindgen_memory: __vite__wasmImport_0_87 } }, __vite__wasmUrl);\nexport const memory = __vite__wasmModule.memory;\nexport const __wbg_syncstate_free = __vite__wasmModule.__wbg_syncstate_free;\nexport const syncstate_sharedHeads = __vite__wasmModule.syncstate_sharedHeads;\nexport const syncstate_lastSentHeads = __vite__wasmModule.syncstate_lastSentHeads;\nexport const syncstate_set_lastSentHeads = __vite__wasmModule.syncstate_set_lastSentHeads;\nexport const syncstate_set_sentHashes = __vite__wasmModule.syncstate_set_sentHashes;\nexport const syncstate_clone = __vite__wasmModule.syncstate_clone;\nexport const __wbg_automerge_free = __vite__wasmModule.__wbg_automerge_free;\nexport const automerge_new = __vite__wasmModule.automerge_new;\nexport const automerge_clone = __vite__wasmModule.automerge_clone;\nexport const automerge_fork = __vite__wasmModule.automerge_fork;\nexport const automerge_pendingOps = __vite__wasmModule.automerge_pendingOps;\nexport const automerge_commit = __vite__wasmModule.automerge_commit;\nexport const automerge_merge = __vite__wasmModule.automerge_merge;\nexport const automerge_rollback = __vite__wasmModule.automerge_rollback;\nexport const automerge_keys = __vite__wasmModule.automerge_keys;\nexport const automerge_text = __vite__wasmModule.automerge_text;\nexport const automerge_splice = __vite__wasmModule.automerge_splice;\nexport const automerge_updateText = __vite__wasmModule.automerge_updateText;\nexport const automerge_push = __vite__wasmModule.automerge_push;\nexport const automerge_pushObject = __vite__wasmModule.automerge_pushObject;\nexport const automerge_insert = __vite__wasmModule.automerge_insert;\nexport const automerge_insertObject = __vite__wasmModule.automerge_insertObject;\nexport const automerge_put = __vite__wasmModule.automerge_put;\nexport const automerge_putObject = __vite__wasmModule.automerge_putObject;\nexport const automerge_increment = __vite__wasmModule.automerge_increment;\nexport const automerge_get = __vite__wasmModule.automerge_get;\nexport const automerge_getWithType = __vite__wasmModule.automerge_getWithType;\nexport const automerge_getAll = __vite__wasmModule.automerge_getAll;\nexport const automerge_enableFreeze = __vite__wasmModule.automerge_enableFreeze;\nexport const automerge_registerDatatype = __vite__wasmModule.automerge_registerDatatype;\nexport const automerge_applyPatches = __vite__wasmModule.automerge_applyPatches;\nexport const automerge_applyAndReturnPatches = __vite__wasmModule.automerge_applyAndReturnPatches;\nexport const automerge_diffIncremental = __vite__wasmModule.automerge_diffIncremental;\nexport const automerge_updateDiffCursor = __vite__wasmModule.automerge_updateDiffCursor;\nexport const automerge_resetDiffCursor = __vite__wasmModule.automerge_resetDiffCursor;\nexport const automerge_diff = __vite__wasmModule.automerge_diff;\nexport const automerge_isolate = __vite__wasmModule.automerge_isolate;\nexport const automerge_integrate = __vite__wasmModule.automerge_integrate;\nexport const automerge_length = __vite__wasmModule.automerge_length;\nexport const automerge_delete = __vite__wasmModule.automerge_delete;\nexport const automerge_save = __vite__wasmModule.automerge_save;\nexport const automerge_saveIncremental = __vite__wasmModule.automerge_saveIncremental;\nexport const automerge_saveSince = __vite__wasmModule.automerge_saveSince;\nexport const automerge_saveNoCompress = __vite__wasmModule.automerge_saveNoCompress;\nexport const automerge_saveAndVerify = __vite__wasmModule.automerge_saveAndVerify;\nexport const automerge_loadIncremental = __vite__wasmModule.automerge_loadIncremental;\nexport const automerge_applyChanges = __vite__wasmModule.automerge_applyChanges;\nexport const automerge_getChanges = __vite__wasmModule.automerge_getChanges;\nexport const automerge_getChangeByHash = __vite__wasmModule.automerge_getChangeByHash;\nexport const automerge_getChangesAdded = __vite__wasmModule.automerge_getChangesAdded;\nexport const automerge_getHeads = __vite__wasmModule.automerge_getHeads;\nexport const automerge_getActorId = __vite__wasmModule.automerge_getActorId;\nexport const automerge_getLastLocalChange = __vite__wasmModule.automerge_getLastLocalChange;\nexport const automerge_dump = __vite__wasmModule.automerge_dump;\nexport const automerge_getMissingDeps = __vite__wasmModule.automerge_getMissingDeps;\nexport const automerge_receiveSyncMessage = __vite__wasmModule.automerge_receiveSyncMessage;\nexport const automerge_generateSyncMessage = __vite__wasmModule.automerge_generateSyncMessage;\nexport const automerge_toJS = __vite__wasmModule.automerge_toJS;\nexport const automerge_materialize = __vite__wasmModule.automerge_materialize;\nexport const automerge_getCursor = __vite__wasmModule.automerge_getCursor;\nexport const automerge_getCursorPosition = __vite__wasmModule.automerge_getCursorPosition;\nexport const automerge_emptyChange = __vite__wasmModule.automerge_emptyChange;\nexport const automerge_mark = __vite__wasmModule.automerge_mark;\nexport const automerge_unmark = __vite__wasmModule.automerge_unmark;\nexport const automerge_marks = __vite__wasmModule.automerge_marks;\nexport const automerge_marksAt = __vite__wasmModule.automerge_marksAt;\nexport const create = __vite__wasmModule.create;\nexport const load = __vite__wasmModule.load;\nexport const encodeChange = __vite__wasmModule.encodeChange;\nexport const decodeChange = __vite__wasmModule.decodeChange;\nexport const initSyncState = __vite__wasmModule.initSyncState;\nexport const importSyncState = __vite__wasmModule.importSyncState;\nexport const exportSyncState = __vite__wasmModule.exportSyncState;\nexport const encodeSyncMessage = __vite__wasmModule.encodeSyncMessage;\nexport const decodeSyncMessage = __vite__wasmModule.decodeSyncMessage;\nexport const encodeSyncState = __vite__wasmModule.encodeSyncState;\nexport const decodeSyncState = __vite__wasmModule.decodeSyncState;\nexport const __wbindgen_malloc = __vite__wasmModule.__wbindgen_malloc;\nexport const __wbindgen_realloc = __vite__wasmModule.__wbindgen_realloc;\nexport const __wbindgen_add_to_stack_pointer = __vite__wasmModule.__wbindgen_add_to_stack_pointer;\nexport const __wbindgen_free = __vite__wasmModule.__wbindgen_free;\nexport const __wbindgen_exn_store = __vite__wasmModule.__wbindgen_exn_store;\n","import * as wasm from \"./automerge_wasm_bg.wasm\";\nimport { __wbg_set_wasm } from \"./automerge_wasm_bg.js\";\n__wbg_set_wasm(wasm);\nexport * from \"./automerge_wasm_bg.js\";\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/** @hidden **/\nexport { /** @hidden */ uuid } from \"./uuid.js\";\nimport { rootProxy } from \"./proxies.js\";\nimport { STATE } from \"./constants.js\";\nimport { Counter, } from \"./types.js\";\nexport { Counter, Int, Uint, Float64, } from \"./types.js\";\nimport { Text } from \"./text.js\";\nexport { Text } from \"./text.js\";\nconst SyncStateSymbol = Symbol(\"_syncstate\");\nimport { ApiHandler, UseApi } from \"./low_level.js\";\nimport { RawString } from \"./raw_string.js\";\nimport { _state, _is_proxy, _trace, _obj } from \"./internal_state.js\";\nimport { stableConflictAt } from \"./conflicts.js\";\n/**\n * Function for use in {@link change} which inserts values into a list at a given index\n * @param list\n * @param index\n * @param values\n */\nexport function insertAt(list, index, ...values) {\n    if (!_is_proxy(list)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    ;\n    list.insertAt(index, ...values);\n}\n/**\n * Function for use in {@link change} which deletes values from a list at a given index\n * @param list\n * @param index\n * @param numDelete\n */\nexport function deleteAt(list, index, numDelete) {\n    if (!_is_proxy(list)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    ;\n    list.deleteAt(index, numDelete);\n}\n/** @hidden **/\nexport function use(api) {\n    UseApi(api);\n}\nimport * as wasm from \"@automerge/automerge-wasm\";\nuse(wasm);\n/** @hidden */\nexport function getBackend(doc) {\n    return _state(doc).handle;\n}\nfunction importOpts(_actor) {\n    if (typeof _actor === \"object\") {\n        return _actor;\n    }\n    else {\n        return { actor: _actor };\n    }\n}\n/**\n * Create a new automerge document\n *\n * @typeParam T - The type of value contained in the document. This will be the\n *     type that is passed to the change closure in {@link change}\n * @param _opts - Either an actorId or an {@link InitOptions} (which may\n *     contain an actorId). If this is null the document will be initialised with a\n *     random actor ID\n */\nexport function init(_opts) {\n    const opts = importOpts(_opts);\n    const freeze = !!opts.freeze;\n    const patchCallback = opts.patchCallback;\n    const text_v1 = !(opts.enableTextV2 || false);\n    const actor = opts.actor;\n    const handle = ApiHandler.create({ actor, text_v1 });\n    handle.enableFreeze(!!opts.freeze);\n    handle.registerDatatype(\"counter\", (n) => new Counter(n));\n    const textV2 = opts.enableTextV2 || false;\n    if (textV2) {\n        handle.registerDatatype(\"str\", (n) => new RawString(n));\n    }\n    else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        handle.registerDatatype(\"text\", (n) => new Text(n));\n    }\n    const doc = handle.materialize(\"/\", undefined, {\n        handle,\n        heads: undefined,\n        freeze,\n        patchCallback,\n        textV2,\n    });\n    return doc;\n}\n/**\n * Make an immutable view of an automerge document as at `heads`\n *\n * @remarks\n * The document returned from this function cannot be passed to {@link change}.\n * This is because it shares the same underlying memory as `doc`, but it is\n * consequently a very cheap copy.\n *\n * Note that this function will throw an error if any of the hashes in `heads`\n * are not in the document.\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to create a view of\n * @param heads - The hashes of the heads to create a view at\n */\nexport function view(doc, heads) {\n    const state = _state(doc);\n    const handle = state.handle;\n    return state.handle.materialize(\"/\", heads, Object.assign(Object.assign({}, state), { handle,\n        heads }));\n}\n/**\n * Make a full writable copy of an automerge document\n *\n * @remarks\n * Unlike {@link view} this function makes a full copy of the memory backing\n * the document and can thus be passed to {@link change}. It also generates a\n * new actor ID so that changes made in the new document do not create duplicate\n * sequence numbers with respect to the old document. If you need control over\n * the actor ID which is generated you can pass the actor ID as the second\n * argument\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to clone\n * @param _opts - Either an actor ID to use for the new doc or an {@link InitOptions}\n */\nexport function clone(doc, _opts) {\n    const state = _state(doc);\n    const heads = state.heads;\n    const opts = importOpts(_opts);\n    const handle = state.handle.fork(opts.actor, heads);\n    handle.updateDiffCursor();\n    // `change` uses the presence of state.heads to determine if we are in a view\n    // set it to undefined to indicate that this is a full fat document\n    const { heads: _oldHeads } = state, stateSansHeads = __rest(state, [\"heads\"]);\n    stateSansHeads.patchCallback = opts.patchCallback;\n    return handle.applyPatches(doc, Object.assign(Object.assign({}, stateSansHeads), { handle }));\n}\n/** Explicity free the memory backing a document. Note that this is note\n * necessary in environments which support\n * [`FinalizationRegistry`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/FinalizationRegistry)\n */\nexport function free(doc) {\n    return _state(doc).handle.free();\n}\n/**\n * Create an automerge document from a POJO\n *\n * @param initialState - The initial state which will be copied into the document\n * @typeParam T - The type of the value passed to `from` _and_ the type the resulting document will contain\n * @typeParam actor - The actor ID of the resulting document, if this is null a random actor ID will be used\n *\n * @example\n * ```\n * const doc = automerge.from({\n *     tasks: [\n *         {description: \"feed dogs\", done: false}\n *     ]\n * })\n * ```\n */\nexport function from(initialState, _opts) {\n    return _change(init(_opts), \"from\", {}, d => Object.assign(d, initialState))\n        .newDoc;\n}\n/**\n * Update the contents of an automerge document\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to update\n * @param options - Either a message, an {@link ChangeOptions}, or a {@link ChangeFn}\n * @param callback - A `ChangeFn` to be used if `options` was a `string`\n *\n * Note that if the second argument is a function it will be used as the `ChangeFn` regardless of what the third argument is.\n *\n * @example A simple change\n * ```\n * let doc1 = automerge.init()\n * doc1 = automerge.change(doc1, d => {\n *     d.key = \"value\"\n * })\n * assert.equal(doc1.key, \"value\")\n * ```\n *\n * @example A change with a message\n *\n * ```\n * doc1 = automerge.change(doc1, \"add another value\", d => {\n *     d.key2 = \"value2\"\n * })\n * ```\n *\n * @example A change with a message and a timestamp\n *\n * ```\n * doc1 = automerge.change(doc1, {message: \"add another value\", time: 1640995200}, d => {\n *     d.key2 = \"value2\"\n * })\n * ```\n *\n * @example responding to a patch callback\n * ```\n * let patchedPath\n * let patchCallback = patch => {\n *    patchedPath = patch.path\n * }\n * doc1 = automerge.change(doc1, {message: \"add another value\", time: 1640995200, patchCallback}, d => {\n *     d.key2 = \"value2\"\n * })\n * assert.equal(patchedPath, [\"key2\"])\n * ```\n */\nexport function change(doc, options, callback) {\n    if (typeof options === \"function\") {\n        return _change(doc, \"change\", {}, options).newDoc;\n    }\n    else if (typeof callback === \"function\") {\n        if (typeof options === \"string\") {\n            options = { message: options };\n        }\n        return _change(doc, \"change\", options, callback).newDoc;\n    }\n    else {\n        throw RangeError(\"Invalid args for change\");\n    }\n}\n/**\n * Make a change to the document as it was at a particular point in history\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to update\n * @param scope - The heads representing the point in history to make the change\n * @param options - Either a message or a {@link ChangeOptions} for the new change\n * @param callback - A `ChangeFn` to be used if `options` was a `string`\n *\n * @remarks\n * This function is similar to {@link change} but allows you to make changes to\n * the document as if it were at a particular point in time. To understand this\n * imagine a document created with the following history:\n *\n * ```ts\n * let doc = automerge.from({..})\n * doc = automerge.change(doc, () => {...})\n *\n * const heads = automerge.getHeads(doc)\n *\n * // fork the document make a change\n * let fork = automerge.fork(doc)\n * fork = automerge.change(fork, () => {...})\n * const headsOnFork = automerge.getHeads(fork)\n *\n * // make a change on the original doc\n * doc = automerge.change(doc, () => {...})\n * const headsOnOriginal = automerge.getHeads(doc)\n *\n * // now merge the changes back to the original document\n * doc = automerge.merge(doc, fork)\n *\n * // The heads of the document will now be (headsOnFork, headsOnOriginal)\n * ```\n *\n * {@link ChangeAt} produces an equivalent history, but without having to\n * create a fork of the document. In particular the `newHeads` field of the\n * returned {@link ChangeAtResult} will be the same as `headsOnFork`.\n *\n * Why would you want this? It's typically used in conjunction with {@link diff}\n * to reconcile state which is managed concurrently with the document. For\n * example, if you have a text editor component which the user is modifying\n * and you can't send the changes to the document synchronously you might follow\n * a workflow like this:\n *\n * * On initialization save the current heads of the document in the text editor state\n * * Every time the user makes a change record the change in the text editor state\n *\n * Now from time to time reconcile the editor state and the document\n * * Load the last saved heads from the text editor state, call them `oldHeads`\n * * Apply all the unreconciled changes to the document using `changeAt(doc, oldHeads, ...)`\n * * Get the diff from the resulting document to the current document using {@link diff}\n *   passing the {@link ChangeAtResult.newHeads} as the `before` argument and the\n *   heads of the entire document as the `after` argument.\n * * Apply the diff to the text editor state\n * * Save the current heads of the document in the text editor state\n */\nexport function changeAt(doc, scope, options, callback) {\n    if (typeof options === \"function\") {\n        return _change(doc, \"changeAt\", {}, options, scope);\n    }\n    else if (typeof callback === \"function\") {\n        if (typeof options === \"string\") {\n            options = { message: options };\n        }\n        return _change(doc, \"changeAt\", options, callback, scope);\n    }\n    else {\n        throw RangeError(\"Invalid args for changeAt\");\n    }\n}\nfunction progressDocument(doc, source, heads, callback) {\n    if (heads == null) {\n        return doc;\n    }\n    const state = _state(doc);\n    const nextState = Object.assign(Object.assign({}, state), { heads: undefined });\n    const { value: nextDoc, patches } = state.handle.applyAndReturnPatches(doc, nextState);\n    if (patches.length > 0) {\n        if (callback != null) {\n            callback(patches, { before: doc, after: nextDoc, source });\n        }\n        const newState = _state(nextDoc);\n        newState.mostRecentPatch = {\n            before: _state(doc).heads,\n            after: newState.handle.getHeads(),\n            patches,\n            source,\n        };\n    }\n    state.heads = heads;\n    return nextDoc;\n}\nfunction _change(doc, source, options, callback, scope) {\n    if (typeof callback !== \"function\") {\n        throw new RangeError(\"invalid change function\");\n    }\n    const state = _state(doc);\n    if (doc === undefined || state === undefined) {\n        throw new RangeError(\"must be the document root\");\n    }\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    let heads = state.handle.getHeads();\n    if (scope && headsEqual(scope, heads)) {\n        scope = undefined;\n    }\n    if (scope) {\n        state.handle.isolate(scope);\n        heads = scope;\n    }\n    try {\n        state.heads = heads;\n        const root = rootProxy(state.handle, state.textV2);\n        callback(root);\n        if (state.handle.pendingOps() === 0) {\n            state.heads = undefined;\n            if (scope) {\n                state.handle.integrate();\n            }\n            return {\n                newDoc: doc,\n                newHeads: null,\n            };\n        }\n        else {\n            const newHead = state.handle.commit(options.message, options.time);\n            state.handle.integrate();\n            return {\n                newDoc: progressDocument(doc, source, heads, options.patchCallback || state.patchCallback),\n                newHeads: newHead != null ? [newHead] : null,\n            };\n        }\n    }\n    catch (e) {\n        state.heads = undefined;\n        state.handle.rollback();\n        throw e;\n    }\n}\n/**\n * Make a change to a document which does not modify the document\n *\n * @param doc - The doc to add the empty change to\n * @param options - Either a message or a {@link ChangeOptions} for the new change\n *\n * Why would you want to do this? One reason might be that you have merged\n * changes from some other peers and you want to generate a change which\n * depends on those merged changes so that you can sign the new change with all\n * of the merged changes as part of the new change.\n */\nexport function emptyChange(doc, options) {\n    if (options === undefined) {\n        options = {};\n    }\n    if (typeof options === \"string\") {\n        options = { message: options };\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.emptyChange(options.message, options.time);\n    return progressDocument(doc, \"emptyChange\", heads);\n}\n/**\n * Load an automerge document from a compressed document produce by {@link save}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressed document\n * @param _opts - Either an actor ID or some {@link InitOptions}, if the actor\n *                ID is null a random actor ID will be created\n *\n * Note that `load` will throw an error if passed incomplete content (for\n * example if you are receiving content over the network and don't know if you\n * have the complete document yet). If you need to handle incomplete content use\n * {@link init} followed by {@link loadIncremental}.\n */\nexport function load(data, _opts) {\n    const opts = importOpts(_opts);\n    const actor = opts.actor;\n    const patchCallback = opts.patchCallback;\n    const text_v1 = !(opts.enableTextV2 || false);\n    const unchecked = opts.unchecked || false;\n    const allowMissingDeps = opts.allowMissingChanges || false;\n    const convertRawStringsToText = opts.convertRawStringsToText || false;\n    const handle = ApiHandler.load(data, {\n        text_v1,\n        actor,\n        unchecked,\n        allowMissingDeps,\n        convertRawStringsToText,\n    });\n    handle.enableFreeze(!!opts.freeze);\n    handle.registerDatatype(\"counter\", (n) => new Counter(n));\n    const textV2 = opts.enableTextV2 || false;\n    if (textV2) {\n        handle.registerDatatype(\"str\", (n) => new RawString(n));\n    }\n    else {\n        handle.registerDatatype(\"text\", (n) => new Text(n));\n    }\n    const doc = handle.materialize(\"/\", undefined, {\n        handle,\n        heads: undefined,\n        patchCallback,\n        textV2,\n    });\n    return doc;\n}\n/**\n * Load changes produced by {@link saveIncremental}, or partial changes\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressedchanges\n * @param opts  - an {@link ApplyOptions}\n *\n * This function is useful when staying up to date with a connected peer.\n * Perhaps the other end sent you a full compresed document which you loaded\n * with {@link load} and they're sending you the result of\n * {@link getLastLocalChange} every time they make a change.\n *\n * Note that this function will succesfully load the results of {@link save} as\n * well as {@link getLastLocalChange} or any other incremental change.\n */\nexport function loadIncremental(doc, data, opts) {\n    if (!opts) {\n        opts = {};\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(doc));\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.loadIncremental(data);\n    return progressDocument(doc, \"loadIncremental\", heads, opts.patchCallback || state.patchCallback);\n}\n/**\n * Create binary save data to be appended to a save file or fed into {@link loadIncremental}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n *\n * This function is useful for incrementally saving state.  The data can be appended to a\n * automerge save file, or passed to a document replicating its state.\n *\n */\nexport function saveIncremental(doc) {\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(doc));\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    return state.handle.saveIncremental();\n}\n/**\n * Export the contents of a document to a compressed format\n *\n * @param doc - The doc to save\n *\n * The returned bytes can be passed to {@link load} or {@link loadIncremental}\n */\nexport function save(doc) {\n    return _state(doc).handle.save();\n}\n/**\n * Merge `local` into `remote`\n * @typeParam T - The type of values contained in each document\n * @param local - The document to merge changes into\n * @param remote - The document to merge changes from\n *\n * @returns - The merged document\n *\n * Often when you are merging documents you will also need to clone them. Both\n * arguments to `merge` are frozen after the call so you can no longer call\n * mutating methods (such as {@link change}) on them. The symtom of this will be\n * an error which says \"Attempting to change an out of date document\". To\n * overcome this call {@link clone} on the argument before passing it to {@link\n * merge}.\n */\nexport function merge(local, remote) {\n    const localState = _state(local);\n    if (localState.heads) {\n        throw new RangeError(\"Attempting to change an out of date document - set at: \" + _trace(local));\n    }\n    const heads = localState.handle.getHeads();\n    const remoteState = _state(remote);\n    const changes = localState.handle.getChangesAdded(remoteState.handle);\n    localState.handle.applyChanges(changes);\n    return progressDocument(local, \"merge\", heads, localState.patchCallback);\n}\n/**\n * Get the actor ID associated with the document\n */\nexport function getActorId(doc) {\n    const state = _state(doc);\n    return state.handle.getActorId();\n}\n/**\n * Get the conflicts associated with a property\n *\n * The values of properties in a map in automerge can be conflicted if there\n * are concurrent \"put\" operations to the same key. Automerge chooses one value\n * arbitrarily (but deterministically, any two nodes who have the same set of\n * changes will choose the same value) from the set of conflicting values to\n * present as the value of the key.\n *\n * Sometimes you may want to examine these conflicts, in this case you can use\n * {@link getConflicts} to get the conflicts for the key.\n *\n * @example\n * ```\n * import * as automerge from \"@automerge/automerge\"\n *\n * type Profile = {\n *     pets: Array<{name: string, type: string}>\n * }\n *\n * let doc1 = automerge.init<Profile>(\"aaaa\")\n * doc1 = automerge.change(doc1, d => {\n *     d.pets = [{name: \"Lassie\", type: \"dog\"}]\n * })\n * let doc2 = automerge.init<Profile>(\"bbbb\")\n * doc2 = automerge.merge(doc2, automerge.clone(doc1))\n *\n * doc2 = automerge.change(doc2, d => {\n *     d.pets[0].name = \"Beethoven\"\n * })\n *\n * doc1 = automerge.change(doc1, d => {\n *     d.pets[0].name = \"Babe\"\n * })\n *\n * const doc3 = automerge.merge(doc1, doc2)\n *\n * // Note that here we pass `doc3.pets`, not `doc3`\n * let conflicts = automerge.getConflicts(doc3.pets[0], \"name\")\n *\n * // The two conflicting values are the keys of the conflicts object\n * assert.deepEqual(Object.values(conflicts), [\"Babe\", Beethoven\"])\n * ```\n */\nexport function getConflicts(doc, prop) {\n    const state = _state(doc, false);\n    if (state.textV2) {\n        throw new Error(\"use unstable.getConflicts for an unstable document\");\n    }\n    const objectId = _obj(doc);\n    if (objectId != null) {\n        return stableConflictAt(state.handle, objectId, prop);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * Get the binary representation of the last change which was made to this doc\n *\n * This is most useful when staying in sync with other peers, every time you\n * make a change locally via {@link change} you immediately call {@link\n * getLastLocalChange} and send the result over the network to other peers.\n */\nexport function getLastLocalChange(doc) {\n    const state = _state(doc);\n    return state.handle.getLastLocalChange() || undefined;\n}\n/**\n * Return the object ID of an arbitrary javascript value\n *\n * This is useful to determine if something is actually an automerge document,\n * if `doc` is not an automerge document this will return null.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getObjectId(doc, prop) {\n    if (prop) {\n        const state = _state(doc, false);\n        const objectId = _obj(doc);\n        if (!state || !objectId) {\n            return null;\n        }\n        return state.handle.get(objectId, prop);\n    }\n    else {\n        return _obj(doc);\n    }\n}\n/**\n * Get the changes which are in `newState` but not in `oldState`. The returned\n * changes can be loaded in `oldState` via {@link applyChanges}.\n *\n * Note that this will crash if there are changes in `oldState` which are not in `newState`.\n */\nexport function getChanges(oldState, newState) {\n    const n = _state(newState);\n    return n.handle.getChanges(getHeads(oldState));\n}\n/**\n * Get all the changes in a document\n *\n * This is different to {@link save} because the output is an array of changes\n * which can be individually applied via {@link applyChanges}`\n *\n */\nexport function getAllChanges(doc) {\n    const state = _state(doc);\n    return state.handle.getChanges([]);\n}\n/**\n * Apply changes received from another document\n *\n * `doc` will be updated to reflect the `changes`. If there are changes which\n * we do not have dependencies for yet those will be stored in the document and\n * applied when the depended on changes arrive.\n *\n * You can use the {@link ApplyOptions} to pass a patchcallback which will be\n * informed of any changes which occur as a result of applying the changes\n *\n */\nexport function applyChanges(doc, changes, opts) {\n    const state = _state(doc);\n    if (!opts) {\n        opts = {};\n    }\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.applyChanges(changes);\n    state.heads = heads;\n    return [\n        progressDocument(doc, \"applyChanges\", heads, opts.patchCallback || state.patchCallback),\n    ];\n}\n/** @hidden */\nexport function getHistory(doc) {\n    const textV2 = _state(doc).textV2;\n    const history = getAllChanges(doc);\n    return history.map((change, index) => ({\n        get change() {\n            return decodeChange(change);\n        },\n        get snapshot() {\n            const [state] = applyChanges(init({ enableTextV2: textV2 }), history.slice(0, index + 1));\n            return state;\n        },\n    }));\n}\n/**\n * Create a set of patches representing the change from one set of heads to another\n *\n * If either of the heads are missing from the document the returned set of patches will be empty\n */\nexport function diff(doc, before, after) {\n    checkHeads(before, \"before\");\n    checkHeads(after, \"after\");\n    const state = _state(doc);\n    if (state.mostRecentPatch &&\n        equals(state.mostRecentPatch.before, before) &&\n        equals(state.mostRecentPatch.after, after)) {\n        return state.mostRecentPatch.patches;\n    }\n    return state.handle.diff(before, after);\n}\nfunction headsEqual(heads1, heads2) {\n    if (heads1.length !== heads2.length) {\n        return false;\n    }\n    for (let i = 0; i < heads1.length; i++) {\n        if (heads1[i] !== heads2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction checkHeads(heads, fieldname) {\n    if (!Array.isArray(heads)) {\n        throw new Error(`${fieldname} must be an array`);\n    }\n}\n/** @hidden */\n// FIXME : no tests\n// FIXME can we just use deep equals now?\nexport function equals(val1, val2) {\n    if (!isObject(val1) || !isObject(val2))\n        return val1 === val2;\n    const keys1 = Object.keys(val1).sort(), keys2 = Object.keys(val2).sort();\n    if (keys1.length !== keys2.length)\n        return false;\n    for (let i = 0; i < keys1.length; i++) {\n        if (keys1[i] !== keys2[i])\n            return false;\n        if (!equals(val1[keys1[i]], val2[keys2[i]]))\n            return false;\n    }\n    return true;\n}\n/**\n * encode a {@link SyncState} into binary to send over the network\n *\n * @group sync\n * */\nexport function encodeSyncState(state) {\n    const sync = ApiHandler.importSyncState(state);\n    const result = ApiHandler.encodeSyncState(sync);\n    sync.free();\n    return result;\n}\n/**\n * Decode some binary data into a {@link SyncState}\n *\n * @group sync\n */\nexport function decodeSyncState(state) {\n    const sync = ApiHandler.decodeSyncState(state);\n    const result = ApiHandler.exportSyncState(sync);\n    sync.free();\n    return result;\n}\n/**\n * Generate a sync message to send to the peer represented by `inState`\n * @param doc - The doc to generate messages about\n * @param inState - The {@link SyncState} representing the peer we are talking to\n *\n * @group sync\n *\n * @returns An array of `[newSyncState, syncMessage | null]` where\n * `newSyncState` should replace `inState` and `syncMessage` should be sent to\n * the peer if it is not null. If `syncMessage` is null then we are up to date.\n */\nexport function generateSyncMessage(doc, inState) {\n    const state = _state(doc);\n    const syncState = ApiHandler.importSyncState(inState);\n    const message = state.handle.generateSyncMessage(syncState);\n    const outState = ApiHandler.exportSyncState(syncState);\n    return [outState, message];\n}\n/**\n * Update a document and our sync state on receiving a sync message\n *\n * @group sync\n *\n * @param doc     - The doc the sync message is about\n * @param inState - The {@link SyncState} for the peer we are communicating with\n * @param message - The message which was received\n * @param opts    - Any {@link ApplyOption}s, used for passing a\n *                  {@link PatchCallback} which will be informed of any changes\n *                  in `doc` which occur because of the received sync message.\n *\n * @returns An array of `[newDoc, newSyncState, syncMessage | null]` where\n * `newDoc` is the updated state of `doc`, `newSyncState` should replace\n * `inState` and `syncMessage` should be sent to the peer if it is not null. If\n * `syncMessage` is null then we are up to date.\n */\nexport function receiveSyncMessage(doc, inState, message, opts) {\n    const syncState = ApiHandler.importSyncState(inState);\n    if (!opts) {\n        opts = {};\n    }\n    const state = _state(doc);\n    if (state.heads) {\n        throw new RangeError(\"Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.\");\n    }\n    if (_is_proxy(doc)) {\n        throw new RangeError(\"Calls to Automerge.change cannot be nested\");\n    }\n    const heads = state.handle.getHeads();\n    state.handle.receiveSyncMessage(syncState, message);\n    const outSyncState = ApiHandler.exportSyncState(syncState);\n    return [\n        progressDocument(doc, \"receiveSyncMessage\", heads, opts.patchCallback || state.patchCallback),\n        outSyncState,\n        null,\n    ];\n}\n/**\n * Create a new, blank {@link SyncState}\n *\n * When communicating with a peer for the first time use this to generate a new\n * {@link SyncState} for them\n *\n * @group sync\n */\nexport function initSyncState() {\n    return ApiHandler.exportSyncState(ApiHandler.initSyncState());\n}\n/** @hidden */\nexport function encodeChange(change) {\n    return ApiHandler.encodeChange(change);\n}\n/** @hidden */\nexport function decodeChange(data) {\n    return ApiHandler.decodeChange(data);\n}\n/** @hidden */\nexport function encodeSyncMessage(message) {\n    return ApiHandler.encodeSyncMessage(message);\n}\n/** @hidden */\nexport function decodeSyncMessage(message) {\n    return ApiHandler.decodeSyncMessage(message);\n}\n/**\n * Get any changes in `doc` which are not dependencies of `heads`\n */\nexport function getMissingDeps(doc, heads) {\n    const state = _state(doc);\n    return state.handle.getMissingDeps(heads);\n}\n/**\n * Get the hashes of the heads of this document\n */\nexport function getHeads(doc) {\n    const state = _state(doc);\n    return state.heads || state.handle.getHeads();\n}\n/** @hidden */\nexport function dump(doc) {\n    const state = _state(doc);\n    state.handle.dump();\n}\n/** @hidden */\nexport function toJS(doc) {\n    const state = _state(doc);\n    const enabled = state.handle.enableFreeze(false);\n    const result = state.handle.materialize();\n    state.handle.enableFreeze(enabled);\n    return result;\n}\nexport function isAutomerge(doc) {\n    if (typeof doc == \"object\" && doc !== null) {\n        return getObjectId(doc) === \"_root\" && !!Reflect.get(doc, STATE);\n    }\n    else {\n        return false;\n    }\n}\nfunction isObject(obj) {\n    return typeof obj === \"object\" && obj !== null;\n}\nexport function saveSince(doc, heads) {\n    const state = _state(doc);\n    const result = state.handle.saveSince(heads);\n    return result;\n}\n","/**\n * # The next API\n *\n * This module contains new features we are working on which are backwards\n * incompatible with the current API of Automerge. This module will become the\n * API of the next major version of Automerge\n *\n * ## Differences from stable\n *\n * In the stable API text objects are represented using the {@link Text} class.\n * This means you must decide up front whether your string data might need\n * concurrent merges in the future and if you change your mind you have to\n * figure out how to migrate your data. In the unstable API the `Text` class is\n * gone and all `string`s are represented using the text CRDT, allowing for\n * concurrent changes. Modifying a string is done using the {@link splice}\n * function. You can still access the old behaviour of strings which do not\n * support merging behaviour via the {@link RawString} class.\n *\n * This leads to the following differences from `stable`:\n *\n * * There is no `unstable.Text` class, all strings are text objects\n * * Reading strings in an `unstable` document is the same as reading any other\n *   javascript string\n * * To modify strings in an `unstable` document use {@link splice}\n * * The {@link AutomergeValue} type does not include the {@link Text}\n *   class but the  {@link RawString} class is included in the {@link ScalarValue}\n *   type\n *\n * ## CHANGELOG\n * * Rename this module to `next` to reflect our increased confidence in it\n *   and stability commitment to it\n * * Introduce this module to expose the new API which has no `Text` class\n *\n *\n * @module\n */\nexport { Counter, Int, Uint, Float64, } from \"./next_types.js\";\nimport { unstableConflictAt } from \"./conflicts.js\";\nexport { view, free, getHeads, change, changeAt, emptyChange, loadIncremental, saveIncremental, save, merge, getActorId, getLastLocalChange, getChanges, getAllChanges, applyChanges, getHistory, equals, encodeSyncState, decodeSyncState, generateSyncMessage, receiveSyncMessage, initSyncState, encodeChange, decodeChange, encodeSyncMessage, decodeSyncMessage, getMissingDeps, dump, toJS, isAutomerge, getObjectId, diff, insertAt, deleteAt, saveSince, } from \"./stable.js\";\nimport * as stable from \"./stable.js\";\nexport { RawString } from \"./raw_string.js\";\n/** @hidden */\nexport const getBackend = stable.getBackend;\nimport { _is_proxy, _state, _obj, _clear_cache } from \"./internal_state.js\";\n/**\n * Create a new automerge document\n *\n * @typeParam T - The type of value contained in the document. This will be the\n *     type that is passed to the change closure in {@link change}\n * @param _opts - Either an actorId or an {@link InitOptions} (which may\n *     contain an actorId). If this is null the document will be initialised with a\n *     random actor ID\n */\nexport function init(_opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.init(opts);\n}\n/**\n * Make a full writable copy of an automerge document\n *\n * @remarks\n * Unlike {@link view} this function makes a full copy of the memory backing\n * the document and can thus be passed to {@link change}. It also generates a\n * new actor ID so that changes made in the new document do not create duplicate\n * sequence numbers with respect to the old document. If you need control over\n * the actor ID which is generated you can pass the actor ID as the second\n * argument\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to clone\n * @param _opts - Either an actor ID to use for the new doc or an {@link InitOptions}\n */\nexport function clone(doc, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.clone(doc, opts);\n}\n/**\n * Create an automerge document from a POJO\n *\n * @param initialState - The initial state which will be copied into the document\n * @typeParam T - The type of the value passed to `from` _and_ the type the resulting document will contain\n * @typeParam actor - The actor ID of the resulting document, if this is null a random actor ID will be used\n *\n * @example\n * ```\n * const doc = automerge.from({\n *     tasks: [\n *         {description: \"feed dogs\", done: false}\n *     ]\n * })\n * ```\n */\nexport function from(initialState, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    return stable.from(initialState, opts);\n}\n/**\n * Load an automerge document from a compressed document produce by {@link save}\n *\n * @typeParam T - The type of the value which is contained in the document.\n *                Note that no validation is done to make sure this type is in\n *                fact the type of the contained value so be a bit careful\n * @param data  - The compressed document\n * @param _opts - Either an actor ID or some {@link InitOptions}, if the actor\n *                ID is null a random actor ID will be created\n *\n * Note that `load` will throw an error if passed incomplete content (for\n * example if you are receiving content over the network and don't know if you\n * have the complete document yet). If you need to handle incomplete content use\n * {@link init} followed by {@link loadIncremental}.\n */\nexport function load(data, _opts) {\n    const opts = importOpts(_opts);\n    opts.enableTextV2 = true;\n    if (opts.patchCallback) {\n        return stable.loadIncremental(stable.init(opts), data);\n    }\n    else {\n        return stable.load(data, opts);\n    }\n}\nfunction importOpts(_actor) {\n    if (typeof _actor === \"object\") {\n        return _actor;\n    }\n    else {\n        return { actor: _actor };\n    }\n}\nfunction cursorToIndex(state, value, index) {\n    if (typeof index == \"string\") {\n        if (/^[0-9]+@[0-9a-zA-z]+$/.test(index)) {\n            return state.handle.getCursorPosition(value, index);\n        }\n        else {\n            throw new RangeError(\"index must be a number or cursor\");\n        }\n    }\n    else {\n        return index;\n    }\n}\n/**\n * Modify a string\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to modify\n * @param path - The path to the string to modify\n * @param index - The position (as a {@link Cursor} or index) to edit.\n *   If a cursor is used then the edit happens such that the cursor will\n *   now point to the end of the newText, so you can continue to reuse\n *   the same cursor for multiple calls to splice.\n * @param del - The number of code units to delete, a positive number\n *   deletes N characters after the cursor, a negative number deletes\n *   N characters before the cursor.\n * @param newText - The string to insert (if any).\n */\nexport function splice(doc, path, index, del, newText) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for splice\");\n    }\n    _clear_cache(doc);\n    path.unshift(objectId);\n    const value = path.join(\"/\");\n    index = cursorToIndex(state, value, index);\n    try {\n        return state.handle.splice(value, index, del, newText);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot splice: ${e}`);\n    }\n}\n/**\n * Update the value of a string\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document to modify\n * @param path - The path to the string to modify\n * @param newText - The new text to update the value to\n *\n * @remarks\n * This will calculate a diff between the current value and the new value and\n * then convert that diff into calls to {@link splice}. This will produce results\n * which don't merge as well as directly capturing the user input actions, but\n * sometimes it's not possible to capture user input and this is the best you\n * can do.\n *\n * This is an experimental API and may change in the future.\n *\n * @beta\n */\nexport function updateText(doc, path, newText) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for updateText\");\n    }\n    _clear_cache(doc);\n    path.unshift(objectId);\n    const value = path.join(\"/\");\n    try {\n        return state.handle.updateText(value, newText);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot updateText: ${e}`);\n    }\n}\n/**\n * Returns a cursor for the given position in a string.\n *\n * @remarks\n * A cursor represents a relative position, \"before character X\",\n * rather than an absolute position. As the document is edited, the\n * cursor remains stable relative to its context, just as you'd expect\n * from a cursor in a concurrent text editor.\n *\n * The string representation is shareable, and so you can use this both\n * to edit the document yourself (using {@link splice}) or to share multiple\n * collaborator's current cursor positions over the network.\n *\n * @typeParam T - The type of the value contained in the document\n * @param doc - The document\n * @param path - The path to the string\n * @param index - The current index of the position of the cursor\n */\nexport function getCursor(doc, path, index) {\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for getCursor\");\n    }\n    path.unshift(objectId);\n    const value = path.join(\"/\");\n    try {\n        return state.handle.getCursor(value, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot getCursor: ${e}`);\n    }\n}\n/**\n * Returns the current index of the cursor.\n *\n * @typeParam T - The type of the value contained in the document\n *\n * @param doc - The document\n * @param path - The path to the string\n * @param index - The cursor\n */\nexport function getCursorPosition(doc, path, cursor) {\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for getCursorPosition\");\n    }\n    path.unshift(objectId);\n    const value = path.join(\"/\");\n    try {\n        return state.handle.getCursorPosition(value, cursor);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot getCursorPosition: ${e}`);\n    }\n}\nexport function mark(doc, path, range, name, value) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for mark\");\n    }\n    path.unshift(objectId);\n    const obj = path.join(\"/\");\n    try {\n        return state.handle.mark(obj, range, name, value);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot mark: ${e}`);\n    }\n}\nexport function unmark(doc, path, range, name) {\n    if (!_is_proxy(doc)) {\n        throw new RangeError(\"object cannot be modified outside of a change block\");\n    }\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for unmark\");\n    }\n    path.unshift(objectId);\n    const obj = path.join(\"/\");\n    try {\n        return state.handle.unmark(obj, range, name);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot unmark: ${e}`);\n    }\n}\nexport function marks(doc, path) {\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for marks\");\n    }\n    path.unshift(objectId);\n    const obj = path.join(\"/\");\n    try {\n        return state.handle.marks(obj);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot call marks(): ${e}`);\n    }\n}\nexport function marksAt(doc, path, index) {\n    const state = _state(doc, false);\n    const objectId = _obj(doc);\n    if (!objectId) {\n        throw new RangeError(\"invalid object for marksAt\");\n    }\n    path.unshift(objectId);\n    const obj = path.join(\"/\");\n    try {\n        return state.handle.marksAt(obj, index);\n    }\n    catch (e) {\n        throw new RangeError(`Cannot call marksAt(): ${e}`);\n    }\n}\n/**\n * Get the conflicts associated with a property\n *\n * The values of properties in a map in automerge can be conflicted if there\n * are concurrent \"put\" operations to the same key. Automerge chooses one value\n * arbitrarily (but deterministically, any two nodes who have the same set of\n * changes will choose the same value) from the set of conflicting values to\n * present as the value of the key.\n *\n * Sometimes you may want to examine these conflicts, in this case you can use\n * {@link getConflicts} to get the conflicts for the key.\n *\n * @example\n * ```\n * import * as automerge from \"@automerge/automerge\"\n *\n * type Profile = {\n *     pets: Array<{name: string, type: string}>\n * }\n *\n * let doc1 = automerge.init<Profile>(\"aaaa\")\n * doc1 = automerge.change(doc1, d => {\n *     d.pets = [{name: \"Lassie\", type: \"dog\"}]\n * })\n * let doc2 = automerge.init<Profile>(\"bbbb\")\n * doc2 = automerge.merge(doc2, automerge.clone(doc1))\n *\n * doc2 = automerge.change(doc2, d => {\n *     d.pets[0].name = \"Beethoven\"\n * })\n *\n * doc1 = automerge.change(doc1, d => {\n *     d.pets[0].name = \"Babe\"\n * })\n *\n * const doc3 = automerge.merge(doc1, doc2)\n *\n * // Note that here we pass `doc3.pets`, not `doc3`\n * let conflicts = automerge.getConflicts(doc3.pets[0], \"name\")\n *\n * // The two conflicting values are the keys of the conflicts object\n * assert.deepEqual(Object.values(conflicts), [\"Babe\", \"Beethoven\"])\n * ```\n */\nexport function getConflicts(doc, prop) {\n    const state = _state(doc, false);\n    if (!state.textV2) {\n        throw new Error(\"use getConflicts for a stable document\");\n    }\n    const objectId = _obj(doc);\n    if (objectId != null) {\n        return unstableConflictAt(state.handle, objectId, prop);\n    }\n    else {\n        return undefined;\n    }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexport { __assign, __read, __rest, __spreadArray, __values };\n","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n  ActionTypes[\"Choose\"] = \"xstate.choose\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };\n","import { ActionTypes } from './types.js';\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar choose = ActionTypes.Choose;\nvar pure = ActionTypes.Pure;\n\nexport { after, assign, cancel, choose, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };\n","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\n\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets } from './types.js';\nimport { raise, send } from './actionTypes.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  var noop = function () {};\n\n  var isObserver = typeof nextHandler === 'object';\n  var self = isObserver ? nextHandler : null;\n  return {\n    next: ((isObserver ? nextHandler.next : nextHandler) || noop).bind(self),\n    error: ((isObserver ? nextHandler.error : errorHandler) || noop).bind(self),\n    complete: ((isObserver ? nextHandler.complete : completionHandler) || noop).bind(self)\n  };\n}\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\nfunction isRaisableAction(action) {\n  return (action.type === raise || action.type === send && action.to === SpecialTargets.Internal) && typeof action.delay !== 'number';\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isRaisableAction, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };\n","import { __assign, __spreadArray, __read, __values } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { init, raise as raise$1, send as send$1, update, log as log$1, cancel as cancel$1, assign as assign$1, error as error$1, stop as stop$1, pure as pure$1, choose as choose$1 } from './actionTypes.js';\nimport * as actionTypes from './actionTypes.js';\nexport { actionTypes };\nimport { toSCXMLEvent, isString, isFunction, toEventObject, getEventType, updateContext, flatten, isArray, toArray, toGuard, evaluateGuard, warn } from './utils.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar initEvent = /*#__PURE__*/toSCXMLEvent({\n  type: init\n});\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var actionType = exec.type || action.type;\n      actionObject = __assign(__assign(__assign({}, exec), action), {\n        type: actionType\n      });\n    } else {\n      actionObject = action;\n    }\n  }\n\n  return actionObject;\n}\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\nfunction raise(event, options) {\n  return {\n    type: raise$1,\n    event: typeof event === 'function' ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options === null || options === void 0 ? void 0 : options.id\n  };\n}\nfunction resolveRaise(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  };\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  return __assign(__assign({}, action), {\n    type: raise$1,\n    _event: resolvedEvent,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @deprecated Use the `sendTo(...)` action creator instead.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    // TODO: don't auto-generate IDs here like that\n    // there is too big chance of the ID collision\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an event to an actor.\r\n *\r\n * @param actor The `ActorRef` to send the event to.\r\n * @param event The event to send, or an expression that evaluates to the event to send\r\n * @param options Send action options\r\n * @returns An XState send action object\r\n */\n\nfunction sendTo(actor, event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: actor\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param actorRef The activity to stop.\r\n */\n\nfunction stop(actorRef) {\n  var activity = isFunction(actorRef) ? actorRef : toActivityDefinition(actorRef);\n  return {\n    type: ActionTypes.Stop,\n    activity: activity,\n    exec: undefined\n  };\n}\nfunction resolveStop(action, context, _event) {\n  var actorRefOrString = isFunction(action.activity) ? action.activity(context, _event.data) : action.activity;\n  var resolvedActorRef = typeof actorRefOrString === 'string' ? {\n    id: actorRefOrString\n  } : actorRefOrString;\n  var actionObject = {\n    type: ActionTypes.Stop,\n    activity: resolvedActorRef\n  };\n  return actionObject;\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\nfunction isActionObject(action) {\n  return typeof action === 'object' && 'type' in action;\n}\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\".concat(id) : '';\n  return \"\".concat(ActionTypes.After, \"(\").concat(delayRef, \")\").concat(idSuffix);\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\nfunction done(id, data) {\n  var type = \"\".concat(ActionTypes.DoneState, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\nfunction doneInvoke(id, data) {\n  var type = \"\".concat(ActionTypes.DoneInvoke, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction error(id, data) {\n  var type = \"\".concat(ActionTypes.ErrorPlatform, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction pure(getActions) {\n  return {\n    type: ActionTypes.Pure,\n    get: getActions\n  };\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction forwardTo(target, options) {\n  if (!IS_PRODUCTION && (!target || typeof target === 'function')) {\n    var originalTarget_1 = target;\n\n    target = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var resolvedTarget = typeof originalTarget_1 === 'function' ? originalTarget_1.apply(void 0, __spreadArray([], __read(args), false)) : originalTarget_1;\n\n      if (!resolvedTarget) {\n        throw new Error(\"Attempted to forward event to undefined actor. This risks an infinite loop in the sender.\");\n      }\n\n      return resolvedTarget;\n    };\n  }\n\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\nfunction choose(conds) {\n  return {\n    type: ActionTypes.Choose,\n    conds: conds\n  };\n}\n\nvar pluckAssigns = function (actionBlocks) {\n  var e_1, _a;\n\n  var assignActions = [];\n\n  try {\n    for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n      var block = actionBlocks_1_1.value;\n      var i = 0;\n\n      while (i < block.actions.length) {\n        if (block.actions[i].type === assign$1) {\n          assignActions.push(block.actions[i]);\n          block.actions.splice(i, 1);\n          continue;\n        }\n\n        i++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return assignActions;\n};\n\nfunction resolveActions(machine, currentState, currentContext, _event, actionBlocks, predictableExec, preserveActionOrder) {\n  if (preserveActionOrder === void 0) {\n    preserveActionOrder = false;\n  }\n\n  var assignActions = preserveActionOrder ? [] : pluckAssigns(actionBlocks);\n  var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n  var preservedContexts = preserveActionOrder ? [currentContext] : undefined;\n  var deferredToBlockEnd = [];\n\n  function handleAction(blockType, actionObject) {\n    var _a;\n\n    switch (actionObject.type) {\n      case raise$1:\n        {\n          var raisedAction = resolveRaise(actionObject, updatedContext, _event, machine.options.delays);\n\n          if (predictableExec && typeof raisedAction.delay === 'number') {\n            predictableExec(raisedAction, updatedContext, _event);\n          }\n\n          return raisedAction;\n        }\n\n      case send$1:\n        var sendAction = resolveSend(actionObject, updatedContext, _event, machine.options.delays); // TODO: fix ActionTypes.Init\n\n        if (!IS_PRODUCTION) {\n          var configuredDelay = actionObject.delay; // warn after resolving as we can create better contextual message here\n\n          warn(!isString(configuredDelay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n          \"No delay reference for delay expression '\".concat(configuredDelay, \"' was found on machine '\").concat(machine.id, \"'\"));\n        }\n\n        if (predictableExec && sendAction.to !== SpecialTargets.Internal) {\n          if (blockType === 'entry') {\n            deferredToBlockEnd.push(sendAction);\n          } else {\n            predictableExec(sendAction, updatedContext, _event);\n          }\n        }\n\n        return sendAction;\n\n      case log$1:\n        {\n          var resolved = resolveLog(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, updatedContext, _event);\n          return resolved;\n        }\n\n      case choose$1:\n        {\n          var chooseAction = actionObject;\n          var matchedActions = (_a = chooseAction.conds.find(function (condition) {\n            var guard = toGuard(condition.cond, machine.options.guards);\n            return !guard || evaluateGuard(machine, guard, updatedContext, _event, !predictableExec ? currentState : undefined);\n          })) === null || _a === void 0 ? void 0 : _a.actions;\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _b = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromChoose = _b[0],\n              resolvedContextFromChoose = _b[1];\n\n          updatedContext = resolvedContextFromChoose;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromChoose;\n        }\n\n      case pure$1:\n        {\n          var matchedActions = actionObject.get(updatedContext, _event.data);\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _c = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromPure = _c[0],\n              resolvedContext = _c[1];\n\n          updatedContext = resolvedContext;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromPure;\n        }\n\n      case stop$1:\n        {\n          var resolved = resolveStop(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, currentContext, _event);\n          return resolved;\n        }\n\n      case assign$1:\n        {\n          updatedContext = updateContext(updatedContext, _event, [actionObject], !predictableExec ? currentState : undefined);\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          break;\n        }\n\n      default:\n        var resolvedActionObject = toActionObject(actionObject, machine.options.actions);\n        var exec_1 = resolvedActionObject.exec;\n\n        if (predictableExec) {\n          predictableExec(resolvedActionObject, updatedContext, _event);\n        } else if (exec_1 && preservedContexts) {\n          var contextIndex_1 = preservedContexts.length - 1;\n\n          var wrapped = __assign(__assign({}, resolvedActionObject), {\n            exec: function (_ctx) {\n              var args = [];\n\n              for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n              }\n\n              exec_1.apply(void 0, __spreadArray([preservedContexts[contextIndex_1]], __read(args), false));\n            }\n          });\n\n          resolvedActionObject = wrapped;\n        }\n\n        return resolvedActionObject;\n    }\n  }\n\n  function processBlock(block) {\n    var e_2, _a;\n\n    var resolvedActions = [];\n\n    try {\n      for (var _b = __values(block.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        var resolved = handleAction(block.type, action);\n\n        if (resolved) {\n          resolvedActions = resolvedActions.concat(resolved);\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    deferredToBlockEnd.forEach(function (action) {\n      predictableExec(action, updatedContext, _event);\n    });\n    deferredToBlockEnd.length = 0;\n    return resolvedActions;\n  }\n\n  var resolvedActions = flatten(actionBlocks.map(processBlock));\n  return [resolvedActions, updatedContext];\n}\n\nexport { after, assign, cancel, choose, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, isActionObject, log, pure, raise, resolveActions, resolveLog, resolveRaise, resolveSend, resolveStop, respond, send, sendParent, sendTo, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };\n","/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n */\nvar serviceStack = [];\nvar provide = function (service, fn) {\n  serviceStack.push(service);\n  var result = fn(service);\n  serviceStack.pop();\n  return result;\n};\nvar consume = function (fn) {\n  return fn(serviceStack[serviceStack.length - 1]);\n};\n\nexport { consume, provide };\n","import { __assign } from './_virtual/_tslib.js';\nimport { symbolObservable, toInvokeSource, mapContext, isMachine } from './utils.js';\nimport { provide } from './serviceScope.js';\n\nfunction createNullActor(id) {\n  var _a;\n\n  return _a = {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    getSnapshot: function () {\n      return undefined;\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a;\n}\n/**\r\n * Creates a deferred actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\nfunction createInvocableActor(invokeDefinition, machine, context, _event) {\n  var _a;\n\n  var invokeSrc = toInvokeSource(invokeDefinition.src);\n  var serviceCreator = (_a = machine === null || machine === void 0 ? void 0 : machine.options.services) === null || _a === void 0 ? void 0 : _a[invokeSrc.type];\n  var resolvedData = invokeDefinition.data ? mapContext(invokeDefinition.data, context, _event) : undefined;\n  var tempActor = serviceCreator ? createDeferredActor(serviceCreator, invokeDefinition.id, resolvedData) : createNullActor(invokeDefinition.id); // @ts-ignore\n\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\nfunction createDeferredActor(entity, id, data) {\n  var tempActor = createNullActor(id); // @ts-ignore\n\n  tempActor.deferred = true;\n\n  if (isMachine(entity)) {\n    // \"mute\" the existing service scope so potential spawned actors within the `.initialState` stay deferred here\n    var initialState_1 = tempActor.state = provide(undefined, function () {\n      return (data ? entity.withContext(data) : entity).initialState;\n    });\n\n    tempActor.getSnapshot = function () {\n      return initialState_1;\n    };\n  }\n\n  return tempActor;\n}\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\nfunction isSpawnedActor(item) {\n  return isActor(item) && 'id' in item;\n} // TODO: refactor the return type, this could be written in a better way but it's best to avoid unneccessary breaking changes now\n\nfunction toActorRef(actorRefLike) {\n  var _a;\n\n  return __assign((_a = {\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    id: 'anonymous',\n    getSnapshot: function () {\n      return undefined;\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a), actorRefLike);\n}\n\nexport { createDeferredActor, createInvocableActor, createNullActor, isActor, isSpawnedActor, toActorRef };\n","import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\nfunction getAllChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\nfunction getChildren(stateNode) {\n  return getAllChildren(stateNode).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllChildren, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };\n","import { __assign, __spreadArray, __read, __rest } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, warn } from './utils.js';\nimport { getMeta, nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = Object.keys(a);\n  var bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\nfunction isStateConfig(state) {\n  if (typeof state !== 'object' || state === null) {\n    return false;\n  }\n\n  return 'value' in state && '_event' in state;\n}\n/**\r\n * @deprecated Use `isStateConfig(object)` or `state instanceof State` instead.\r\n */\n\nvar isState = isStateConfig;\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    var _a;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = getMeta(config.configuration);\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    this.tags = (_a = Array.isArray(config.tags) ? new Set(config.tags) : config.tags) !== null && _a !== void 0 ? _a : new Set();\n    this.machine = config.machine;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = Object.keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spreadArray([], __read(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })), false));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this;\n        _a.configuration;\n        _a.transitions;\n        var tags = _a.tags;\n        _a.machine;\n        var jsonValues = __rest(_a, [\"configuration\", \"transitions\", \"tags\", \"machine\"]);\n\n    return __assign(__assign({}, jsonValues), {\n      tags: Array.from(tags)\n    });\n  };\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n  /**\r\n   * Whether the current state configuration has a state node with the specified `tag`.\r\n   * @param tag\r\n   */\n\n\n  State.prototype.hasTag = function (tag) {\n    return this.tags.has(tag);\n  };\n  /**\r\n   * Determines whether sending the `event` will cause a non-forbidden transition\r\n   * to be selected, even if the transitions have no actions nor\r\n   * change the state value.\r\n   *\r\n   * @param event The event to test\r\n   * @returns Whether the event will cause a transition\r\n   */\n\n\n  State.prototype.can = function (event) {\n    var _a;\n\n    if (IS_PRODUCTION) {\n      warn(!!this.machine, \"state.can(...) used outside of a machine-created State object; this will always return false.\");\n    }\n\n    var transitionData = (_a = this.machine) === null || _a === void 0 ? void 0 : _a.getTransitionData(this, event);\n    return !!(transitionData === null || transitionData === void 0 ? void 0 : transitionData.transitions.length) && // Check that at least one transition is not forbidden\n    transitionData.transitions.some(function (t) {\n      return t.target !== undefined || t.actions.length;\n    });\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, isStateConfig, stateValuesEqual };\n","import { __assign } from './_virtual/_tslib.js';\n\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };\n","var children = /*#__PURE__*/new Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\".concat(sessionIdIndex++);\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\n\nexport { registry };\n","import { IS_PRODUCTION } from './environment.js';\n\nfunction getGlobal() {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  if (!IS_PRODUCTION) {\n    console.warn('XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues');\n  }\n}\n\nfunction getDevTools() {\n  var global = getGlobal();\n\n  if (global && '__xstate__' in global) {\n    return global.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (!getGlobal()) {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { getGlobal, registerService };\n","import { error, doneInvoke } from './actions.js';\nimport { toActorRef } from './Actor.js';\nimport { toObserver } from './utils.js';\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function (state, event, _a) {\n      var parent = _a.parent,\n          id = _a.id,\n          observers = _a.observers;\n\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function (_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n\n  var flush = function () {\n    if (flushing) {\n      return;\n    }\n\n    flushing = true;\n\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n\n    flushing = false;\n  };\n\n  var actor = toActorRef({\n    id: options.id,\n    send: function (event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function () {\n      return state;\n    },\n    subscribe: function (next, handleError, complete) {\n      var observer = toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function () {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\n\nexport { fromPromise, fromReducer, spawnBehavior };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { isStateConfig, State, bindActionToState } from './State.js';\nimport { errorPlatform, update, error as error$1, log, stop, start, cancel, send, raise } from './actionTypes.js';\nimport { initEvent, doneInvoke, toActionObjects, resolveActions, error, getActionFunction } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, toObserver, isFunction, toSCXMLEvent, flatten, isRaisableAction, isPromiseLike, isObservable, isMachine, isBehavior, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, isActor, toInvokeSource, uniqueId } from './utils.js';\nimport { Scheduler } from './scheduler.js';\nimport { createDeferredActor, isSpawnedActor } from './Actor.js';\nimport { registry } from './registry.js';\nimport { getGlobal, registerService } from './devTools.js';\nimport { provide, consume } from './serviceScope.js';\nimport { spawnBehavior } from './behaviors.js';\n\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    var _this = this;\n\n    this.machine = machine;\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this.status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    this._outgoingQueue = [];\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this.status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\".concat(_event.name, \"\\\" was sent to stopped service \\\"\").concat(_this.machine.id, \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \").concat(JSON.stringify(_event.data)));\n        }\n\n        return _this.state;\n      }\n\n      if (_this.status !== InterpreterStatus.Running && !_this.options.deferEvents) {\n        throw new Error(\"Event \\\"\".concat(_event.name, \"\\\" was sent to uninitialized service \\\"\").concat(_this.machine.id // tslint:disable-next-line:max-line-length\n        , \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \").concat(JSON.stringify(_event.data)));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this._nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to, immediate) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isString(to) ? to === SpecialTargets.Internal ? _this : _this.children.get(to) || registry.get(to) : isActor(to) ? to : undefined;\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\".concat(to, \"' from service '\").concat(_this.id, \"'.\"));\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\".concat(_this.id, \"' has no parent: unable to send event \").concat(event.type));\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // perhaps those events should be rejected in the parent\n        // but atm it doesn't have easy access to all of the information that is required to do it reliably\n        if (_this.status !== InterpreterStatus.Stopped || _this.parent !== target || // we need to send events to the parent from exit handlers of a machine that reached its final state\n        _this.state.done) {\n          // Send SCXML events to machines\n          var scxmlEvent = __assign(__assign({}, event), {\n            name: event.name === error$1 ? \"\".concat(error(_this.id)) : event.name,\n            origin: _this.sessionId\n          });\n\n          if (!immediate && _this.machine.config.predictableActionArguments) {\n            _this._outgoingQueue.push([target, scxmlEvent]);\n          } else {\n            target.send(scxmlEvent);\n          }\n        }\n      } else {\n        // Send normal events to other targets\n        if (!immediate && _this.machine.config.predictableActionArguments) {\n          _this._outgoingQueue.push([target, event.data]);\n        } else {\n          target.send(event.data);\n        }\n      }\n    };\n\n    this._exec = function (action, context, _event, actionFunctionMap) {\n      if (actionFunctionMap === void 0) {\n        actionFunctionMap = _this.machine.options.actions;\n      }\n\n      var actionOrExec = action.exec || getActionFunction(action.type, actionFunctionMap);\n      var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n      if (exec) {\n        try {\n          return exec(context, _event.data, !_this.machine.config.predictableActionArguments ? {\n            action: action,\n            state: _this.state,\n            _event: _event\n          } : {\n            action: action,\n            _event: _event\n          });\n        } catch (err) {\n          if (_this.parent) {\n            _this.parent.send({\n              type: 'xstate.error',\n              data: err\n            });\n          }\n\n          throw err;\n        }\n      }\n\n      switch (action.type) {\n        case raise:\n          {\n            // if raise action reached the interpreter then it's a delayed one\n            var sendAction_1 = action;\n\n            _this.defer(sendAction_1);\n\n            break;\n          }\n\n        case send:\n          var sendAction = action;\n\n          if (typeof sendAction.delay === 'number') {\n            _this.defer(sendAction);\n\n            return;\n          } else {\n            if (sendAction.to) {\n              _this.sendTo(sendAction._event, sendAction.to, _event === initEvent);\n            } else {\n              _this.send(sendAction._event);\n            }\n          }\n\n          break;\n\n        case cancel:\n          _this.cancel(action.sendId);\n\n          break;\n\n        case start:\n          {\n            if (_this.status !== InterpreterStatus.Running) {\n              return;\n            }\n\n            var activity = action.activity; // If the activity will be stopped right after it's started\n            // (such as in transient states)\n            // don't bother starting the activity.\n\n            if ( // in v4 with `predictableActionArguments` invokes are called eagerly when the `this.state` still points to the previous state\n            !_this.machine.config.predictableActionArguments && !_this.state.activities[activity.id || activity.type]) {\n              break;\n            } // Invoked services\n\n\n            if (activity.type === ActionTypes.Invoke) {\n              var invokeSource = toInvokeSource(activity.src);\n              var serviceCreator = _this.machine.options.services ? _this.machine.options.services[invokeSource.type] : undefined;\n              var id = activity.id,\n                  data = activity.data;\n\n              if (!IS_PRODUCTION) {\n                warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n                \"`forward` property is deprecated (found in invocation of '\".concat(activity.src, \"' in in machine '\").concat(_this.machine.id, \"'). \") + \"Please use `autoForward` instead.\");\n              }\n\n              var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n              if (!serviceCreator) {\n                // tslint:disable-next-line:no-console\n                if (!IS_PRODUCTION) {\n                  warn(false, \"No service found for invocation '\".concat(activity.src, \"' in machine '\").concat(_this.machine.id, \"'.\"));\n                }\n\n                return;\n              }\n\n              var resolvedData = data ? mapContext(data, context, _event) : undefined;\n\n              if (typeof serviceCreator === 'string') {\n                // TODO: warn\n                return;\n              }\n\n              var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data, {\n                data: resolvedData,\n                src: invokeSource,\n                meta: activity.meta\n              }) : serviceCreator;\n\n              if (!source) {\n                // TODO: warn?\n                return;\n              }\n\n              var options = void 0;\n\n              if (isMachine(source)) {\n                source = resolvedData ? source.withContext(resolvedData) : source;\n                options = {\n                  autoForward: autoForward\n                };\n              }\n\n              _this.spawn(source, id, options);\n            } else {\n              _this.spawnActivity(activity);\n            }\n\n            break;\n          }\n\n        case stop:\n          {\n            _this.stopChild(action.activity.id);\n\n            break;\n          }\n\n        case log:\n          var _a = action,\n              label = _a.label,\n              value = _a.value;\n\n          if (label) {\n            _this.logger(label, value);\n          } else {\n            _this.logger(value);\n          }\n\n          break;\n\n        default:\n          if (!IS_PRODUCTION) {\n            warn(false, \"No implementation found for action type '\".concat(action.type, \"'\"));\n          }\n\n          break;\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return provide(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    /**\r\n     * @deprecated Use `.getSnapshot()` instead.\r\n     */\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this.status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\".concat(this.id, \"'. Make sure the service is started first.\"));\n      }\n\n      return this._state;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if ((!this.machine.config.predictableActionArguments || // this is currently required to execute initial actions as the `initialState` gets cached\n    // we can't just recompute it (and execute actions while doing so) because we try to preserve identity of actors created within initial assigns\n    _event === initEvent) && this.options.execute) {\n      this.execute(this.state);\n    } else {\n      var item = void 0;\n\n      while (item = this._outgoingQueue.shift()) {\n        item[0].send(item[1]);\n      }\n    } // Update children\n\n\n    this.children.forEach(function (child) {\n      _this.state.children[child.id] = child;\n    }); // Dev tools\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (this.state.done) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.doneData ? mapContext(finalChildStateNode.doneData, state.context, _event) : undefined;\n      this._doneEvent = doneInvoke(this.id, doneData);\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(this._doneEvent);\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this._stop();\n\n      this._stopChildren();\n\n      registry.free(this.sessionId);\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, _, // TODO: error listener\n  completeListener) {\n    var _this = this;\n\n    var observer = toObserver(nextListenerOrObserver, _, completeListener);\n    this.listeners.add(observer.next); // Send current state to listener\n\n    if (this.status !== InterpreterStatus.NotStarted) {\n      observer.next(this.state);\n    }\n\n    var completeOnce = function () {\n      _this.doneListeners.delete(completeOnce);\n\n      _this.stopListeners.delete(completeOnce);\n\n      observer.complete();\n    };\n\n    if (this.status === InterpreterStatus.Stopped) {\n      observer.complete();\n    } else {\n      this.onDone(completeOnce);\n      this.onStop(completeOnce);\n    }\n\n    return {\n      unsubscribe: function () {\n        _this.listeners.delete(observer.next);\n\n        _this.doneListeners.delete(completeOnce);\n\n        _this.stopListeners.delete(completeOnce);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    if (this.status === InterpreterStatus.Stopped && this._doneEvent) {\n      listener(this._doneEvent);\n    } else {\n      this.doneListeners.add(listener);\n    }\n\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    } // yes, it's a hack but we need the related cache to be populated for some things to work (like delayed transitions)\n    // this is usually called by `machine.getInitialState` but if we rehydrate from a state we might bypass this call\n    // we also don't want to call this method here as it resolves the full initial state which might involve calling assign actions\n    // and that could potentially lead to some unwanted side-effects (even such as creating some rogue actors)\n\n\n    this.machine._init();\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this.status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : provide(this, function () {\n      return isStateConfig(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n\n  Interpreter.prototype._stopChildren = function () {\n    // TODO: think about converting those to actions\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n    this.children.clear();\n  };\n\n  Interpreter.prototype._stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    if (!this.initialized) {\n      // Interpreter already stopped; do nothing\n      return this;\n    }\n\n    this.initialized = false;\n    this.status = InterpreterStatus.Stopped;\n    this._initialState = undefined;\n\n    try {\n      // we are going to stop within the current sync frame\n      // so we can safely just cancel this here as nothing async should be fired anyway\n      for (var _p = __values(Object.keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    } // clear everything that might be enqueued\n\n\n    this.scheduler.clear();\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    // TODO: add warning for stopping non-root interpreters\n    var _this = this; // grab the current scheduler as it will be replaced in _stop\n\n\n    var scheduler = this.scheduler;\n\n    this._stop(); // let what is currently processed to be finished\n\n\n    scheduler.schedule(function () {\n      var _a;\n\n      if ((_a = _this._state) === null || _a === void 0 ? void 0 : _a.done) {\n        return;\n      } // it feels weird to handle this here but we need to handle this even slightly \"out of band\"\n\n\n      var _event = toSCXMLEvent({\n        type: 'xstate.stop'\n      });\n\n      var nextState = provide(_this, function () {\n        var exitActions = flatten(__spreadArray([], __read(_this.state.configuration), false).sort(function (a, b) {\n          return b.order - a.order;\n        }).map(function (stateNode) {\n          return toActionObjects(stateNode.onExit, _this.machine.options.actions);\n        }));\n\n        var _a = __read(resolveActions(_this.machine, _this.state, _this.state.context, _event, [{\n          type: 'exit',\n          actions: exitActions\n        }], _this.machine.config.predictableActionArguments ? _this._exec : undefined, _this.machine.config.predictableActionArguments || _this.machine.config.preserveActionOrder), 2),\n            resolvedActions = _a[0],\n            updatedContext = _a[1];\n\n        var newState = new State({\n          value: _this.state.value,\n          context: updatedContext,\n          _event: _event,\n          _sessionid: _this.sessionId,\n          historyValue: undefined,\n          history: _this.state,\n          actions: resolvedActions.filter(function (action) {\n            return !isRaisableAction(action);\n          }),\n          activities: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {},\n          done: _this.state.done,\n          tags: _this.state.tags,\n          machine: _this.machine\n        });\n        newState.changed = true;\n        return newState;\n      });\n\n      _this.update(nextState, _event);\n\n      _this._stopChildren();\n\n      registry.free(_this.sessionId);\n    });\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \").concat(JSON.stringify(event)));\n      }\n    } else if (this.status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\"));\n    }\n\n    if (!events.length) {\n      return;\n    }\n\n    var exec = !!this.machine.config.predictableActionArguments && this._exec;\n    this.scheduler.schedule(function () {\n      var e_11, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = provide(_this, function () {\n          return _this.machine.transition(nextState, _event, undefined, exec || undefined);\n        });\n        batchedActions.push.apply(batchedActions, __spreadArray([], __read(_this.machine.config.predictableActionArguments ? nextState.actions : nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })), false));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n\n  Interpreter.prototype._nextState = function (event, exec) {\n    var _this = this;\n\n    if (exec === void 0) {\n      exec = !!this.machine.config.predictableActionArguments && this._exec;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = provide(this, function () {\n      return _this.machine.transition(_this.state, _event, undefined, exec || undefined);\n    });\n    return nextState;\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    return this._nextState(event, false);\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_12, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\".concat(event, \"' from interpreter '\").concat(this.id, \"' to nonexistant child '\").concat(id, \"'.\"));\n        }\n\n        child.send(event);\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    var timerId = this.clock.setTimeout(function () {\n      if ('to' in sendAction && sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to, true);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n\n    if (sendAction.id) {\n      this.delayedEventsMap[sendAction.id] = timerId;\n    }\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    if (actionFunctionMap === void 0) {\n      actionFunctionMap = this.machine.options.actions;\n    }\n\n    this._exec(action, state.context, state._event, actionFunctionMap);\n  };\n\n  Interpreter.prototype.removeChild = function (childId) {\n    var _a;\n\n    this.children.delete(childId);\n    this.forwardTo.delete(childId); // this.state might not exist at the time this is called,\n    // such as when a child is added then removed while initializing the state\n\n    (_a = this.state) === null || _a === void 0 ? true : delete _a.children[childId];\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.removeChild(childId);\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (this.status !== InterpreterStatus.Running) {\n      return createDeferredActor(entity, name);\n    }\n\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isSpawnedActor(entity)) {\n      return this.spawnActor(entity, name);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else if (isBehavior(entity)) {\n      return this.spawnBehavior(entity, name);\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\".concat(name, \"\\\" of type \\\"\").concat(typeof entity, \"\\\".\"));\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.removeChild(childService.id);\n\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    return actor;\n  };\n\n  Interpreter.prototype.spawnBehavior = function (behavior, id) {\n    var actorRef = spawnBehavior(behavior, {\n      id: id,\n      parent: this\n    });\n    this.children.set(id, actorRef);\n    return actorRef;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var resolvedData;\n    promise.then(function (response) {\n      if (!canceled) {\n        resolvedData = response;\n\n        _this.removeChild(id);\n\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var observer = toObserver(next, handleError, complete);\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.error(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return resolvedData;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n    var emitted;\n\n    var receive = function (e) {\n      emitted = e;\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(toSCXMLEvent(e, {\n        origin: id\n      }));\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = (_a = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        var observer = toObserver(next);\n        listeners.add(observer.next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(observer.next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return emitted;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _a;\n\n    var _this = this;\n\n    var emitted;\n    var subscription = source.subscribe(function (value) {\n      emitted = value;\n\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      getSnapshot: function () {\n        return emitted;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor, name) {\n    this.children.set(name, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\".concat(activity.type, \"'\"));\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    var _a;\n\n    this.children.set(id, (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      getSnapshot: function () {\n        return undefined;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a));\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    var global = getGlobal();\n\n    if (this.options.devTools && global) {\n      if (global.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = global.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n\n  Interpreter.prototype.getSnapshot = function () {\n    if (this.status === InterpreterStatus.NotStarted) {\n      return this.initialState;\n    }\n\n    return this._state;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions = {\n    execute: true,\n    deferEvents: true,\n    clock: {\n      setTimeout: function (fn, ms) {\n        return setTimeout(fn, ms);\n      },\n      clearTimeout: function (id) {\n        return clearTimeout(id);\n      }\n    },\n    logger: /*#__PURE__*/console.log.bind(console),\n    devTools: false\n  };\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return consume(function (service) {\n    if (!IS_PRODUCTION) {\n      var isLazyEntity = isMachine(entity) || isFunction(entity);\n      warn(!!service || isLazyEntity, \"Attempted to spawn an Actor (ID: \\\"\".concat(isMachine(entity) ? entity.id : 'undefined', \"\\\") outside of a service. This will have no effect.\"));\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createDeferredActor(entity, resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, InterpreterStatus, interpret, spawn };\n","import { __assign, __rest } from './_virtual/_tslib.js';\nimport './types.js';\nimport { invoke } from './actionTypes.js';\nimport './utils.js';\nimport './environment.js';\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    var simpleSrc = {\n      type: src\n    };\n\n    simpleSrc.toString = function () {\n      return src;\n    }; // v4 compat - TODO: remove in v5\n\n\n    return simpleSrc;\n  }\n\n  return src;\n}\nfunction toInvokeDefinition(invokeConfig) {\n  return __assign(__assign({\n    type: invoke\n  }, invokeConfig), {\n    toJSON: function () {\n      invokeConfig.onDone;\n          invokeConfig.onError;\n          var invokeDef = __rest(invokeConfig, [\"onDone\", \"onError\"]);\n\n      return __assign(__assign({}, invokeDef), {\n        type: invoke,\n        src: toInvokeSource(invokeConfig.src)\n      });\n    }\n  });\n}\n\nexport { toInvokeDefinition, toInvokeSource };\n","import { __assign, __spreadArray, __read, __values, __rest } from './_virtual/_tslib.js';\nimport { isFunction, mapValues, isArray, flatten, toArray, toStateValue, isString, getEventType, toSCXMLEvent, matchesState, path, evaluateGuard, mapContext, isRaisableAction, pathToStateValue, isBuiltInEvent, partition, updateHistoryValue, toStatePath, mapFilterValues, warn, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, createInvokeId } from './utils.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { start as start$1, stop as stop$1, invoke, update, nullEvent } from './actionTypes.js';\nimport { done, start, toActionObjects, raise, stop, resolveActions, doneInvoke, error, toActionObject, toActivityDefinition, after, send, cancel, initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { STATE_DELIMITER } from './constants.js';\nimport { getAllStateNodes, getConfiguration, isInFinalState, getTagsFromConfiguration, has, getChildren, getValue, isLeafNode, getAllChildren } from './stateUtils.js';\nimport { createInvocableActor } from './Actor.js';\nimport { toInvokeDefinition } from './invokeUtils.js';\n\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\".concat(event, \"'\");\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \".concat(eventText, \" on state '\").concat(stateNode.id, \"' are unreachable. \") + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  _context, // TODO: this is unsafe, but we're removing it in v5 anyway\n  _stateInfo) {\n    if (_context === void 0) {\n      _context = 'context' in config ? config.context : undefined;\n    }\n\n    var _this = this;\n\n    var _a;\n\n    this.config = config;\n    this._context = _context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.tags = [];\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = _stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.parent;\n    this.key = this.config.key || (_stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.key) || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spreadArray([this.machine.key], __read(this.path), false).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && Object.keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n    this.schema = this.parent ? this.machine.schema : (_a = this.config.schema) !== null && _a !== void 0 ? _a : {};\n    this.description = this.config.description;\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \".concat(this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\".concat(this.type, \"'`\"), \" in the config for state node '\").concat(this.id, \"' instead.\"));\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {}, undefined, {\n        parent: _this,\n        key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getAllChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !!this.config.always || (!this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on);\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.doneData = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        var invokeId = createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_a = {}, _a[invokeId] = invokeConfig, _a), _this.machine.options.services);\n        return toInvokeDefinition({\n          src: invokeId,\n          id: invokeId\n        });\n      } else if (isString(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        return toInvokeDefinition(__assign(__assign({}, invokeConfig), {\n          id: invokeId,\n          src: invokeConfig.src\n        }));\n      } else if (isMachine(invokeConfig.src) || isFunction(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_b = {}, _b[invokeId] = invokeConfig.src, _b), _this.machine.options.services);\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeId\n        }, invokeConfig), {\n          src: invokeId\n        }));\n      } else {\n        var invokeSource = invokeConfig.src;\n        return toInvokeDefinition(__assign(__assign({\n          id: createInvokeId(_this.id, i)\n        }, invokeConfig), {\n          src: invokeSource\n        }));\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this);\n    this.tags = toArray(this.config.tags); // TODO: this is the real fix for initialization once\n    // state node getters are deprecated\n    // if (!this.parent) {\n    //   this._init();\n    // }\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context !== null && context !== void 0 ? context : this.context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"context\", {\n    get: function () {\n      return isFunction(this._context) ? this._context() : this._context;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.doneData,\n        invoke: this.invoke,\n        description: this.description,\n        tags: this.tags\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? \"\".concat(_this.id, \":delay[\").concat(i, \"]\") : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(Object.keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this, this.states[stateValue]];\n    }\n\n    var subStateKeys = Object.keys(stateValue);\n    var subStateNodes = [this];\n    subStateNodes.push.apply(subStateNodes, __spreadArray([], __read(flatten(subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n    }))), false));\n    return subStateNodes;\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var stateFromConfig = state instanceof State ? state : State.create(state);\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(stateFromConfig.value)));\n    return new State(__assign(__assign({}, stateFromConfig), {\n      value: this.resolve(stateFromConfig.value),\n      configuration: configuration,\n      done: isInFinalState(configuration, this),\n      tags: getTagsFromConfiguration(configuration),\n      machine: this.machine\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = Object.keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(Object.keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var configuration = flatten(Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(Object.keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (Object.keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.getTransitionData = function (state, event) {\n    return this._transition(state.value, state, toSCXMLEvent(event));\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || evaluateGuard(this.machine, cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\".concat(cond.name || cond.type, \"' in transition for event '\").concat(eventName, \"' in state node '\").concat(this.id, \"':\\n\").concat(err.message));\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spreadArray([], __read(candidate.actions), false));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    return {\n      transitions: [selectedTransition],\n      exitSet: isInternal ? [] : flatten(nextStateNodes.map(function (targetNode) {\n        return _this.getPotentiallyReenteringNodes(targetNode);\n      })),\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  }; // even though the name of this function mentions reentry nodes\n  // we are pushing its result into `exitSet`\n  // that's because what we exit might be reentered (it's an invariant of reentrancy)\n\n\n  StateNode.prototype.getPotentiallyReenteringNodes = function (targetNode) {\n    if (this.order < targetNode.order) {\n      return [this];\n    }\n\n    var nodes = [];\n    var marker = this;\n    var possibleAncestor = targetNode;\n\n    while (marker && marker !== possibleAncestor) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    if (marker !== possibleAncestor) {\n      // we never got to `possibleAncestor`, therefore the initial `marker` \"escapes\" it\n      // it's in a different part of the tree so no states will be reentered for such an external transition\n      return [];\n    }\n\n    nodes.push(possibleAncestor);\n    return nodes;\n  };\n\n  StateNode.prototype.getActions = function (resolvedConfig, isDone, transition, currentContext, _event, prevState, predictableExec) {\n    var e_4, _a, e_5, _b;\n\n    var _this = this;\n\n    var prevConfig = prevState ? getConfiguration([], this.getStateNodes(prevState.value)) : [];\n    var entrySet = new Set();\n\n    try {\n      for (var _c = __values(Array.from(resolvedConfig).sort(function (a, b) {\n        return a.order - b.order;\n      })), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var sn = _d.value;\n\n        if (!has(prevConfig, sn) || has(transition.exitSet, sn) || sn.parent && entrySet.has(sn.parent)) {\n          entrySet.add(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    var entryStates = Array.from(entrySet).sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var exitStates = new Set(transition.exitSet);\n    var doneEvents = flatten(entryStates.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n\n      if (!parent.parent) {\n        return events;\n      }\n\n      events.push(done(sn.id, sn.doneData), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.doneData ? mapContext(sn.doneData, currentContext, _event) : undefined));\n      var grandparent = parent.parent;\n\n      if (grandparent.type === 'parallel') {\n        if (getChildren(grandparent).every(function (parentNode) {\n          return isInFinalState(transition.configuration, parentNode);\n        })) {\n          events.push(done(grandparent.id));\n        }\n      }\n\n      return events;\n    }));\n    var entryActions = entryStates.map(function (stateNode) {\n      var entryActions = stateNode.onEntry;\n      var invokeActions = stateNode.activities.map(function (activity) {\n        return start(activity);\n      });\n      return {\n        type: 'entry',\n        actions: toActionObjects(predictableExec ? __spreadArray(__spreadArray([], __read(entryActions), false), __read(invokeActions), false) : __spreadArray(__spreadArray([], __read(invokeActions), false), __read(entryActions), false), _this.machine.options.actions)\n      };\n    }).concat({\n      type: 'state_done',\n      actions: doneEvents.map(function (event) {\n        return raise(event);\n      })\n    });\n    var exitActions = Array.from(exitStates).map(function (stateNode) {\n      return {\n        type: 'exit',\n        actions: toActionObjects(__spreadArray(__spreadArray([], __read(stateNode.onExit), false), __read(stateNode.activities.map(function (activity) {\n          return stop(activity);\n        })), false), _this.machine.options.actions)\n      };\n    });\n    var actions = exitActions.concat({\n      type: 'transition',\n      actions: toActionObjects(transition.actions, this.machine.options.actions)\n    }).concat(entryActions);\n\n    if (isDone) {\n      var stopActions = toActionObjects(flatten(__spreadArray([], __read(resolvedConfig), false).sort(function (a, b) {\n        return b.order - a.order;\n      }).map(function (stateNode) {\n        return stateNode.onExit;\n      })), this.machine.options.actions).filter(function (action) {\n        return !isRaisableAction(action);\n      });\n      return actions.concat({\n        type: 'stop',\n        actions: stopActions\n      });\n    }\n\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context, exec) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context !== null && context !== void 0 ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\".concat(WILDCARD, \"')\"));\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\".concat(this.id, \"' does not accept event '\").concat(_event.name, \"'\"));\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spreadArray([], __read(resolvedConfig), false);\n    return this.resolveTransition(stateTransition, currentState, currentState.context, exec, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent, predictableExec) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event, undefined, predictableExec); // Save original event to state\n    // TODO: this should be the raised event! Delete in V5 (breaking)\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spreadArray([], __read(currentActions), false));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, context, predictableExec, _event) {\n    var e_6, _a, e_7, _b;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedConfiguration = willTransition ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var actionBlocks = this.getActions(new Set(resolvedConfiguration), isDone, stateTransition, context, _event, currentState, predictableExec);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n        var block = actionBlocks_1_1.value;\n\n        try {\n          for (var _c = (e_7 = void 0, __values(block.actions)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var action = _d.value;\n\n            if (action.type === start$1) {\n              activities[action.activity.id || action.activity.type] = action;\n            } else if (action.type === stop$1) {\n              activities[action.activity.id || action.activity.type] = false;\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _e = __read(resolveActions(this, currentState, context, _event, actionBlocks, predictableExec, this.machine.config.predictableActionArguments || this.machine.config.preserveActionOrder), 2),\n        resolvedActions = _e[0],\n        updatedContext = _e[1];\n\n    var _f = __read(partition(resolvedActions, isRaisableAction), 2),\n        raisedEvents = _f[0],\n        nonRaisedActions = _f[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      var _a;\n\n      return action.type === start$1 && ((_a = action.activity) === null || _a === void 0 ? void 0 : _a.type) === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity, _this.machine, updatedContext, _event);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone,\n      tags: getTagsFromConfiguration(resolvedConfiguration),\n      machine: this\n    });\n    var didUpdateContext = context !== updatedContext;\n    nextState.changed = _event.name === update || didUpdateContext; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    } // There are transient transitions if the machine is not in a final state\n    // and if some of the state nodes have transient (\"always\") transitions.\n\n\n    var hasAlwaysTransitions = !isDone && (this._transient || configuration.some(function (stateNode) {\n      return stateNode._transient;\n    })); // If there are no enabled transitions, check if there are transient transitions.\n    // If there are transient transitions, continue checking for more transitions\n    // because an transient transition should be triggered even if there are no\n    // enabled transitions.\n    //\n    // If we're already working on an transient transition then stop to prevent an infinite loop.\n    //\n    // Otherwise, if there are no enabled nor transient transitions, we are done.\n\n    if (!willTransition && (!hasAlwaysTransitions || _event.name === NULL_EVENT)) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      if (hasAlwaysTransitions) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event, predictableExec);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event, predictableExec);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || didUpdateContext || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\".concat(stateKey, \"' from '\").concat(this.id, \"'; no child states exist.\"));\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\".concat(resolvedStateId, \"' does not exist on machine '\").concat(this.id, \"'\"));\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!Object.keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\".concat(stateIdentifier, \"'\"));\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\".concat(this.initial, \"' not found on '\").concat(this.key, \"'\"));\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      } else {\n        // The finite state value of a machine without child states is just an empty object\n        initialStateValue = {};\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    this._init(); // TODO: this should be in the constructor (see note in constructor)\n\n\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, context !== null && context !== void 0 ? context : this.machine.context, undefined);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\".concat(this.id, \"'.\"));\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\".concat(this.id, \"' has no initial state.\"));\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\".concat(stateKey, \"' from node with no states\"));\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!Object.keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(Object.keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_8, _a, e_9, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(Object.keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_9 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\".concat(event_1));\n                }\n              } catch (e_9_1) {\n                e_9 = {\n                  error: e_9_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_9) throw e_9.error;\n                }\n              }\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\".concat(_this.id, \"':\\n\").concat(err.message));\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event,\n      toJSON: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\".concat(t.id);\n          }) : undefined,\n          source: \"#\".concat(_this.id)\n        });\n      }\n    });\n\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_10, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictTransitionConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(Object.keys(strictTransitionConfigs_1).map(function (key) {\n        if (!IS_PRODUCTION && key === NULL_EVENT) {\n          warn(false, \"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. \" + \"Please check the `on` configuration for \\\"#\".concat(_this.id, \"\\\".\"));\n        }\n\n        var transitionConfigArray = toTransitionConfigArray(key, strictTransitionConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, transitionConfigArray);\n        }\n\n        return transitionConfigArray;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var eventlessConfig = this.config.always ? toTransitionConfigArray('', this.config.always) : [];\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n\n    if (!IS_PRODUCTION) {\n      warn(!(this.config.onDone && !this.parent), \"Root nodes cannot have an \\\".onDone\\\" transition. Please check the config of \\\"\".concat(this.id, \"\\\".\"));\n    }\n\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)), false));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)), false));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(doneConfig), false), __read(invokeConfig), false), __read(onConfig), false), __read(eventlessConfig), false).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };\n","import { StateNode } from './StateNode.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar warned = false;\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  return new StateNode(config, options, initialContext);\n}\nfunction createMachine(config, options) {\n  if (!IS_PRODUCTION && !('predictableActionArguments' in config) && !warned) {\n    warned = true;\n    console.warn('It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html');\n  }\n\n  return new StateNode(config, options);\n}\n\nexport { Machine, createMachine };\n","import { assign as assign$1, cancel as cancel$1, send as send$1, sendTo as sendTo$1, sendParent as sendParent$1, sendUpdate as sendUpdate$1, forwardTo as forwardTo$1, doneInvoke as doneInvoke$1, raise as raise$1, log as log$1, pure as pure$1, choose as choose$1, stop as stop$1 } from './actions.js';\nimport * as actions from './actions.js';\nexport { actions };\nexport { toActorRef } from './Actor.js';\nexport { Interpreter, InterpreterStatus, interpret, spawn } from './interpreter.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { mapState } from './mapState.js';\nexport { matchState } from './match.js';\nexport { createSchema, t } from './schema.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { spawnBehavior } from './behaviors.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nexport { matchesState, toEventObject, toObserver, toSCXMLEvent } from './utils.js';\n\nvar assign = assign$1,\n    cancel = cancel$1,\n    send = send$1,\n    sendTo = sendTo$1,\n    sendParent = sendParent$1,\n    sendUpdate = sendUpdate$1,\n    forwardTo = forwardTo$1,\n    doneInvoke = doneInvoke$1,\n    raise = raise$1,\n    log = log$1,\n    pure = pure$1,\n    choose = choose$1,\n    stop = stop$1;\n\nexport { assign, cancel, choose, doneInvoke, forwardTo, log, pure, raise, send, sendParent, sendTo, sendUpdate, stop };\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nexports.__assign = function() {\r\n    exports.__assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return exports.__assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexports.__read = __read;\nexports.__rest = __rest;\nexports.__spreadArray = __spreadArray;\nexports.__values = __values;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _tslib = require('./_virtual/_tslib.js');\n\nvar defaultWaitForOptions = {\n  timeout: 10000 // 10 seconds\n\n};\n/**\r\n * Subscribes to an actor ref and waits for its emitted value to satisfy\r\n * a predicate, and then resolves with that value.\r\n * Will throw if the desired state is not reached after a timeout\r\n * (defaults to 10 seconds).\r\n *\r\n * @example\r\n * ```js\r\n * const state = await waitFor(someService, state => {\r\n *   return state.hasTag('loaded');\r\n * });\r\n *\r\n * state.hasTag('loaded'); // true\r\n * ```\r\n *\r\n * @param actorRef The actor ref to subscribe to\r\n * @param predicate Determines if a value matches the condition to wait for\r\n * @param options\r\n * @returns A promise that eventually resolves to the emitted value\r\n * that matches the condition\r\n */\n\nfunction waitFor(actorRef, predicate, options) {\n  var resolvedOptions = _tslib.__assign(_tslib.__assign({}, defaultWaitForOptions), options);\n\n  return new Promise(function (res, rej) {\n    var done = false;\n\n    if (process.env.NODE_ENV !== 'production' && resolvedOptions.timeout < 0) {\n      console.error('`timeout` passed to `waitFor` is negative and it will reject its internal promise immediately.');\n    }\n\n    var handle = resolvedOptions.timeout === Infinity ? undefined : setTimeout(function () {\n      sub.unsubscribe();\n      rej(new Error(\"Timeout of \".concat(resolvedOptions.timeout, \" ms exceeded\")));\n    }, resolvedOptions.timeout);\n\n    var dispose = function () {\n      clearTimeout(handle);\n      done = true;\n      sub === null || sub === void 0 ? void 0 : sub.unsubscribe();\n    };\n\n    var sub = actorRef.subscribe({\n      next: function (emitted) {\n        if (predicate(emitted)) {\n          dispose();\n          res(emitted);\n        }\n      },\n      error: function (err) {\n        dispose();\n        rej(err);\n      },\n      complete: function () {\n        dispose();\n        rej(new Error(\"Actor terminated without satisfying predicate\"));\n      }\n    });\n\n    if (done) {\n      sub.unsubscribe();\n    }\n  });\n}\n\nexports.waitFor = waitFor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexports.bool = bool;\n// copied from utils\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nfunction bytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = { number, bool, bytes, hash, exists, output };\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.isLE = exports.rotr = exports.createView = exports.u32 = exports.u8 = void 0;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\n// Other libraries would silently corrupt the data instead of throwing an error,\n// when they don't support it.\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!exports.isLE)\n    throw new Error('Non little-endian hardware is not supported');\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    if (!isBytes(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\nexports.utf8ToBytes = utf8ToBytes;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!isBytes(data))\n        throw new Error(`expected Uint8Array, got ${typeof data}`);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        if (!isBytes(a))\n            throw new Error('Uint8Array expected');\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\nconst toStr = {}.toString;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\nfunction wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHA2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nclass SHA2 extends utils_js_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_js_1.createView)(this.buffer);\n    }\n    update(data) {\n        (0, _assert_js_1.exists)(this);\n        const { view, buffer, blockLen } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_js_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        (0, _assert_js_1.exists)(this);\n        (0, _assert_js_1.output)(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_js_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\nexports.SHA2 = SHA2;\n//# sourceMappingURL=_sha2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha224 = exports.sha256 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// SHA2-256 need to try 2^128 hashes to execute birthday attack.\n// BTC network is doing 2^67 hashes/sec as per early 2023.\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = /* @__PURE__ */ new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_js_1.rotr)(W15, 7) ^ (0, utils_js_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_js_1.rotr)(W2, 17) ^ (0, utils_js_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_js_1.rotr)(E, 6) ^ (0, utils_js_1.rotr)(E, 11) ^ (0, utils_js_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_js_1.rotr)(A, 2) ^ (0, utils_js_1.rotr)(A, 13) ^ (0, utils_js_1.rotr)(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexports.sha256 = (0, utils_js_1.wrapConstructor)(() => new SHA256());\nexports.sha224 = (0, utils_js_1.wrapConstructor)(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) {\n    } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = new Uint8Array(zeroes + (size - it4))\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","const basex = require('base-x')\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","'use strict'\n\nvar base58 = require('bs58')\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var payloadU8 = Uint8Array.from(payload)\n    var checksum = checksumFn(payloadU8)\n    var length = payloadU8.length + 4\n    var both = new Uint8Array(length)\n    both.set(payloadU8, 0)\n    both.set(checksum.subarray(0, 4), payloadU8.length)\n    return base58.encode(both, length)\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","'use strict'\n\nvar { sha256 } = require('@noble/hashes/sha256')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  return sha256(sha256(buffer))\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","import * as Uuid from \"uuid\";\nimport bs58check from \"bs58check\";\nexport const urlPrefix = \"automerge:\";\n/** Given an Automerge URL, returns the DocumentId in both base58check-encoded form and binary form */\nexport const parseAutomergeUrl = (url) => {\n    const regex = new RegExp(`^${urlPrefix}(\\\\w+)$`);\n    const [, docMatch] = url.match(regex) || [];\n    const documentId = docMatch;\n    const binaryDocumentId = documentIdToBinary(documentId);\n    if (!binaryDocumentId)\n        throw new Error(\"Invalid document URL: \" + url);\n    return {\n        /** unencoded DocumentId */\n        binaryDocumentId,\n        /** encoded DocumentId */\n        documentId,\n    };\n};\n/**\n * Given a documentId in either binary or base58check-encoded form, returns an Automerge URL.\n * Throws on invalid input.\n */\nexport const stringifyAutomergeUrl = (arg) => {\n    const documentId = arg instanceof Uint8Array || typeof arg === \"string\"\n        ? arg\n        : \"documentId\" in arg\n            ? arg.documentId\n            : undefined;\n    const encodedDocumentId = documentId instanceof Uint8Array\n        ? binaryToDocumentId(documentId)\n        : typeof documentId === \"string\"\n            ? documentId\n            : undefined;\n    if (encodedDocumentId === undefined)\n        throw new Error(\"Invalid documentId: \" + documentId);\n    return (urlPrefix + encodedDocumentId);\n};\n/**\n * Given a string, returns true if it is a valid Automerge URL. This function also acts as a type\n * discriminator in Typescript.\n */\nexport const isValidAutomergeUrl = (str) => {\n    if (!str || !str.startsWith(urlPrefix))\n        return false;\n    const automergeUrl = str;\n    try {\n        const { documentId } = parseAutomergeUrl(automergeUrl);\n        return isValidDocumentId(documentId);\n    }\n    catch {\n        return false;\n    }\n};\nexport const isValidDocumentId = (str) => {\n    // try to decode from base58\n    const binaryDocumentID = documentIdToBinary(str);\n    if (binaryDocumentID === undefined)\n        return false; // invalid base58check encoding\n    // confirm that the document ID is a valid UUID\n    const documentId = Uuid.stringify(binaryDocumentID);\n    return Uuid.validate(documentId);\n};\nexport const isValidUuid = (str) => Uuid.validate(str);\n/**\n * Returns a new Automerge URL with a random UUID documentId. Called by Repo.create(), and also used by tests.\n */\nexport const generateAutomergeUrl = () => {\n    const documentId = Uuid.v4(null, new Uint8Array(16));\n    return stringifyAutomergeUrl({ documentId });\n};\nexport const documentIdToBinary = (docId) => bs58check.decodeUnsafe(docId);\nexport const binaryToDocumentId = (docId) => bs58check.encode(docId);\nexport const parseLegacyUUID = (str) => {\n    if (!Uuid.validate(str))\n        return undefined;\n    const documentId = Uuid.parse(str);\n    return stringifyAutomergeUrl({ documentId });\n};\n/**\n * Given any valid expression of a document ID, returns a DocumentId in base58check-encoded form.\n *\n * Currently supports:\n * - base58check-encoded DocumentId\n * - Automerge URL\n * - legacy UUID\n * - binary DocumentId\n *\n * Throws on invalid input.\n */\nexport const interpretAsDocumentId = (id) => {\n    // binary\n    if (id instanceof Uint8Array)\n        return binaryToDocumentId(id);\n    // url\n    if (isValidAutomergeUrl(id))\n        return parseAutomergeUrl(id).documentId;\n    // base58check\n    if (isValidDocumentId(id))\n        return id;\n    // legacy UUID\n    if (isValidUuid(id)) {\n        console.warn(\"Future versions will not support UUIDs as document IDs; use Automerge URLs instead.\");\n        const binaryDocumentID = Uuid.parse(id);\n        return binaryToDocumentId(binaryDocumentID);\n    }\n    // none of the above\n    throw new Error(`Invalid AutomergeUrl: '${id}'`);\n};\n","let decoder\ntry {\n\tdecoder = new TextDecoder()\n} catch(error) {}\nlet src\nlet srcEnd\nlet position = 0\nlet alreadySet\nconst EMPTY_ARRAY = []\nconst LEGACY_RECORD_INLINE_ID = 105\nconst RECORD_DEFINITIONS_ID = 0xdffe\nconst RECORD_INLINE_ID = 0xdfff // temporary first-come first-serve tag // proposed tag: 0x7265 // 're'\nconst BUNDLED_STRINGS_ID = 0xdff9\nconst PACKED_TABLE_TAG_ID = 51\nconst PACKED_REFERENCE_TAG_ID = 6\nconst STOP_CODE = {}\nlet strings = EMPTY_ARRAY\nlet stringPosition = 0\nlet currentDecoder = {}\nlet currentStructures\nlet srcString\nlet srcStringStart = 0\nlet srcStringEnd = 0\nlet bundledStrings\nlet referenceMap\nlet currentExtensions = []\nlet currentExtensionRanges = []\nlet packedValues\nlet dataView\nlet restoreMapsAsObject\nlet defaultOptions = {\n\tuseRecords: false,\n\tmapsAsObjects: true\n}\nlet sequentialMode = false\nlet inlineObjectReadThreshold = 2;\nvar BlockedFunction // we use search and replace to change the next call to BlockedFunction to avoid CSP issues for\n// no-eval build\ntry {\n\tnew Function('')\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n\tinlineObjectReadThreshold = Infinity\n}\n\n\n\nexport class Decoder {\n\tconstructor(options) {\n\t\tif (options) {\n\t\t\tif ((options.keyMap || options._keyMap) && !options.useRecords) {\n\t\t\t\toptions.useRecords = false\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\t}\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\tif (options.getStructures)\n\t\t\t\toptions.getShared = options.getStructures\n\t\t\tif (options.getShared && !options.structures)\n\t\t\t\t(options.structures = []).uninitialized = true // this is what we use to denote an uninitialized structures\n\t\t\tif (options.keyMap) {\n\t\t\t\tthis.mapKey = new Map()\n\t\t\t\tfor (let [k,v] of Object.entries(options.keyMap)) this.mapKey.set(v,k)\n\t\t\t}\n\t\t}\n\t\tObject.assign(this, options)\n\t}\n\t/*\n\tdecodeKey(key) {\n\t\treturn this.keyMap\n\t\t\t? Object.keys(this.keyMap)[Object.values(this.keyMap).indexOf(key)] || key\n\t\t\t: key\n\t}\n\t*/\n\tdecodeKey(key) {\n\t\treturn this.keyMap ? this.mapKey.get(key) || key : key\n\t}\n\t\n\tencodeKey(key) {\n\t\treturn this.keyMap && this.keyMap.hasOwnProperty(key) ? this.keyMap[key] : key\n\t}\n\n\tencodeKeys(rec) {\n\t\tif (!this._keyMap) return rec\n\t\tlet map = new Map()\n\t\tfor (let [k,v] of Object.entries(rec)) map.set((this._keyMap.hasOwnProperty(k) ? this._keyMap[k] : k), v)\n\t\treturn map\n\t}\n\n\tdecodeKeys(map) {\n\t\tif (!this._keyMap || map.constructor.name != 'Map') return map\n\t\tif (!this._mapKey) {\n\t\t\tthis._mapKey = new Map()\n\t\t\tfor (let [k,v] of Object.entries(this._keyMap)) this._mapKey.set(v,k)\n\t\t}\n\t\tlet res = {}\n\t\t//map.forEach((v,k) => res[Object.keys(this._keyMap)[Object.values(this._keyMap).indexOf(k)] || k] = v)\n\t\tmap.forEach((v,k) => res[safeKey(this._mapKey.has(k) ? this._mapKey.get(k) : k)] =  v)\n\t\treturn res\n\t}\n\t\n\tmapDecode(source, end) {\n\t\n\t\tlet res = this.decode(source)\n\t\tif (this._keyMap) { \n\t\t\t//Experiemntal support for Optimised KeyMap  decoding \n\t\t\tswitch (res.constructor.name) {\n\t\t\t\tcase 'Array': return res.map(r => this.decodeKeys(r))\n\t\t\t\t//case 'Map': return this.decodeKeys(res)\n\t\t\t}\n\t\t}\n\t\treturn res\n\t}\n\n\tdecode(source, end) {\n\t\tif (src) {\n\t\t\t// re-entrant execution, save the state and restore it after we do this decode\n\t\t\treturn saveState(() => {\n\t\t\t\tclearSource()\n\t\t\t\treturn this ? this.decode(source, end) : Decoder.prototype.decode.call(defaultOptions, source, end)\n\t\t\t})\n\t\t}\n\t\tsrcEnd = end > -1 ? end : source.length\n\t\tposition = 0\n\t\tstringPosition = 0\n\t\tsrcStringEnd = 0\n\t\tsrcString = null\n\t\tstrings = EMPTY_ARRAY\n\t\tbundledStrings = null\n\t\tsrc = source\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\n\t\t// new ones\n\t\ttry {\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength))\n\t\t} catch(error) {\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\n\t\t\tsrc = null\n\t\t\tif (source instanceof Uint8Array)\n\t\t\t\tthrow error\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\n\t\t}\n\t\tif (this instanceof Decoder) {\n\t\t\tcurrentDecoder = this\n\t\t\tpackedValues = this.sharedValues &&\n\t\t\t\t(this.pack ? new Array(this.maxPrivatePackedValues || 16).concat(this.sharedValues) :\n\t\t\t\tthis.sharedValues)\n\t\t\tif (this.structures) {\n\t\t\t\tcurrentStructures = this.structures\n\t\t\t\treturn checkedRead()\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\n\t\t\t\tcurrentStructures = []\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentDecoder = defaultOptions\n\t\t\tif (!currentStructures || currentStructures.length > 0)\n\t\t\t\tcurrentStructures = []\n\t\t\tpackedValues = null\n\t\t}\n\t\treturn checkedRead()\n\t}\n\tdecodeMultiple(source, forEach) {\n\t\tlet values, lastPosition = 0\n\t\ttry {\n\t\t\tlet size = source.length\n\t\t\tsequentialMode = true\n\t\t\tlet value = this ? this.decode(source, size) : defaultDecoder.decode(source, size)\n\t\t\tif (forEach) {\n\t\t\t\tif (forEach(value) === false) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tif (forEach(checkedRead()) === false) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues = [ value ]\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tvalues.push(checkedRead())\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t} catch(error) {\n\t\t\terror.lastPosition = lastPosition\n\t\t\terror.values = values\n\t\t\tthrow error\n\t\t} finally {\n\t\t\tsequentialMode = false\n\t\t\tclearSource()\n\t\t}\n\t}\n}\nexport function getPosition() {\n\treturn position\n}\nexport function checkedRead() {\n\ttry {\n\t\tlet result = read()\n\t\tif (bundledStrings) {\n\t\t\tif (position >= bundledStrings.postBundlePosition) {\n\t\t\t\tlet error = new Error('Unexpected bundle position');\n\t\t\t\terror.incomplete = true;\n\t\t\t\tthrow error\n\t\t\t}\n\t\t\t// bundled strings to skip past\n\t\t\tposition = bundledStrings.postBundlePosition;\n\t\t\tbundledStrings = null;\n\t\t}\n\n\t\tif (position == srcEnd) {\n\t\t\t// finished reading this source, cleanup references\n\t\t\tcurrentStructures = null\n\t\t\tsrc = null\n\t\t\tif (referenceMap)\n\t\t\t\treferenceMap = null\n\t\t} else if (position > srcEnd) {\n\t\t\t// over read\n\t\t\tlet error = new Error('Unexpected end of CBOR data')\n\t\t\terror.incomplete = true\n\t\t\tthrow error\n\t\t} else if (!sequentialMode) {\n\t\t\tthrow new Error('Data read, but end of buffer not reached')\n\t\t}\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\n\t\treturn result\n\t} catch(error) {\n\t\tclearSource()\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer')) {\n\t\t\terror.incomplete = true\n\t\t}\n\t\tthrow error\n\t}\n}\n\nexport function read() {\n\tlet token = src[position++]\n\tlet majorType = token >> 5\n\ttoken = token & 0x1f\n\tif (token > 0x17) {\n\t\tswitch (token) {\n\t\t\tcase 0x18:\n\t\t\t\ttoken = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0x19:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\treturn getFloat16()\n\t\t\t\t}\n\t\t\t\ttoken = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0x1a:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\tlet value = dataView.getFloat32(position)\n\t\t\t\t\tif (currentDecoder.useFloat32 > 2) {\n\t\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)]\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n\t\t\t\t\t}\n\t\t\t\t\tposition += 4\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\ttoken = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t\tcase 0x1b:\n\t\t\t\tif (majorType == 7) {\n\t\t\t\t\tlet value = dataView.getFloat64(position)\n\t\t\t\t\tposition += 8\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\tif (majorType > 1) {\n\t\t\t\t\tif (dataView.getUint32(position) > 0)\n\t\t\t\t\t\tthrow new Error('JavaScript does not support arrays, maps, or strings with length over 4294967295')\n\t\t\t\t\ttoken = dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentDecoder.int64AsNumber) {\n\t\t\t\t\ttoken = dataView.getUint32(position) * 0x100000000\n\t\t\t\t\ttoken += dataView.getUint32(position + 4)\n\t\t\t\t} else\n\t\t\t\t\ttoken = dataView.getBigUint64(position)\n\t\t\t\tposition += 8\n\t\t\t\tbreak\n\t\t\tcase 0x1f: \n\t\t\t\t// indefinite length\n\t\t\t\tswitch(majorType) {\n\t\t\t\t\tcase 2: // byte string\n\t\t\t\t\tcase 3: // text string\n\t\t\t\t\t\tthrow new Error('Indefinite length not supported for byte or text strings')\n\t\t\t\t\tcase 4: // array\n\t\t\t\t\t\tlet array = []\n\t\t\t\t\t\tlet value, i = 0\n\t\t\t\t\t\twhile ((value = read()) != STOP_CODE) {\n\t\t\t\t\t\t\tarray[i++] = value\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn majorType == 4 ? array : majorType == 3 ? array.join('') : Buffer.concat(array)\n\t\t\t\t\tcase 5: // map\n\t\t\t\t\t\tlet key\n\t\t\t\t\t\tif (currentDecoder.mapsAsObjects) {\n\t\t\t\t\t\t\tlet object = {}\n\t\t\t\t\t\t\tif (currentDecoder.keyMap) while((key = read()) != STOP_CODE) object[safeKey(currentDecoder.decodeKey(key))] = read()\n\t\t\t\t\t\t\telse while ((key = read()) != STOP_CODE) object[safeKey(key)] = read()\n\t\t\t\t\t\t\treturn object\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (restoreMapsAsObject) {\n\t\t\t\t\t\t\t\tcurrentDecoder.mapsAsObjects = true\n\t\t\t\t\t\t\t\trestoreMapsAsObject = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet map = new Map()\n\t\t\t\t\t\t\tif (currentDecoder.keyMap) while((key = read()) != STOP_CODE) map.set(currentDecoder.decodeKey(key), read())\n\t\t\t\t\t\t\telse while ((key = read()) != STOP_CODE) map.set(key, read())\n\t\t\t\t\t\t\treturn map\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\treturn STOP_CODE\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error('Invalid major type for indefinite length ' + majorType)\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown token ' + token)\n\t\t}\n\t}\n\tswitch (majorType) {\n\t\tcase 0: // positive int\n\t\t\treturn token\n\t\tcase 1: // negative int\n\t\t\treturn ~token\n\t\tcase 2: // buffer\n\t\t\treturn readBin(token)\n\t\tcase 3: // string\n\t\t\tif (srcStringEnd >= position) {\n\t\t\t\treturn srcString.slice(position - srcStringStart, (position += token) - srcStringStart)\n\t\t\t}\n\t\t\tif (srcStringEnd == 0 && srcEnd < 140 && token < 32) {\n\t\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\n\t\t\t\tlet string = token < 16 ? shortStringInJS(token) : longStringInJS(token)\n\t\t\t\tif (string != null)\n\t\t\t\t\treturn string\n\t\t\t}\n\t\t\treturn readFixedString(token)\n\t\tcase 4: // array\n\t\t\tlet array = new Array(token)\n\t\t  //if (currentDecoder.keyMap) for (let i = 0; i < token; i++) array[i] = currentDecoder.decodeKey(read())\t\n\t\t\t//else \n\t\t\tfor (let i = 0; i < token; i++) array[i] = read()\n\t\t\treturn array\n\t\tcase 5: // map\n\t\t\tif (currentDecoder.mapsAsObjects) {\n\t\t\t\tlet object = {}\n\t\t\t\tif (currentDecoder.keyMap) for (let i = 0; i < token; i++) object[safeKey(currentDecoder.decodeKey(read()))] = read()\n\t\t\t\telse for (let i = 0; i < token; i++) object[safeKey(read())] = read()\n\t\t\t\treturn object\n\t\t\t} else {\n\t\t\t\tif (restoreMapsAsObject) {\n\t\t\t\t\tcurrentDecoder.mapsAsObjects = true\n\t\t\t\t\trestoreMapsAsObject = false\n\t\t\t\t}\n\t\t\t\tlet map = new Map()\n\t\t\t\tif (currentDecoder.keyMap) for (let i = 0; i < token; i++) map.set(currentDecoder.decodeKey(read()),read())\n\t\t\t\telse for (let i = 0; i < token; i++) map.set(read(), read())\n\t\t\t\treturn map\n\t\t\t}\n\t\tcase 6: // extension\n\t\t\tif (token >= BUNDLED_STRINGS_ID) {\n\t\t\t\tlet structure = currentStructures[token & 0x1fff] // check record structures first\n\t\t\t\t// At some point we may provide an option for dynamic tag assignment with a range like token >= 8 && (token < 16 || (token > 0x80 && token < 0xc0) || (token > 0x130 && token < 0x4000))\n\t\t\t\tif (structure) {\n\t\t\t\t\tif (!structure.read) structure.read = createStructureReader(structure)\n\t\t\t\t\treturn structure.read()\n\t\t\t\t}\n\t\t\t\tif (token < 0x10000) {\n\t\t\t\t\tif (token == RECORD_INLINE_ID) { // we do a special check for this so that we can keep the\n\t\t\t\t\t\t// currentExtensions as densely stored array (v8 stores arrays densely under about 3000 elements)\n\t\t\t\t\t\tlet length = readJustLength()\n\t\t\t\t\t\tlet id = read()\n\t\t\t\t\t\tlet structure = read()\n\t\t\t\t\t\trecordDefinition(id, structure)\n\t\t\t\t\t\tlet object = {}\n\t\t\t\t\t\tif (currentDecoder.keyMap) for (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\tlet key = currentDecoder.decodeKey(structure[i - 2])\n\t\t\t\t\t\t\tobject[safeKey(key)] = read()\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse for (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\tlet key = structure[i - 2]\n\t\t\t\t\t\t\tobject[safeKey(key)] = read()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn object\n\t\t\t\t\t}\n\t\t\t\t\telse if (token == RECORD_DEFINITIONS_ID) {\n\t\t\t\t\t\tlet length = readJustLength()\n\t\t\t\t\t\tlet id = read()\n\t\t\t\t\t\tfor (let i = 2; i < length; i++) {\n\t\t\t\t\t\t\trecordDefinition(id++, read())\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn read()\n\t\t\t\t\t} else if (token == BUNDLED_STRINGS_ID) {\n\t\t\t\t\t\treturn readBundleExt()\n\t\t\t\t\t}\n\t\t\t\t\tif (currentDecoder.getShared) {\n\t\t\t\t\t\tloadShared()\n\t\t\t\t\t\tstructure = currentStructures[token & 0x1fff]\n\t\t\t\t\t\tif (structure) {\n\t\t\t\t\t\t\tif (!structure.read)\n\t\t\t\t\t\t\t\tstructure.read = createStructureReader(structure)\n\t\t\t\t\t\t\treturn structure.read()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet extension = currentExtensions[token]\n\t\t\tif (extension) {\n\t\t\t\tif (extension.handlesRead)\n\t\t\t\t\treturn extension(read)\n\t\t\t\telse\n\t\t\t\t\treturn extension(read())\n\t\t\t} else {\n\t\t\t\tlet input = read()\n\t\t\t\tfor (let i = 0; i < currentExtensionRanges.length; i++) {\n\t\t\t\t\tlet value = currentExtensionRanges[i](token, input)\n\t\t\t\t\tif (value !== undefined)\n\t\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t\treturn new Tag(input, token)\n\t\t\t}\n\t\tcase 7: // fixed value\n\t\t\tswitch (token) {\n\t\t\t\tcase 0x14: return false\n\t\t\t\tcase 0x15: return true\n\t\t\t\tcase 0x16: return null\n\t\t\t\tcase 0x17: return; // undefined\n\t\t\t\tcase 0x1f:\n\t\t\t\tdefault:\n\t\t\t\t\tlet packedValue = (packedValues || getPackedValues())[token]\n\t\t\t\t\tif (packedValue !== undefined)\n\t\t\t\t\t\treturn packedValue\n\t\t\t\t\tthrow new Error('Unknown token ' + token)\n\t\t\t}\n\t\tdefault: // negative int\n\t\t\tif (isNaN(token)) {\n\t\t\t\tlet error = new Error('Unexpected end of CBOR data')\n\t\t\t\terror.incomplete = true\n\t\t\t\tthrow error\n\t\t\t}\n\t\t\tthrow new Error('Unknown CBOR token ' + token)\n\t}\n}\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/\nfunction createStructureReader(structure) {\n\tfunction readObject() {\n\t\t// get the array size from the header\n\t\tlet length = src[position++]\n\t\t//let majorType = token >> 5\n\t\tlength = length & 0x1f\n\t\tif (length > 0x17) {\n\t\t\tswitch (length) {\n\t\t\t\tcase 0x18:\n\t\t\t\t\tlength = src[position++]\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x19:\n\t\t\t\t\tlength = dataView.getUint16(position)\n\t\t\t\t\tposition += 2\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x1a:\n\t\t\t\t\tlength = dataView.getUint32(position)\n\t\t\t\t\tposition += 4\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Expected array header, but got ' + src[position - 1])\n\t\t\t}\n\t\t}\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\n\t\tlet compiledReader = this.compiledReader // first look to see if we have the fast compiled function\n\t\twhile(compiledReader) {\n\t\t\t// we have a fast compiled object literal reader\n\t\t\tif (compiledReader.propertyCount === length)\n\t\t\t\treturn compiledReader(read) // with the right length, so we use it\n\t\t\tcompiledReader = compiledReader.next // see if there is another reader with the right length\n\t\t}\n\t\tif (this.slowReads++ >= inlineObjectReadThreshold) { // create a fast compiled reader\n\t\t\tlet array = this.length == length ? this : this.slice(0, length)\n\t\t\tcompiledReader = currentDecoder.keyMap \n\t\t\t? new Function('r', 'return {' + array.map(k => currentDecoder.decodeKey(k)).map(k => validName.test(k) ? safeKey(k) + ':r()' : ('[' + JSON.stringify(k) + ']:r()')).join(',') + '}')\n\t\t\t: new Function('r', 'return {' + array.map(key => validName.test(key) ? safeKey(key) + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '}')\n\t\t\tif (this.compiledReader)\n\t\t\t\tcompiledReader.next = this.compiledReader // if there is an existing one, we store multiple readers as a linked list because it is usually pretty rare to have multiple readers (of different length) for the same structure\n\t\t\tcompiledReader.propertyCount = length\n\t\t\tthis.compiledReader = compiledReader\n\t\t\treturn compiledReader(read)\n\t\t}\n\t\tlet object = {}\n\t\tif (currentDecoder.keyMap) for (let i = 0; i < length; i++) object[safeKey(currentDecoder.decodeKey(this[i]))] = read()\n\t\telse for (let i = 0; i < length; i++) {\n\t\t\tobject[safeKey(this[i])] = read();\n\t\t}\n\t\treturn object\n\t}\n\tstructure.slowReads = 0\n\treturn readObject\n}\n\nfunction safeKey(key) {\n\t// protect against prototype pollution\n\tif (typeof key === 'string') return key === '__proto__' ? '__proto_' : key\n\tif (typeof key !== 'object') return key.toString()\n\t// protect against expensive (DoS) string conversions\n\tthrow new Error('Invalid property name type ' + typeof key);\n}\n\nlet readFixedString = readStringJS\nlet readString8 = readStringJS\nlet readString16 = readStringJS\nlet readString32 = readStringJS\n\nexport let isNativeAccelerationEnabled = false\nexport function setExtractor(extractStrings) {\n\tisNativeAccelerationEnabled = true\n\treadFixedString = readString(1)\n\treadString8 = readString(2)\n\treadString16 = readString(3)\n\treadString32 = readString(5)\n\tfunction readString(headerLength) {\n\t\treturn function readString(length) {\n\t\t\tlet string = strings[stringPosition++]\n\t\t\tif (string == null) {\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\treturn readStringJS(length)\n\t\t\t\tlet extraction = extractStrings(position, srcEnd, length, src)\n\t\t\t\tif (typeof extraction == 'string') {\n\t\t\t\t\tstring = extraction\n\t\t\t\t\tstrings = EMPTY_ARRAY\n\t\t\t\t} else {\n\t\t\t\t\tstrings = extraction\n\t\t\t\t\tstringPosition = 1\n\t\t\t\t\tsrcStringEnd = 1 // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\n\t\t\t\t\tstring = strings[0]\n\t\t\t\t\tif (string === undefined)\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet srcStringLength = string.length\n\t\t\tif (srcStringLength <= length) {\n\t\t\t\tposition += length\n\t\t\t\treturn string\n\t\t\t}\n\t\t\tsrcString = string\n\t\t\tsrcStringStart = position\n\t\t\tsrcStringEnd = position + srcStringLength\n\t\t\tposition += length\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\n\t\t}\n\t}\n}\nfunction readStringJS(length) {\n\tlet result\n\tif (length < 16) {\n\t\tif (result = shortStringInJS(length))\n\t\t\treturn result\n\t}\n\tif (length > 64 && decoder)\n\t\treturn decoder.decode(src.subarray(position, position += length))\n\tconst end = position + length\n\tconst units = []\n\tresult = ''\n\twhile (position < end) {\n\t\tconst byte1 = src[position++]\n\t\tif ((byte1 & 0x80) === 0) {\n\t\t\t// 1 byte\n\t\t\tunits.push(byte1)\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\n\t\t\t// 2 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2)\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\n\t\t\t// 3 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3)\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\n\t\t\t// 4 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tconst byte4 = src[position++] & 0x3f\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4\n\t\t\tif (unit > 0xffff) {\n\t\t\t\tunit -= 0x10000\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800)\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff)\n\t\t\t}\n\t\t\tunits.push(unit)\n\t\t} else {\n\t\t\tunits.push(byte1)\n\t\t}\n\n\t\tif (units.length >= 0x1000) {\n\t\t\tresult += fromCharCode.apply(String, units)\n\t\t\tunits.length = 0\n\t\t}\n\t}\n\n\tif (units.length > 0) {\n\t\tresult += fromCharCode.apply(String, units)\n\t}\n\n\treturn result\n}\nlet fromCharCode = String.fromCharCode\nfunction longStringInJS(length) {\n\tlet start = position\n\tlet bytes = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tconst byte = src[position++];\n\t\tif ((byte & 0x80) > 0) {\n\t\t\tposition = start\n    \t\t\treturn\n    \t\t}\n    \t\tbytes[i] = byte\n    \t}\n    \treturn fromCharCode.apply(String, bytes)\n}\nfunction shortStringInJS(length) {\n\tif (length < 4) {\n\t\tif (length < 2) {\n\t\t\tif (length === 0)\n\t\t\t\treturn ''\n\t\t\telse {\n\t\t\t\tlet a = src[position++]\n\t\t\t\tif ((a & 0x80) > 1) {\n\t\t\t\t\tposition -= 1\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a)\n\t\t\t}\n\t\t} else {\n\t\t\tlet a = src[position++]\n\t\t\tlet b = src[position++]\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\n\t\t\t\tposition -= 2\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 3)\n\t\t\t\treturn fromCharCode(a, b)\n\t\t\tlet c = src[position++]\n\t\t\tif ((c & 0x80) > 0) {\n\t\t\t\tposition -= 3\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c)\n\t\t}\n\t} else {\n\t\tlet a = src[position++]\n\t\tlet b = src[position++]\n\t\tlet c = src[position++]\n\t\tlet d = src[position++]\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\n\t\t\tposition -= 4\n\t\t\treturn\n\t\t}\n\t\tif (length < 6) {\n\t\t\tif (length === 4)\n\t\t\t\treturn fromCharCode(a, b, c, d)\n\t\t\telse {\n\t\t\t\tlet e = src[position++]\n\t\t\t\tif ((e & 0x80) > 0) {\n\t\t\t\t\tposition -= 5\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\n\t\t\t}\n\t\t} else if (length < 8) {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\n\t\t\t\tposition -= 6\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 7)\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\n\t\t\tlet g = src[position++]\n\t\t\tif ((g & 0x80) > 0) {\n\t\t\t\tposition -= 7\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\n\t\t} else {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tlet g = src[position++]\n\t\t\tlet h = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\n\t\t\t\tposition -= 8\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 10) {\n\t\t\t\tif (length === 8)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\n\t\t\t\telse {\n\t\t\t\t\tlet i = src[position++]\n\t\t\t\t\tif ((i & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 9\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\n\t\t\t\t}\n\t\t\t} else if (length < 12) {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\n\t\t\t\t\tposition -= 10\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 11)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\n\t\t\t\tlet k = src[position++]\n\t\t\t\tif ((k & 0x80) > 0) {\n\t\t\t\t\tposition -= 11\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\n\t\t\t} else {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tlet k = src[position++]\n\t\t\t\tlet l = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\n\t\t\t\t\tposition -= 12\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 14) {\n\t\t\t\t\tif (length === 12)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\n\t\t\t\t\t\t\tposition -= 13\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\tlet n = src[position++]\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 14\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (length < 15)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\n\t\t\t\t\tlet o = src[position++]\n\t\t\t\t\tif ((o & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 15\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction readBin(length) {\n\treturn currentDecoder.copyBuffers ?\n\t\t// specifically use the copying slice (not the node one)\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\n\t\tsrc.subarray(position, position += length)\n}\nfunction readExt(length) {\n\tlet type = src[position++]\n\tif (currentExtensions[type]) {\n\t\treturn currentExtensions[type](src.subarray(position, position += length))\n\t}\n\telse\n\t\tthrow new Error('Unknown extension type ' + type)\n}\nlet f32Array = new Float32Array(1)\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4)\nfunction getFloat16() {\n\tlet byte0 = src[position++]\n\tlet byte1 = src[position++]\n\tlet exponent = (byte0 & 0x7f) >> 2;\n\tif (exponent === 0x1f) { // specials\n\t\tif (byte1 || (byte0 & 3))\n\t\t\treturn NaN;\n\t\treturn (byte0 & 0x80) ? -Infinity : Infinity;\n\t}\n\tif (exponent === 0) { // sub-normals\n\t\t// significand with 10 fractional bits and divided by 2^14\n\t\tlet abs = (((byte0 & 3) << 8) | byte1) / (1 << 24)\n\t\treturn (byte0 & 0x80) ? -abs : abs\n\t}\n\n\tu8Array[3] = (byte0 & 0x80) | // sign bit\n\t\t((exponent >> 1) + 56) // 4 of 5 of the exponent bits, re-offset-ed\n\tu8Array[2] = ((byte0 & 7) << 5) | // last exponent bit and first two mantissa bits\n\t\t(byte1 >> 3) // next 5 bits of mantissa\n\tu8Array[1] = byte1 << 5; // last three bits of mantissa\n\tu8Array[0] = 0;\n\treturn f32Array[0];\n}\n\nlet keyCache = new Array(4096)\nfunction readKey() {\n\tlet length = src[position++]\n\tif (length >= 0x60 && length < 0x78) {\n\t\t// fixstr, potentially use key cache\n\t\tlength = length - 0x60\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\n\t\t\treturn readFixedString(length)\n\t} else { // not cacheable, go back and do a standard read\n\t\tposition--\n\t\treturn read()\n\t}\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff\n\tlet entry = keyCache[key]\n\tlet checkPosition = position\n\tlet end = position + length - 3\n\tlet chunk\n\tlet i = 0\n\tif (entry && entry.bytes == length) {\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = dataView.getUint32(checkPosition)\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcheckPosition += 4\n\t\t}\n\t\tend += 3\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = src[checkPosition++]\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (checkPosition === end) {\n\t\t\tposition = checkPosition\n\t\t\treturn entry.string\n\t\t}\n\t\tend -= 3\n\t\tcheckPosition = position\n\t}\n\tentry = []\n\tkeyCache[key] = entry\n\tentry.bytes = length\n\twhile (checkPosition < end) {\n\t\tchunk = dataView.getUint32(checkPosition)\n\t\tentry.push(chunk)\n\t\tcheckPosition += 4\n\t}\n\tend += 3\n\twhile (checkPosition < end) {\n\t\tchunk = src[checkPosition++]\n\t\tentry.push(chunk)\n\t}\n\t// for small blocks, avoiding the overhead of the extract call is helpful\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\tif (string != null)\n\t\treturn entry.string = string\n\treturn entry.string = readFixedString(length)\n}\n\nexport class Tag {\n\tconstructor(value, tag) {\n\t\tthis.value = value\n\t\tthis.tag = tag\n\t}\n}\n\ncurrentExtensions[0] = (dateString) => {\n\t// string date extension\n\treturn new Date(dateString)\n}\n\ncurrentExtensions[1] = (epochSec) => {\n\t// numeric date extension\n\treturn new Date(Math.round(epochSec * 1000))\n}\n\ncurrentExtensions[2] = (buffer) => {\n\t// bigint extension\n\tlet value = BigInt(0)\n\tfor (let i = 0, l = buffer.byteLength; i < l; i++) {\n\t\tvalue = BigInt(buffer[i]) + value << BigInt(8)\n\t}\n\treturn value\n}\n\ncurrentExtensions[3] = (buffer) => {\n\t// negative bigint extension\n\treturn BigInt(-1) - currentExtensions[2](buffer)\n}\ncurrentExtensions[4] = (fraction) => {\n\t// best to reparse to maintain accuracy\n\treturn +(fraction[1] + 'e' + fraction[0])\n}\n\ncurrentExtensions[5] = (fraction) => {\n\t// probably not sufficiently accurate\n\treturn fraction[1] * Math.exp(fraction[0] * Math.log(2))\n}\n\n// the registration of the record definition extension\nconst recordDefinition = (id, structure) => {\n\tid = id - 0xe000\n\tlet existingStructure = currentStructures[id]\n\tif (existingStructure && existingStructure.isShared) {\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure\n\t}\n\tcurrentStructures[id] = structure\n\n\tstructure.read = createStructureReader(structure)\n}\ncurrentExtensions[LEGACY_RECORD_INLINE_ID] = (data) => {\n\tlet length = data.length\n\tlet structure = data[1]\n\trecordDefinition(data[0], structure)\n\tlet object = {}\n\tfor (let i = 2; i < length; i++) {\n\t\tlet key = structure[i - 2]\n\t\tobject[safeKey(key)] = data[i]\n\t}\n\treturn object\n}\ncurrentExtensions[14] = (value) => {\n\tif (bundledStrings)\n\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 += value)\n\treturn new Tag(value, 14)\n}\ncurrentExtensions[15] = (value) => {\n\tif (bundledStrings)\n\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\n\treturn new Tag(value, 15)\n}\nlet glbl = { Error, RegExp }\ncurrentExtensions[27] = (data) => { // http://cbor.schmorp.de/generic-object\n\treturn (glbl[data[0]] || Error)(data[1], data[2])\n}\nconst packedTable = (read) => {\n\tif (src[position++] != 0x84) {\n\t\tlet error = new Error('Packed values structure must be followed by a 4 element array')\n\t\tif (src.length < position)\n\t\t\terror.incomplete = true\n\t\tthrow error\n\t}\n\tlet newPackedValues = read() // packed values\n\tif (!newPackedValues || !newPackedValues.length) {\n\t\tlet error = new Error('Packed values structure must be followed by a 4 element array')\n\t\terror.incomplete = true\n\t\tthrow error\n\t}\n\tpackedValues = packedValues ? newPackedValues.concat(packedValues.slice(newPackedValues.length)) : newPackedValues\n\tpackedValues.prefixes = read()\n\tpackedValues.suffixes = read()\n\treturn read() // read the rump\n}\npackedTable.handlesRead = true\ncurrentExtensions[51] = packedTable\n\ncurrentExtensions[PACKED_REFERENCE_TAG_ID] = (data) => { // packed reference\n\tif (!packedValues) {\n\t\tif (currentDecoder.getShared)\n\t\t\tloadShared()\n\t\telse\n\t\t\treturn new Tag(data, PACKED_REFERENCE_TAG_ID)\n\t}\n\tif (typeof data == 'number')\n\t\treturn packedValues[16 + (data >= 0 ? 2 * data : (-2 * data - 1))]\n\tlet error = new Error('No support for non-integer packed references yet')\n\tif (data === undefined)\n\t\terror.incomplete = true\n\tthrow error\n}\n\n// The following code is an incomplete implementation of http://cbor.schmorp.de/stringref\n// the real thing would need to implemennt more logic to populate the stringRefs table and\n// maintain a stack of stringRef \"namespaces\".\n//\n// currentExtensions[25] = (id) => {\n// \treturn stringRefs[id]\n// }\n// currentExtensions[256] = (read) => {\n// \tstringRefs = []\n// \ttry {\n// \t\treturn read()\n// \t} finally {\n// \t\tstringRefs = null\n// \t}\n// }\n// currentExtensions[256].handlesRead = true\n\ncurrentExtensions[28] = (read) => { \n\t// shareable http://cbor.schmorp.de/value-sharing (for structured clones)\n\tif (!referenceMap) {\n\t\treferenceMap = new Map()\n\t\treferenceMap.id = 0\n\t}\n\tlet id = referenceMap.id++\n\tlet token = src[position]\n\tlet target\n\t// TODO: handle Maps, Sets, and other types that can cycle; this is complicated, because you potentially need to read\n\t// ahead past references to record structure definitions\n\tif ((token >> 5) == 4)\n\t\ttarget = []\n\telse\n\t\ttarget = {}\n\n\tlet refEntry = { target } // a placeholder object\n\treferenceMap.set(id, refEntry)\n\tlet targetProperties = read() // read the next value as the target object to id\n\tif (refEntry.used) // there is a cycle, so we have to assign properties to original target\n\t\treturn Object.assign(target, targetProperties)\n\trefEntry.target = targetProperties // the placeholder wasn't used, replace with the deserialized one\n\treturn targetProperties // no cycle, can just use the returned read object\n}\ncurrentExtensions[28].handlesRead = true\n\ncurrentExtensions[29] = (id) => {\n\t// sharedref http://cbor.schmorp.de/value-sharing (for structured clones)\n\tlet refEntry = referenceMap.get(id)\n\trefEntry.used = true\n\treturn refEntry.target\n}\n\ncurrentExtensions[258] = (array) => new Set(array); // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n(currentExtensions[259] = (read) => {\n\t// https://github.com/shanewholloway/js-cbor-codec/blob/master/docs/CBOR-259-spec\n\t// for decoding as a standard Map\n\tif (currentDecoder.mapsAsObjects) {\n\t\tcurrentDecoder.mapsAsObjects = false\n\t\trestoreMapsAsObject = true\n\t}\n\treturn read()\n}).handlesRead = true\nfunction combine(a, b) {\n\tif (typeof a === 'string')\n\t\treturn a + b\n\tif (a instanceof Array)\n\t\treturn a.concat(b)\n\treturn Object.assign({}, a, b)\n}\nfunction getPackedValues() {\n\tif (!packedValues) {\n\t\tif (currentDecoder.getShared)\n\t\t\tloadShared()\n\t\telse\n\t\t\tthrow new Error('No packed values available')\n\t}\n\treturn packedValues\n}\nconst SHARED_DATA_TAG_ID = 0x53687264 // ascii 'Shrd'\ncurrentExtensionRanges.push((tag, input) => {\n\tif (tag >= 225 && tag <= 255)\n\t\treturn combine(getPackedValues().prefixes[tag - 224], input)\n\tif (tag >= 28704 && tag <= 32767)\n\t\treturn combine(getPackedValues().prefixes[tag - 28672], input)\n\tif (tag >= 1879052288 && tag <= 2147483647)\n\t\treturn combine(getPackedValues().prefixes[tag - 1879048192], input)\n\tif (tag >= 216 && tag <= 223)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 216])\n\tif (tag >= 27647 && tag <= 28671)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 27639])\n\tif (tag >= 1811940352 && tag <= 1879048191)\n\t\treturn combine(input, getPackedValues().suffixes[tag - 1811939328])\n\tif (tag == SHARED_DATA_TAG_ID) {// we do a special check for this so that we can keep the currentExtensions as densely stored array (v8 stores arrays densely under about 3000 elements)\n\t\treturn {\n\t\t\tpackedValues: packedValues,\n\t\t\tstructures: currentStructures.slice(0),\n\t\t\tversion: input,\n\t\t}\n\t}\n\tif (tag == 55799) // self-descriptive CBOR tag, just return input value\n\t\treturn input\n})\n\nconst isLittleEndianMachine = new Uint8Array(new Uint16Array([1]).buffer)[0] == 1\nexport const typedArrays = [Uint8Array, Uint8ClampedArray, Uint16Array, Uint32Array,\n\ttypeof BigUint64Array == 'undefined' ? { name:'BigUint64Array' } : BigUint64Array, Int8Array, Int16Array, Int32Array,\n\ttypeof BigInt64Array == 'undefined' ? { name:'BigInt64Array' } : BigInt64Array, Float32Array, Float64Array]\nconst typedArrayTags = [64, 68, 69, 70, 71, 72, 77, 78, 79, 85, 86]\nfor (let i = 0; i < typedArrays.length; i++) {\n\tregisterTypedArray(typedArrays[i], typedArrayTags[i])\n}\nfunction registerTypedArray(TypedArray, tag) {\n\tlet dvMethod = 'get' + TypedArray.name.slice(0, -5)\n\tlet bytesPerElement;\n\tif (typeof TypedArray === 'function')\n\t\tbytesPerElement = TypedArray.BYTES_PER_ELEMENT;\n\telse\n\t\tTypedArray = null;\n\tfor (let littleEndian = 0; littleEndian < 2; littleEndian++) {\n\t\tif (!littleEndian && bytesPerElement == 1)\n\t\t\tcontinue\n\t\tlet sizeShift = bytesPerElement == 2 ? 1 : bytesPerElement == 4 ? 2 : 3\n\t\tcurrentExtensions[littleEndian ? tag : (tag - 4)] = (bytesPerElement == 1 || littleEndian == isLittleEndianMachine) ? (buffer) => {\n\t\t\tif (!TypedArray)\n\t\t\t\tthrow new Error('Could not find typed array for code ' + tag)\n\t\t\tif (!currentDecoder.copyBuffers) {\n\t\t\t\t// try provide a direct view, but will only work if we are byte-aligned\n\t\t\t\tif (bytesPerElement === 1 ||\n\t\t\t\t\tbytesPerElement === 2 && !(buffer.byteOffset & 1) ||\n\t\t\t\t\tbytesPerElement === 4 && !(buffer.byteOffset & 3) ||\n\t\t\t\t\tbytesPerElement === 8 && !(buffer.byteOffset & 7))\n\t\t\t\t\treturn new TypedArray(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n\t\t\t}\n\t\t\t// we have to slice/copy here to get a new ArrayBuffer, if we are not word/byte aligned\n\t\t\treturn new TypedArray(Uint8Array.prototype.slice.call(buffer, 0).buffer)\n\t\t} : buffer => {\n\t\t\tif (!TypedArray)\n\t\t\t\tthrow new Error('Could not find typed array for code ' + tag)\n\t\t\tlet dv = new DataView(buffer.buffer, buffer.byteOffset, buffer.byteLength)\n\t\t\tlet elements = buffer.length >> sizeShift\n\t\t\tlet ta = new TypedArray(elements)\n\t\t\tlet method = dv[dvMethod]\n\t\t\tfor (let i = 0; i < elements; i++) {\n\t\t\t\tta[i] = method.call(dv, i << sizeShift, littleEndian)\n\t\t\t}\n\t\t\treturn ta\n\t\t}\n\t}\n}\n\nfunction readBundleExt() {\n\tlet length = readJustLength()\n\tlet bundlePosition = position + read()\n\tfor (let i = 2; i < length; i++) {\n\t\t// skip past bundles that were already read\n\t\tlet bundleLength = readJustLength() // this will increment position, so must add to position afterwards\n\t\tposition += bundleLength\n\t}\n\tlet dataPosition = position\n\tposition = bundlePosition\n\tbundledStrings = [readStringJS(readJustLength()), readStringJS(readJustLength())]\n\tbundledStrings.position0 = 0\n\tbundledStrings.position1 = 0\n\tbundledStrings.postBundlePosition = position\n\tposition = dataPosition\n\treturn read()\n}\n\nfunction readJustLength() {\n\tlet token = src[position++] & 0x1f\n\tif (token > 0x17) {\n\t\tswitch (token) {\n\t\t\tcase 0x18:\n\t\t\t\ttoken = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0x19:\n\t\t\t\ttoken = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0x1a:\n\t\t\t\ttoken = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t}\n\t}\n\treturn token\n}\n\nfunction loadShared() {\n\tif (currentDecoder.getShared) {\n\t\tlet sharedData = saveState(() => {\n\t\t\t// save the state in case getShared modifies our buffer\n\t\t\tsrc = null\n\t\t\treturn currentDecoder.getShared()\n\t\t}) || {}\n\t\tlet updatedStructures = sharedData.structures || []\n\t\tcurrentDecoder.sharedVersion = sharedData.version\n\t\tpackedValues = currentDecoder.sharedValues = sharedData.packedValues\n\t\tif (currentStructures === true)\n\t\t\tcurrentDecoder.structures = currentStructures = updatedStructures\n\t\telse\n\t\t\tcurrentStructures.splice.apply(currentStructures, [0, updatedStructures.length].concat(updatedStructures))\n\t}\n}\n\nfunction saveState(callback) {\n\tlet savedSrcEnd = srcEnd\n\tlet savedPosition = position\n\tlet savedStringPosition = stringPosition\n\tlet savedSrcStringStart = srcStringStart\n\tlet savedSrcStringEnd = srcStringEnd\n\tlet savedSrcString = srcString\n\tlet savedStrings = strings\n\tlet savedReferenceMap = referenceMap\n\tlet savedBundledStrings = bundledStrings\n\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)) // we copy the data in case it changes while external data is processed\n\tlet savedStructures = currentStructures\n\tlet savedDecoder = currentDecoder\n\tlet savedSequentialMode = sequentialMode\n\tlet value = callback()\n\tsrcEnd = savedSrcEnd\n\tposition = savedPosition\n\tstringPosition = savedStringPosition\n\tsrcStringStart = savedSrcStringStart\n\tsrcStringEnd = savedSrcStringEnd\n\tsrcString = savedSrcString\n\tstrings = savedStrings\n\treferenceMap = savedReferenceMap\n\tbundledStrings = savedBundledStrings\n\tsrc = savedSrc\n\tsequentialMode = savedSequentialMode\n\tcurrentStructures = savedStructures\n\tcurrentDecoder = savedDecoder\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength)\n\treturn value\n}\nexport function clearSource() {\n\tsrc = null\n\treferenceMap = null\n\tcurrentStructures = null\n}\n\nexport function addExtension(extension) {\n\tcurrentExtensions[extension.tag] = extension.decode\n}\n\nexport const mult10 = new Array(147) // this is a table matching binary exponents to the multiplier to determine significant digit rounding\nfor (let i = 0; i < 256; i++) {\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103))\n}\nlet defaultDecoder = new Decoder({ useRecords: false })\nexport const decode = defaultDecoder.decode\nexport const decodeMultiple = defaultDecoder.decodeMultiple\nexport const FLOAT32_OPTIONS = {\n\tNEVER: 0,\n\tALWAYS: 1,\n\tDECIMAL_ROUND: 3,\n\tDECIMAL_FIT: 4\n}\nexport function roundFloat32(float32Number) {\n\tf32Array[0] = float32Number\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)]\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n}\n","import { Decoder, mult10, Tag, typedArrays, addExtension as decodeAddExtension } from './decode.js'\nlet textEncoder\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nlet extensions, extensionClasses\nconst Buffer = typeof globalThis === 'object' && globalThis.Buffer;\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nconst ByteArrayAllocate = hasNodeBuffer ? Buffer.allocUnsafeSlow : Uint8Array\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array\nconst MAX_STRUCTURES = 0x100\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000\nlet serializationId = 1\nlet throwOnIterable\nlet target\nlet targetView\nlet position = 0\nlet safeEnd\nlet bundledStrings = null\nconst MAX_BUNDLE_SIZE = 0xf000\nconst hasNonLatin = /[\\u0080-\\uFFFF]/\nconst RECORD_SYMBOL = Symbol('record-id')\nexport class Encoder extends Decoder {\n\tconstructor(options) {\n\t\tsuper(options)\n\t\tthis.offset = 0\n\t\tlet typeBuffer\n\t\tlet start\n\t\tlet sharedStructures\n\t\tlet hasSharedUpdate\n\t\tlet structures\n\t\tlet referenceMap\n\t\toptions = options || {}\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position, maxBytes) {\n\t\t\treturn target.utf8Write(string, position, maxBytes)\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\n\t\t\tfunction(string, position) {\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t\t\t} : false\n\n\t\tlet encoder = this\n\t\tlet hasSharedStructures = options.structures || options.saveStructures\n\t\tlet maxSharedStructures = options.maxSharedStructures\n\t\tif (maxSharedStructures == null)\n\t\t\tmaxSharedStructures = hasSharedStructures ? 128 : 0\n\t\tif (maxSharedStructures > 8190)\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8190')\n\t\tlet isSequential = options.sequential\n\t\tif (isSequential) {\n\t\t\tmaxSharedStructures = 0\n\t\t}\n\t\tif (!this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.saveStructures)\n\t\t\tthis.saveShared = this.saveStructures\n\t\tlet samplingPackedValues, packedObjectMap, sharedValues = options.sharedValues\n\t\tlet sharedPackedObjectMap\n\t\tif (sharedValues) {\n\t\t\tsharedPackedObjectMap = Object.create(null)\n\t\t\tfor (let i = 0, l = sharedValues.length; i < l; i++) {\n\t\t\t\tsharedPackedObjectMap[sharedValues[i]] = i\n\t\t\t}\n\t\t}\n\t\tlet recordIdsToRemove = []\n\t\tlet transitionsCount = 0\n\t\tlet serializationsSinceTransitionRebuild = 0\n\t\t\n\t\tthis.mapEncode = function(value, encodeOptions) {\n\t\t\t// Experimental support for premapping keys using _keyMap instad of keyMap - not optiimised yet)\n\t\t\tif (this._keyMap && !this._mapped) {\n\t\t\t\t//console.log('encoding ', value)\n\t\t\t\tswitch (value.constructor.name) {\n\t\t\t\t\tcase 'Array': \n\t\t\t\t\t\tvalue = value.map(r => this.encodeKeys(r))\n\t\t\t\t\t\tbreak\n\t\t\t\t\t//case 'Map': \n\t\t\t\t\t//\tvalue = this.encodeKeys(value)\n\t\t\t\t\t//\tbreak\n\t\t\t\t}\n\t\t\t\t//this._mapped = true\n\t\t\t}\n\t\t\treturn this.encode(value, encodeOptions)\n\t\t}\n\t\t\n\t\tthis.encode = function(value, encodeOptions)\t{\n\t\t\tif (!target) {\n\t\t\t\ttarget = new ByteArrayAllocate(8192)\n\t\t\t\ttargetView = new DataView(target.buffer, 0, 8192)\n\t\t\t\tposition = 0\n\t\t\t}\n\t\t\tsafeEnd = target.length - 10\n\t\t\tif (safeEnd - position < 0x800) {\n\t\t\t\t// don't start too close to the end, \n\t\t\t\ttarget = new ByteArrayAllocate(target.length)\n\t\t\t\ttargetView = new DataView(target.buffer, 0, target.length)\n\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\tposition = 0\n\t\t\t} else if (encodeOptions === REUSE_BUFFER_MODE)\n\t\t\t\tposition = (position + 7) & 0x7ffffff8 // Word align to make any future copying of this buffer faster\n\t\t\tstart = position\n\t\t\tif (encoder.useSelfDescribedHeader) {\n\t\t\t\ttargetView.setUint32(position, 0xd9d9f700) // tag two byte, then self-descriptive tag\n\t\t\t\tposition += 3\n\t\t\t}\n\t\t\treferenceMap = encoder.structuredClone ? new Map() : null\n\t\t\tif (encoder.bundleStrings && typeof value !== 'string') {\n\t\t\t\tbundledStrings = []\n\t\t\t\tbundledStrings.size = Infinity // force a new bundle start on first string\n\t\t\t} else\n\t\t\t\tbundledStrings = null\n\n\t\t\tsharedStructures = encoder.structures\n\t\t\tif (sharedStructures) {\n\t\t\t\tif (sharedStructures.uninitialized) {\n\t\t\t\t\tlet sharedData = encoder.getShared() || {}\n\t\t\t\t\tencoder.structures = sharedStructures = sharedData.structures || []\n\t\t\t\t\tencoder.sharedVersion = sharedData.version\n\t\t\t\t\tlet sharedValues = encoder.sharedValues = sharedData.packedValues\n\t\t\t\t\tif (sharedValues) {\n\t\t\t\t\t\tsharedPackedObjectMap = {}\n\t\t\t\t\t\tfor (let i = 0, l = sharedValues.length; i < l; i++)\n\t\t\t\t\t\t\tsharedPackedObjectMap[sharedValues[i]] = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet sharedStructuresLength = sharedStructures.length\n\t\t\t\tif (sharedStructuresLength > maxSharedStructures && !isSequential)\n\t\t\t\t\tsharedStructuresLength = maxSharedStructures\n\t\t\t\tif (!sharedStructures.transitions) {\n\t\t\t\t\t// rebuild our structure transitions\n\t\t\t\t\tsharedStructures.transitions = Object.create(null)\n\t\t\t\t\tfor (let i = 0; i < sharedStructuresLength; i++) {\n\t\t\t\t\t\tlet keys = sharedStructures[i]\n\t\t\t\t\t\t//console.log('shared struct keys:', keys)\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\tlet nextTransition, transition = sharedStructures.transitions\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\n\t\t\t\t\t\t\tif (transition[RECORD_SYMBOL] === undefined)\n\t\t\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i\n\t\t\t\t\t\t\tlet key = keys[j]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i | 0x100000\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isSequential)\n\t\t\t\t\tsharedStructures.nextId = sharedStructuresLength\n\t\t\t}\n\t\t\tif (hasSharedUpdate)\n\t\t\t\thasSharedUpdate = false\n\t\t\tstructures = sharedStructures || []\n\t\t\tpackedObjectMap = sharedPackedObjectMap\n\t\t\tif (options.pack) {\n\t\t\t\tlet packedValues = new Map()\n\t\t\t\tpackedValues.values = []\n\t\t\t\tpackedValues.encoder = encoder\n\t\t\t\tpackedValues.maxValues = options.maxPrivatePackedValues || (sharedPackedObjectMap ? 16 : Infinity)\n\t\t\t\tpackedValues.objectMap = sharedPackedObjectMap || false\n\t\t\t\tpackedValues.samplingPackedValues = samplingPackedValues\n\t\t\t\tfindRepetitiveStrings(value, packedValues)\n\t\t\t\tif (packedValues.values.length > 0) {\n\t\t\t\t\ttarget[position++] = 0xd8 // one-byte tag\n\t\t\t\t\ttarget[position++] = 51 // tag 51 for packed shared structures https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\twriteArrayHeader(4)\n\t\t\t\t\tlet valuesArray = packedValues.values\n\t\t\t\t\tencode(valuesArray)\n\t\t\t\t\twriteArrayHeader(0) // prefixes\n\t\t\t\t\twriteArrayHeader(0) // suffixes\n\t\t\t\t\tpackedObjectMap = Object.create(sharedPackedObjectMap || null)\n\t\t\t\t\tfor (let i = 0, l = valuesArray.length; i < l; i++) {\n\t\t\t\t\t\tpackedObjectMap[valuesArray[i]] = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrowOnIterable = encodeOptions & THROW_ON_ITERABLE;\n\t\t\ttry {\n\t\t\t\tif (throwOnIterable)\n\t\t\t\t\treturn;\n\t\t\t\tencode(value)\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\twriteBundles(start, encode)\n\t\t\t\t}\n\t\t\t\tencoder.offset = position // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\n\t\t\t\t\tposition += referenceMap.idsToInsert.length * 2\n\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\tencoder.offset = position\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position), referenceMap.idsToInsert)\n\t\t\t\t\treferenceMap = null\n\t\t\t\t\treturn serialized\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\n\t\t\t\t\ttarget.start = start\n\t\t\t\t\ttarget.end = position\n\t\t\t\t\treturn target\n\t\t\t\t}\n\t\t\t\treturn target.subarray(start, position) // position can change if we call encode again in saveShared, so we get the buffer now\n\t\t\t} finally {\n\t\t\t\tif (sharedStructures) {\n\t\t\t\t\tif (serializationsSinceTransitionRebuild < 10)\n\t\t\t\t\t\tserializationsSinceTransitionRebuild++\n\t\t\t\t\tif (sharedStructures.length > maxSharedStructures)\n\t\t\t\t\t\tsharedStructures.length = maxSharedStructures\n\t\t\t\t\tif (transitionsCount > 10000) {\n\t\t\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\n\t\t\t\t\t\tsharedStructures.transitions = null\n\t\t\t\t\t\tserializationsSinceTransitionRebuild = 0\n\t\t\t\t\t\ttransitionsCount = 0\n\t\t\t\t\t\tif (recordIdsToRemove.length > 0)\n\t\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\n\t\t\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\n\t\t\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t\t//sharedStructures.nextId = maxSharedStructures\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (hasSharedUpdate && encoder.saveShared) {\n\t\t\t\t\tif (encoder.structures.length > maxSharedStructures) {\n\t\t\t\t\t\tencoder.structures = encoder.structures.slice(0, maxSharedStructures)\n\t\t\t\t\t}\n\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\n\t\t\t\t\tlet returnBuffer = target.subarray(start, position)\n\t\t\t\t\tif (encoder.updateSharedData() === false)\n\t\t\t\t\t\treturn encoder.encode(value) // re-encode if it fails\n\t\t\t\t\treturn returnBuffer\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\n\t\t\t\t\tposition = start\n\t\t\t}\n\t\t}\n\t\tthis.findCommonStringsToPack = () => {\n\t\t\tsamplingPackedValues = new Map()\n\t\t\tif (!sharedPackedObjectMap)\n\t\t\t\tsharedPackedObjectMap = Object.create(null)\n\t\t\treturn (options) => {\n\t\t\t\tlet threshold = options && options.threshold || 4\n\t\t\t\tlet position = this.pack ? options.maxPrivatePackedValues || 16 : 0\n\t\t\t\tif (!sharedValues)\n\t\t\t\t\tsharedValues = this.sharedValues = []\n\t\t\t\tfor (let [ key, status ] of samplingPackedValues) {\n\t\t\t\t\tif (status.count > threshold) {\n\t\t\t\t\t\tsharedPackedObjectMap[key] = position++\n\t\t\t\t\t\tsharedValues.push(key)\n\t\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (this.saveShared && this.updateSharedData() === false) {}\n\t\t\t\tsamplingPackedValues = null\n\t\t\t}\n\t\t}\n\t\tconst encode = (value) => {\n\t\t\tif (position > safeEnd)\n\t\t\t\ttarget = makeRoom(position)\n\n\t\t\tvar type = typeof value\n\t\t\tvar length\n\t\t\tif (type === 'string') {\n\t\t\t\tif (packedObjectMap) {\n\t\t\t\t\tlet packedPosition = packedObjectMap[value]\n\t\t\t\t\tif (packedPosition >= 0) {\n\t\t\t\t\t\tif (packedPosition < 16)\n\t\t\t\t\t\t\ttarget[position++] = packedPosition + 0xe0 // simple values, defined in https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttarget[position++] = 0xc6 // tag 6 defined in https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\t\t\t\t\tif (packedPosition & 1)\n\t\t\t\t\t\t\t\tencode((15 - packedPosition) >> 1)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tencode((packedPosition - 16) >> 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn\n/*\t\t\t\t\t\t} else if (packedStatus.serializationId != serializationId) {\n\t\t\t\t\t\t\tpackedStatus.serializationId = serializationId\n\t\t\t\t\t\t\tpackedStatus.count = 1\n\t\t\t\t\t\t\tif (options.sharedPack) {\n\t\t\t\t\t\t\t\tlet sharedCount = packedStatus.sharedCount = (packedStatus.sharedCount || 0) + 1\n\t\t\t\t\t\t\t\tif (shareCount > (options.sharedPack.threshold || 5)) {\n\t\t\t\t\t\t\t\t\tlet sharedPosition = packedStatus.position = packedStatus.nextSharedPosition\n\t\t\t\t\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t\t\t\t\t\tif (sharedPosition < 16)\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = sharedPosition + 0xc0\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // else any in-doc incrementation?*/\n\t\t\t\t\t} else if (samplingPackedValues && !options.pack) {\n\t\t\t\t\t\tlet status = samplingPackedValues.get(value)\n\t\t\t\t\t\tif (status)\n\t\t\t\t\t\t\tstatus.count++\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsamplingPackedValues.set(value, {\n\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet strLength = value.length\n\t\t\t\tif (bundledStrings && strLength >= 4 && strLength < 0x400) {\n\t\t\t\t\tif ((bundledStrings.size += strLength) > MAX_BUNDLE_SIZE) {\n\t\t\t\t\t\tlet extStart\n\t\t\t\t\t\tlet maxBytes = (bundledStrings[0] ? bundledStrings[0].length * 3 + bundledStrings[1].length : 0) + 10\n\t\t\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\t\t\t\t\t\ttarget[position++] = 0xd9 // tag 16-bit\n\t\t\t\t\t\ttarget[position++] = 0xdf // tag 0xdff9\n\t\t\t\t\t\ttarget[position++] = 0xf9\n\t\t\t\t\t\t// TODO: If we only have one bundle with any string data, only write one string bundle\n\t\t\t\t\t\ttarget[position++] = bundledStrings.position ? 0x84 : 0x82 // array of 4 or 2 elements depending on if we write bundles\n\t\t\t\t\t\ttarget[position++] = 0x1a // 32-bit unsigned int\n\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\tif (bundledStrings.position) {\n\t\t\t\t\t\t\twriteBundles(start, encode) // write the last bundles\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbundledStrings = ['', ''] // create new ones\n\t\t\t\t\t\tbundledStrings.size = 0\n\t\t\t\t\t\tbundledStrings.position = extStart\n\t\t\t\t\t}\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value)\n\t\t\t\t\tbundledStrings[twoByte ? 0 : 1] += value\n\t\t\t\t\ttarget[position++] = twoByte ? 0xce : 0xcf\n\t\t\t\t\tencode(strLength);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet headerSize\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\n\t\t\t\tif (strLength < 0x20) {\n\t\t\t\t\theaderSize = 1\n\t\t\t\t} else if (strLength < 0x100) {\n\t\t\t\t\theaderSize = 2\n\t\t\t\t} else if (strLength < 0x10000) {\n\t\t\t\t\theaderSize = 3\n\t\t\t\t} else {\n\t\t\t\t\theaderSize = 5\n\t\t\t\t}\n\t\t\t\tlet maxBytes = strLength * 3\n\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\n\t\t\t\t\tlet i, c1, c2, strPosition = position + headerSize\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlength = strPosition - position - headerSize\n\t\t\t\t} else {\n\t\t\t\t\tlength = encodeUtf8(value, position + headerSize, maxBytes)\n\t\t\t\t}\n\n\t\t\t\tif (length < 0x18) {\n\t\t\t\t\ttarget[position++] = 0x60 | length\n\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\tif (headerSize < 2) {\n\t\t\t\t\t\ttarget.copyWithin(position + 2, position + 1, position + 1 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x78\n\t\t\t\t\ttarget[position++] = length\n\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\tif (headerSize < 3) {\n\t\t\t\t\t\ttarget.copyWithin(position + 3, position + 2, position + 2 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x79\n\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t} else {\n\t\t\t\t\tif (headerSize < 5) {\n\t\t\t\t\t\ttarget.copyWithin(position + 5, position + 3, position + 3 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0x7a\n\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\tposition += 4\n\t\t\t\t}\n\t\t\t\tposition += length\n\t\t\t} else if (type === 'number') {\n\t\t\t\tif (!this.alwaysUseFloat && value >>> 0 === value) {// positive integer, 32-bit or less\n\t\t\t\t\t// positive uint\n\t\t\t\t\tif (value < 0x18) {\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x100) {\n\t\t\t\t\t\ttarget[position++] = 0x18\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0x19\n\t\t\t\t\t\ttarget[position++] = value >> 8\n\t\t\t\t\t\ttarget[position++] = value & 0xff\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0x1a\n\t\t\t\t\t\ttargetView.setUint32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else if (!this.alwaysUseFloat && value >> 0 === value) { // negative integer\n\t\t\t\t\tif (value >= -0x18) {\n\t\t\t\t\t\ttarget[position++] = 0x1f - value\n\t\t\t\t\t} else if (value >= -0x100) {\n\t\t\t\t\t\ttarget[position++] = 0x38\n\t\t\t\t\t\ttarget[position++] = ~value\n\t\t\t\t\t} else if (value >= -0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0x39\n\t\t\t\t\t\ttargetView.setUint16(position, ~value)\n\t\t\t\t\t\tposition += 2\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0x3a\n\t\t\t\t\t\ttargetView.setUint32(position, ~value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet useFloat32\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\n\t\t\t\t\t\ttarget[position++] = 0xfa\n\t\t\t\t\t\ttargetView.setFloat32(position, value)\n\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\tif (useFloat32 < 4 ||\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\t((xShifted = value * mult10[((target[position] & 0x7f) << 1) | (target[position + 1] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tposition-- // move back into position for writing a double\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xfb\n\t\t\t\t\ttargetView.setFloat64(position, value)\n\t\t\t\t\tposition += 8\n\t\t\t\t}\n\t\t\t} else if (type === 'object') {\n\t\t\t\tif (!value)\n\t\t\t\t\ttarget[position++] = 0xf6\n\t\t\t\telse {\n\t\t\t\t\tif (referenceMap) {\n\t\t\t\t\t\tlet referee = referenceMap.get(value)\n\t\t\t\t\t\tif (referee) {\n\t\t\t\t\t\t\ttarget[position++] = 0xd8\n\t\t\t\t\t\t\ttarget[position++] = 29 // http://cbor.schmorp.de/value-sharing\n\t\t\t\t\t\t\ttarget[position++] = 0x19 // 16-bit uint\n\t\t\t\t\t\t\tif (!referee.references) {\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = [])\n\t\t\t\t\t\t\t\treferee.references = []\n\t\t\t\t\t\t\t\tidsToInsert.push(referee)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treferee.references.push(position - start)\n\t\t\t\t\t\t\tposition += 2 // TODO: also support 32-bit\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else \n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position - start })\n\t\t\t\t\t}\n\t\t\t\t\tlet constructor = value.constructor\n\t\t\t\t\tif (constructor === Object) {\n\t\t\t\t\t\twriteObject(value, true)\n\t\t\t\t\t} else if (constructor === Array) {\n\t\t\t\t\t\tlength = value.length\n\t\t\t\t\t\tif (length < 0x18) {\n\t\t\t\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twriteArrayHeader(length)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\t\tencode(value[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (constructor === Map) {\n\t\t\t\t\t\tif (this.mapsAsObjects ? this.useTag259ForMaps !== false : this.useTag259ForMaps) {\n\t\t\t\t\t\t\t// use Tag 259 (https://github.com/shanewholloway/js-cbor-codec/blob/master/docs/CBOR-259-spec--explicit-maps.md) for maps if the user wants it that way\n\t\t\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\t\t\ttarget[position++] = 1\n\t\t\t\t\t\t\ttarget[position++] = 3\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlength = value.size\n\t\t\t\t\t\tif (length < 0x18) {\n\t\t\t\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\t\t\ttarget[position++] = 0xb8\n\t\t\t\t\t\t\ttarget[position++] = length\n\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\ttarget[position++] = 0xb9\n\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[position++] = 0xba\n\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (encoder.keyMap) { \n\t\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\n\t\t\t\t\t\t\t\tencode(encoder.encodeKey(key))\n\t\t\t\t\t\t\t\tencode(entryValue)\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t} else { \n\t\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\n\t\t\t\t\t\t\t\tencode(key) \n\t\t\t\t\t\t\t\tencode(entryValue)\n\t\t\t\t\t\t\t} \t\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i]\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\n\t\t\t\t\t\t\t\tlet extension = extensions[i]\n\t\t\t\t\t\t\t\tlet tag = extension.tag\n\t\t\t\t\t\t\t\tif (tag == undefined)\n\t\t\t\t\t\t\t\t\ttag = extension.getTag && extension.getTag.call(this, value)\n\t\t\t\t\t\t\t\tif (tag < 0x18) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xc0 | tag\n\t\t\t\t\t\t\t\t} else if (tag < 0x100) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd8\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag\n\t\t\t\t\t\t\t\t} else if (tag < 0x10000) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag >> 8\n\t\t\t\t\t\t\t\t\ttarget[position++] = tag & 0xff\n\t\t\t\t\t\t\t\t} else if (tag > -1) {\n\t\t\t\t\t\t\t\t\ttarget[position++] = 0xda\n\t\t\t\t\t\t\t\t\ttargetView.setUint32(position, tag)\n\t\t\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\t\t} // else undefined, don't write tag\n\t\t\t\t\t\t\t\textension.encode.call(this, value, encode, makeRoom)\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value[Symbol.iterator]) {\n\t\t\t\t\t\t\tif (throwOnIterable) {\n\t\t\t\t\t\t\t\tlet error = new Error('Iterable should be serialized as iterator')\n\t\t\t\t\t\t\t\terror.iteratorNotHandled = true;\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0x9f // indefinite length array\n\t\t\t\t\t\t\tfor (let entry of value) {\n\t\t\t\t\t\t\t\tencode(entry)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0xff // stop-code\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (value[Symbol.asyncIterator] || isBlob(value)) {\n\t\t\t\t\t\t\tlet error = new Error('Iterable/blob should be serialized as iterator')\n\t\t\t\t\t\t\terror.iteratorNotHandled = true;\n\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.useToJSON && value.toJSON) {\n\t\t\t\t\t\t\tconst json = value.toJSON()\n\t\t\t\t\t\t\t// if for some reason value.toJSON returns itself it'll loop forever\n\t\t\t\t\t\t\tif (json !== value)\n\t\t\t\t\t\t\t\treturn encode(json)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// no extension found, write as object\n\t\t\t\t\t\twriteObject(value, !value.hasOwnProperty) // if it doesn't have hasOwnProperty, don't do hasOwnProperty checks\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'boolean') {\n\t\t\t\ttarget[position++] = value ? 0xf5 : 0xf4\n\t\t\t} else if (type === 'bigint') {\n\t\t\t\tif (value < (BigInt(1)<<BigInt(64)) && value >= 0) {\n\t\t\t\t\t// use an unsigned int as long as it fits\n\t\t\t\t\ttarget[position++] = 0x1b\n\t\t\t\t\ttargetView.setBigUint64(position, value)\n\t\t\t\t} else if (value > -(BigInt(1)<<BigInt(64)) && value < 0) {\n\t\t\t\t\t// if we can fit an unsigned int, use that\n\t\t\t\t\ttarget[position++] = 0x3b\n\t\t\t\t\ttargetView.setBigUint64(position, -value - BigInt(1))\n\t\t\t\t} else {\n\t\t\t\t\t// overflow\n\t\t\t\t\tif (this.largeBigIntToFloat) {\n\t\t\t\t\t\ttarget[position++] = 0xfb\n\t\t\t\t\t\ttargetView.setFloat64(position, Number(value))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new RangeError(value + ' was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tposition += 8\n\t\t\t} else if (type === 'undefined') {\n\t\t\t\ttarget[position++] = 0xf7\n\t\t\t} else {\n\t\t\t\tthrow new Error('Unknown type: ' + type)\n\t\t\t}\n\t\t}\n\n\t\tconst writeObject = this.useRecords === false ? this.variableMapSize ? (object) => {\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\n\t\t\tlet keys = Object.keys(object)\n\t\t\tlet vals = Object.values(object)\n\t\t\tlet length = keys.length\n\t\t\tif (length < 0x18) {\n\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t} else if (length < 0x100) {\n\t\t\t\ttarget[position++] = 0xb8\n\t\t\t\ttarget[position++] = length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xb9\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xba\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tlet key\n\t\t\tif (encoder.keyMap) { \n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tencode(encoder.encodeKey(keys[i]))\n\t\t\t\t\tencode(vals[i])\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tencode(keys[i])\n\t\t\t\t\tencode(vals[i])\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\t\t(object, safePrototype) => {\n\t\t\ttarget[position++] = 0xb9 // always use map 16, so we can preallocate and set the length afterwards\n\t\t\tlet objectOffset = position - start\n\t\t\tposition += 2\n\t\t\tlet size = 0\n\t\t\tif (encoder.keyMap) { \n\t\t\t\tfor (let key in object) if (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\t\tencode(encoder.encodeKey(key))\n\t\t\t\t\tencode(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t} else { \n\t\t\t\tfor (let key in object) if (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\t\t\tencode(key)\n\t\t\t\t\t\tencode(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget[objectOffset++ + start] = size >> 8\n\t\t\ttarget[objectOffset + start] = size & 0xff\n\t\t} :\n\t\t(object, safePrototype) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet newTransitions = 0\n\t\t\tlet length = 0\n\t\t\tlet parentRecordId\n\t\t\tlet keys\n\t\t\tif (this.keyMap) {\n\t\t\t\tkeys = Object.keys(object).map(k => this.encodeKey(k))\n\t\t\t\tlength = keys.length\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tlet key = keys[i]\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t}\n\t\t\t\t\ttransition = nextTransition\n\t\t\t\t}\t\t\t\t\n\t\t\t} else {\n\t\t\t\tfor (let key in object) if (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\tif (transition[RECORD_SYMBOL] & 0x100000) {// this indicates it is a brancheable/extendable terminal node, so we will use this record id and extend it\n\t\t\t\t\t\t\tparentRecordId = transition[RECORD_SYMBOL] & 0xffff\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t}\n\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\tlength++\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\tif (recordId !== undefined) {\n\t\t\t\trecordId &= 0xffff\n\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\ttarget[position++] = (recordId >> 8) | 0xe0\n\t\t\t\ttarget[position++] = recordId & 0xff\n\t\t\t} else {\n\t\t\t\tif (!keys)\n\t\t\t\t\tkeys = transition.__keys__ || (transition.__keys__ = Object.keys(object))\n\t\t\t\tif (parentRecordId === undefined) {\n\t\t\t\t\trecordId = structures.nextId++\n\t\t\t\t\tif (!recordId) {\n\t\t\t\t\t\trecordId = 0\n\t\t\t\t\t\tstructures.nextId = 1\n\t\t\t\t\t}\n\t\t\t\t\tif (recordId >= MAX_STRUCTURES) {// cycle back around\n\t\t\t\t\t\tstructures.nextId = (recordId = maxSharedStructures) + 1\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trecordId = parentRecordId\n\t\t\t\t}\n\t\t\t\tstructures[recordId] = keys\n\t\t\t\tif (recordId < maxSharedStructures) {\n\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\ttarget[position++] = (recordId >> 8) | 0xe0\n\t\t\t\t\ttarget[position++] = recordId & 0xff\n\t\t\t\t\ttransition = structures.transitions\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tif (transition[RECORD_SYMBOL] === undefined || (transition[RECORD_SYMBOL] & 0x100000))\n\t\t\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\t\t\t\ttransition = transition[keys[i]]\n\t\t\t\t\t}\n\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId | 0x100000 // indicates it is a extendable terminal\n\t\t\t\t\thasSharedUpdate = true\n\t\t\t\t} else {\n\t\t\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\t\t\ttargetView.setUint32(position, 0xd9dfff00) // tag two byte, then record definition id\n\t\t\t\t\tposition += 3\n\t\t\t\t\tif (newTransitions)\n\t\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions\n\t\t\t\t\t// record the removal of the id, we can maintain our shared structure\n\t\t\t\t\tif (recordIdsToRemove.length >= MAX_STRUCTURES - maxSharedStructures)\n\t\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = undefined // we are cycling back through, and have to remove old ones\n\t\t\t\t\trecordIdsToRemove.push(transition)\n\t\t\t\t\twriteArrayHeader(length + 2)\n\t\t\t\t\tencode(0xe000 + recordId)\n\t\t\t\t\tencode(keys)\n\t\t\t\t\tif (safePrototype === null) return; // special exit for iterator\n\t\t\t\t\tfor (let key in object)\n\t\t\t\t\t\tif (safePrototype || object.hasOwnProperty(key))\n\t\t\t\t\t\t\tencode(object[key])\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (length < 0x18) { // write the array header\n\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t} else {\n\t\t\t\twriteArrayHeader(length)\n\t\t\t}\n\t\t\tif (safePrototype === null) return; // special exit for iterator\n\t\t\tfor (let key in object)\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key))\n\t\t\t\t\tencode(object[key])\n\t\t}\n\t\tconst makeRoom = (end) => {\n\t\t\tlet newSize\n\t\t\tif (end > 0x1000000) {\n\t\t\t\t// special handling for really large buffers\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\n\t\t\t\t\tthrow new Error('Encoded buffer would be larger than maximum buffer size')\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000)\n\t\t\t} else // faster handling for smaller buffers\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize)\n\t\t\ttargetView = new DataView(newBuffer.buffer, 0, newSize)\n\t\t\tif (target.copy)\n\t\t\t\ttarget.copy(newBuffer, 0, start, end)\n\t\t\telse\n\t\t\t\tnewBuffer.set(target.slice(start, end))\n\t\t\tposition -= start\n\t\t\tstart = 0\n\t\t\tsafeEnd = newBuffer.length - 10\n\t\t\treturn target = newBuffer\n\t\t}\n\t\tlet chunkThreshold = 100;\n\t\tlet continuedChunkThreshold = 1000;\n\t\tthis.encodeAsIterable = function(value, options) {\n\t\t\treturn startEncoding(value, options, encodeObjectAsIterable);\n\t\t}\n\t\tthis.encodeAsAsyncIterable = function(value, options) {\n\t\t\treturn startEncoding(value, options, encodeObjectAsAsyncIterable);\n\t\t}\n\n\t\tfunction* encodeObjectAsIterable(object, iterateProperties, finalIterable) {\n\t\t\tlet constructor = object.constructor;\n\t\t\tif (constructor === Object) {\n\t\t\t\tlet useRecords = encoder.useRecords !== false;\n\t\t\t\tif (useRecords)\n\t\t\t\t\twriteObject(object, null); // write the record identifier\n\t\t\t\telse\n\t\t\t\t\twriteEntityLength(Object.keys(object).length, 0xa0);\n\t\t\t\tfor (let key in object) {\n\t\t\t\t\tlet value = object[key];\n\t\t\t\t\tif (!useRecords) encode(key);\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tif (iterateProperties[key])\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties[key]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, key);\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t} else if (constructor === Array) {\n\t\t\t\tlet length = object.length;\n\t\t\t\twriteArrayHeader(length);\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tlet value = object[i];\n\t\t\t\t\tif (value && (typeof value === 'object' || position - start > chunkThreshold)) {\n\t\t\t\t\t\tif (iterateProperties.element)\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties.element);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, 'element');\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t} else if (object[Symbol.iterator]) {\n\t\t\t\ttarget[position++] = 0x9f; // start indefinite array\n\t\t\t\tfor (let value of object) {\n\t\t\t\t\tif (value && (typeof value === 'object' || position - start > chunkThreshold)) {\n\t\t\t\t\t\tif (iterateProperties.element)\n\t\t\t\t\t\t\tyield* encodeObjectAsIterable(value, iterateProperties.element);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tyield* tryEncode(value, iterateProperties, 'element');\n\t\t\t\t\t} else encode(value);\n\t\t\t\t}\n\t\t\t\ttarget[position++] = 0xff; // stop byte\n\t\t\t} else if (isBlob(object)){\n\t\t\t\twriteEntityLength(object.size, 0x40); // encode as binary data\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\tyield object; // directly return blobs, they have to be encoded asynchronously\n\t\t\t\trestartEncoding();\n\t\t\t} else if (object[Symbol.asyncIterator]) {\n\t\t\t\ttarget[position++] = 0x9f; // start indefinite array\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\tyield object; // directly return async iterators, they have to be encoded asynchronously\n\t\t\t\trestartEncoding();\n\t\t\t\ttarget[position++] = 0xff; // stop byte\n\t\t\t} else {\n\t\t\t\tencode(object);\n\t\t\t}\n\t\t\tif (finalIterable && position > start) yield target.subarray(start, position);\n\t\t\telse if (position - start > chunkThreshold) {\n\t\t\t\tyield target.subarray(start, position);\n\t\t\t\trestartEncoding();\n\t\t\t}\n\t\t}\n\t\tfunction* tryEncode(value, iterateProperties, key) {\n\t\t\tlet restart = position - start;\n\t\t\ttry {\n\t\t\t\tencode(value);\n\t\t\t\tif (position - start > chunkThreshold) {\n\t\t\t\t\tyield target.subarray(start, position);\n\t\t\t\t\trestartEncoding();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (error.iteratorNotHandled) {\n\t\t\t\t\titerateProperties[key] = {};\n\t\t\t\t\tposition = start + restart; // restart our position so we don't have partial data from last encode\n\t\t\t\t\tyield* encodeObjectAsIterable.call(this, value, iterateProperties[key]);\n\t\t\t\t} else throw error;\n\t\t\t}\n\t\t}\n\t\tfunction restartEncoding() {\n\t\t\tchunkThreshold = continuedChunkThreshold;\n\t\t\tencoder.encode(null, THROW_ON_ITERABLE); // restart encoding\n\t\t}\n\t\tfunction startEncoding(value, options, encodeIterable) {\n\t\t\tif (options && options.chunkThreshold) // explicitly specified chunk sizes\n\t\t\t\tchunkThreshold = continuedChunkThreshold = options.chunkThreshold;\n\t\t\telse // we start with a smaller threshold to get initial bytes sent quickly\n\t\t\t\tchunkThreshold = 100;\n\t\t\tif (value && typeof value === 'object') {\n\t\t\t\tencoder.encode(null, THROW_ON_ITERABLE); // start encoding\n\t\t\t\treturn encodeIterable(value, encoder.iterateProperties || (encoder.iterateProperties = {}), true);\n\t\t\t}\n\t\t\treturn [encoder.encode(value)];\n\t\t}\n\n\t\tasync function* encodeObjectAsAsyncIterable(value, iterateProperties) {\n\t\t\tfor (let encodedValue of encodeObjectAsIterable(value, iterateProperties, true)) {\n\t\t\t\tlet constructor = encodedValue.constructor;\n\t\t\t\tif (constructor === ByteArray || constructor === Uint8Array)\n\t\t\t\t\tyield encodedValue;\n\t\t\t\telse if (isBlob(encodedValue)) {\n\t\t\t\t\tlet reader = encodedValue.stream().getReader();\n\t\t\t\t\tlet next;\n\t\t\t\t\twhile (!(next = await reader.read()).done) {\n\t\t\t\t\t\tyield next.value;\n\t\t\t\t\t}\n\t\t\t\t} else if (encodedValue[Symbol.asyncIterator]) {\n\t\t\t\t\tfor await (let asyncValue of encodedValue) {\n\t\t\t\t\t\trestartEncoding();\n\t\t\t\t\t\tif (asyncValue)\n\t\t\t\t\t\t\tyield* encodeObjectAsAsyncIterable(asyncValue, iterateProperties.async || (iterateProperties.async = {}));\n\t\t\t\t\t\telse yield encoder.encode(asyncValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tyield encodedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tuseBuffer(buffer) {\n\t\t// this means we are finished using our own buffer and we can write over it safely\n\t\ttarget = buffer\n\t\ttargetView = new DataView(target.buffer, target.byteOffset, target.byteLength)\n\t\tposition = 0\n\t}\n\tclearSharedData() {\n\t\tif (this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.sharedValues)\n\t\t\tthis.sharedValues = undefined\n\t}\n\tupdateSharedData() {\n\t\tlet lastVersion = this.sharedVersion || 0\n\t\tthis.sharedVersion = lastVersion + 1\n\t\tlet structuresCopy = this.structures.slice(0)\n\t\tlet sharedData = new SharedData(structuresCopy, this.sharedValues, this.sharedVersion)\n\t\tlet saveResults = this.saveShared(sharedData,\n\t\t\t\texistingShared => (existingShared && existingShared.version || 0) == lastVersion)\n\t\tif (saveResults === false) {\n\t\t\t// get updated structures and try again if the update failed\n\t\t\tsharedData = this.getShared() || {}\n\t\t\tthis.structures = sharedData.structures || []\n\t\t\tthis.sharedValues = sharedData.packedValues\n\t\t\tthis.sharedVersion = sharedData.version\n\t\t\tthis.structures.nextId = this.structures.length\n\t\t} else {\n\t\t\t// restore structures\n\t\t\tstructuresCopy.forEach((structure, i) => this.structures[i] = structure)\n\t\t}\n\t\t// saveShared may fail to write and reload, or may have reloaded to check compatibility and overwrite saved data, either way load the correct shared data\n\t\treturn saveResults\n\t}\n}\nfunction writeEntityLength(length, majorValue) {\n\tif (length < 0x18)\n\t\ttarget[position++] = majorValue | length\n\telse if (length < 0x100) {\n\t\ttarget[position++] = majorValue | 0x18\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = majorValue | 0x19\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = majorValue | 0x1a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\n}\nclass SharedData {\n\tconstructor(structures, values, version) {\n\t\tthis.structures = structures\n\t\tthis.packedValues = values\n\t\tthis.version = version\n\t}\n}\n\nfunction writeArrayHeader(length) {\n\tif (length < 0x18)\n\t\ttarget[position++] = 0x80 | length\n\telse if (length < 0x100) {\n\t\ttarget[position++] = 0x98\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = 0x99\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = 0x9a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n}\n\nconst BlobConstructor = typeof Blob === 'undefined' ? function(){} : Blob;\nfunction isBlob(object) {\n\tif (object instanceof BlobConstructor)\n\t\treturn true;\n\tlet tag = object[Symbol.toStringTag];\n\treturn tag === 'Blob' || tag === 'File';\n}\nfunction findRepetitiveStrings(value, packedValues) {\n\tswitch(typeof value) {\n\t\tcase 'string':\n\t\t\tif (value.length > 3) {\n\t\t\t\tif (packedValues.objectMap[value] > -1 || packedValues.values.length >= packedValues.maxValues)\n\t\t\t\t\treturn\n\t\t\t\tlet packedStatus = packedValues.get(value)\n\t\t\t\tif (packedStatus) {\n\t\t\t\t\tif (++packedStatus.count == 2) {\n\t\t\t\t\t\tpackedValues.values.push(value)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpackedValues.set(value, {\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t})\n\t\t\t\t\tif (packedValues.samplingPackedValues) {\n\t\t\t\t\t\tlet status = packedValues.samplingPackedValues.get(value)\n\t\t\t\t\t\tif (status)\n\t\t\t\t\t\t\tstatus.count++\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tpackedValues.samplingPackedValues.set(value, {\n\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'object':\n\t\t\tif (value) {\n\t\t\t\tif (value instanceof Array) {\n\t\t\t\t\tfor (let i = 0, l = value.length; i < l; i++) {\n\t\t\t\t\t\tfindRepetitiveStrings(value[i], packedValues)\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tlet includeKeys = !packedValues.encoder.useRecords\n\t\t\t\t\tfor (var key in value) {\n\t\t\t\t\t\tif (value.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tif (includeKeys)\n\t\t\t\t\t\t\t\tfindRepetitiveStrings(key, packedValues)\n\t\t\t\t\t\t\tfindRepetitiveStrings(value[key], packedValues)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'function': console.log(value)\n\t}\n}\nconst isLittleEndianMachine = new Uint8Array(new Uint16Array([1]).buffer)[0] == 1\nextensionClasses = [ Date, Set, Error, RegExp, Tag, ArrayBuffer,\n\tUint8Array, Uint8ClampedArray, Uint16Array, Uint32Array,\n\ttypeof BigUint64Array == 'undefined' ? function() {} : BigUint64Array, Int8Array, Int16Array, Int32Array,\n\ttypeof BigInt64Array == 'undefined' ? function() {} : BigInt64Array,\n\tFloat32Array, Float64Array, SharedData ]\n\n//Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/\nextensions = [{ // Date\n\ttag: 1,\n\tencode(date, encode) {\n\t\tlet seconds = date.getTime() / 1000\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 32\n\t\t\ttarget[position++] = 0x1a\n\t\t\ttargetView.setUint32(position, seconds)\n\t\t\tposition += 4\n\t\t} else {\n\t\t\t// Timestamp float64\n\t\t\ttarget[position++] = 0xfb\n\t\t\ttargetView.setFloat64(position, seconds)\n\t\t\tposition += 8\n\t\t}\n\t}\n}, { // Set\n\ttag: 258, // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n\tencode(set, encode) {\n\t\tlet array = Array.from(set)\n\t\tencode(array)\n\t}\n}, { // Error\n\ttag: 27, // http://cbor.schmorp.de/generic-object\n\tencode(error, encode) {\n\t\tencode([ error.name, error.message ])\n\t}\n}, { // RegExp\n\ttag: 27, // http://cbor.schmorp.de/generic-object\n\tencode(regex, encode) {\n\t\tencode([ 'RegExp', regex.source, regex.flags ])\n\t}\n}, { // Tag\n\tgetTag(tag) {\n\t\treturn tag.tag\n\t},\n\tencode(tag, encode) {\n\t\tencode(tag.value)\n\t}\n}, { // ArrayBuffer\n\tencode(arrayBuffer, encode, makeRoom) {\n\t\twriteBuffer(arrayBuffer, makeRoom)\n\t}\n}, { // Uint8Array\n\tgetTag(typedArray) {\n\t\tif (typedArray.constructor === Uint8Array) {\n\t\t\tif (this.tagUint8Array || hasNodeBuffer && this.tagUint8Array !== false)\n\t\t\t\treturn 64;\n\t\t} // else no tag\n\t},\n\tencode(typedArray, encode, makeRoom) {\n\t\twriteBuffer(typedArray, makeRoom)\n\t}\n},\n\ttypedArrayEncoder(68, 1),\n\ttypedArrayEncoder(69, 2),\n\ttypedArrayEncoder(70, 4),\n\ttypedArrayEncoder(71, 8),\n\ttypedArrayEncoder(72, 1),\n\ttypedArrayEncoder(77, 2),\n\ttypedArrayEncoder(78, 4),\n\ttypedArrayEncoder(79, 8),\n\ttypedArrayEncoder(85, 4),\n\ttypedArrayEncoder(86, 8),\n{\n\tencode(sharedData, encode) { // write SharedData\n\t\tlet packedValues = sharedData.packedValues || []\n\t\tlet sharedStructures = sharedData.structures || []\n\t\tif (packedValues.values.length > 0) {\n\t\t\ttarget[position++] = 0xd8 // one-byte tag\n\t\t\ttarget[position++] = 51 // tag 51 for packed shared structures https://www.potaroo.net/ietf/ids/draft-ietf-cbor-packed-03.txt\n\t\t\twriteArrayHeader(4)\n\t\t\tlet valuesArray = packedValues.values\n\t\t\tencode(valuesArray)\n\t\t\twriteArrayHeader(0) // prefixes\n\t\t\twriteArrayHeader(0) // suffixes\n\t\t\tpackedObjectMap = Object.create(sharedPackedObjectMap || null)\n\t\t\tfor (let i = 0, l = valuesArray.length; i < l; i++) {\n\t\t\t\tpackedObjectMap[valuesArray[i]] = i\n\t\t\t}\n\t\t}\n\t\tif (sharedStructures) {\n\t\t\ttargetView.setUint32(position, 0xd9dffe00)\n\t\t\tposition += 3\n\t\t\tlet definitions = sharedStructures.slice(0)\n\t\t\tdefinitions.unshift(0xe000)\n\t\t\tdefinitions.push(new Tag(sharedData.version, 0x53687264))\n\t\t\tencode(definitions)\n\t\t} else\n\t\t\tencode(new Tag(sharedData.version, 0x53687264))\n\t\t}\n\t}]\nfunction typedArrayEncoder(tag, size) {\n\tif (!isLittleEndianMachine && size > 1)\n\t\ttag -= 4 // the big endian equivalents are 4 less\n\treturn {\n\t\ttag: tag,\n\t\tencode: function writeExtBuffer(typedArray, encode) {\n\t\t\tlet length = typedArray.byteLength\n\t\t\tlet offset = typedArray.byteOffset || 0\n\t\t\tlet buffer = typedArray.buffer || typedArray\n\t\t\tencode(hasNodeBuffer ? Buffer.from(buffer, offset, length) :\n\t\t\t\tnew Uint8Array(buffer, offset, length))\n\t\t}\n\t}\n}\nfunction writeBuffer(buffer, makeRoom) {\n\tlet length = buffer.byteLength\n\tif (length < 0x18) {\n\t\ttarget[position++] = 0x40 + length\n\t} else if (length < 0x100) {\n\t\ttarget[position++] = 0x58\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\ttarget[position++] = 0x59\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\ttarget[position++] = 0x5a\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\tif (position + length >= target.length) {\n\t\tmakeRoom(position + length)\n\t}\n\t// if it is already a typed array (has an ArrayBuffer), use that, but if it is an ArrayBuffer itself,\n\t// must wrap it to set it.\n\ttarget.set(buffer.buffer ? buffer : new Uint8Array(buffer), position)\n\tposition += length\n}\n\nfunction insertIds(serialized, idsToInsert) {\n\t// insert the ids that need to be referenced for structured clones\n\tlet nextId\n\tlet distanceToMove = idsToInsert.length * 2\n\tlet lastEnd = serialized.length - distanceToMove\n\tidsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1)\n\tfor (let id = 0; id < idsToInsert.length; id++) {\n\t\tlet referee = idsToInsert[id]\n\t\treferee.id = id\n\t\tfor (let position of referee.references) {\n\t\t\tserialized[position++] = id >> 8\n\t\t\tserialized[position] = id & 0xff\n\t\t}\n\t}\n\twhile (nextId = idsToInsert.pop()) {\n\t\tlet offset = nextId.offset\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd)\n\t\tdistanceToMove -= 2\n\t\tlet position = offset + distanceToMove\n\t\tserialized[position++] = 0xd8\n\t\tserialized[position++] = 28 // http://cbor.schmorp.de/value-sharing\n\t\tlastEnd = offset\n\t}\n\treturn serialized\n}\nfunction writeBundles(start, encode) {\n\ttargetView.setUint32(bundledStrings.position + start, position - bundledStrings.position - start + 1) // the offset to bundle\n\tlet writeStrings = bundledStrings\n\tbundledStrings = null\n\tencode(writeStrings[0])\n\tencode(writeStrings[1])\n}\n\nexport function addExtension(extension) {\n\tif (extension.Class) {\n\t\tif (!extension.encode)\n\t\t\tthrow new Error('Extension has no encode function')\n\t\textensionClasses.unshift(extension.Class)\n\t\textensions.unshift(extension)\n\t}\n\tdecodeAddExtension(extension)\n}\nlet defaultEncoder = new Encoder({ useRecords: false })\nexport const encode = defaultEncoder.encode\nexport const encodeAsIterable = defaultEncoder.encodeAsIterable\nexport const encodeAsAsyncIterable = defaultEncoder.encodeAsAsyncIterable\nexport { FLOAT32_OPTIONS } from './decode.js'\nimport { FLOAT32_OPTIONS } from './decode.js'\nexport const { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS\nexport const REUSE_BUFFER_MODE = 512\nexport const RESET_BUFFER_MODE = 1024\nexport const THROW_ON_ITERABLE = 2048\n\n\n","import { Encoder, decode as cborXdecode } from \"cbor-x\";\nexport function encode(obj) {\n    const encoder = new Encoder({ tagUint8Array: false, useRecords: false });\n    return encoder.encode(obj);\n}\nexport function decode(buf) {\n    return cborXdecode(buf);\n}\n","export const arraysAreEqual = (a, b) => a.length === b.length && a.every((element, index) => element === b[index]);\n","import { arraysAreEqual } from \"./arraysAreEqual.js\";\nexport const headsAreSame = (a, b) => {\n    return arraysAreEqual(a, b);\n};\n","/* c8 ignore start */\n/**\n * If `promise` is resolved before `t` ms elapse, the timeout is cleared and the result of the\n * promise is returned. If the timeout ends first, a `TimeoutError` is thrown.\n */\nexport const withTimeout = async (promise, t) => {\n    let timeoutId;\n    const timeoutPromise = new Promise((_, reject) => {\n        timeoutId = setTimeout(() => reject(new TimeoutError(`withTimeout: timed out after ${t}ms`)), t);\n    });\n    try {\n        return await Promise.race([promise, timeoutPromise]);\n    }\n    finally {\n        clearTimeout(timeoutId);\n    }\n};\nexport class TimeoutError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"TimeoutError\";\n    }\n}\n/* c8 ignore end */\n","import * as A from \"@automerge/automerge/next\";\nimport debug from \"debug\";\nimport { EventEmitter } from \"eventemitter3\";\nimport { assign, createMachine, interpret, } from \"xstate\";\nimport { waitFor } from \"xstate/lib/waitFor.js\";\nimport { stringifyAutomergeUrl } from \"./AutomergeUrl.js\";\nimport { encode } from \"./helpers/cbor.js\";\nimport { headsAreSame } from \"./helpers/headsAreSame.js\";\nimport { withTimeout } from \"./helpers/withTimeout.js\";\n/** DocHandle is a wrapper around a single Automerge document that lets us\n * listen for changes and notify the network and storage of new changes.\n *\n * @remarks\n * A `DocHandle` represents a document which is being managed by a {@link Repo}.\n * To obtain `DocHandle` use {@link Repo.find} or {@link Repo.create}.\n *\n * To modify the underlying document use either {@link DocHandle.change} or\n * {@link DocHandle.changeAt}. These methods will notify the `Repo` that some\n * change has occured and the `Repo` will save any new changes to the\n * attached {@link StorageAdapter} and send sync messages to connected peers.\n * */\nexport class DocHandle//\n extends EventEmitter {\n    documentId;\n    #log;\n    #machine;\n    #timeoutDelay = 60_000;\n    #remoteHeads = {};\n    /** The URL of this document\n     *\n     * @remarks\n     * This can be used to request the document from an instance of {@link Repo}\n     */\n    get url() {\n        return stringifyAutomergeUrl({ documentId: this.documentId });\n    }\n    /** @hidden */\n    constructor(documentId, options = {}) {\n        super();\n        this.documentId = documentId;\n        this.documentId = documentId;\n        if (\"timeoutDelay\" in options && options.timeoutDelay) {\n            this.#timeoutDelay = options.timeoutDelay;\n        }\n        let doc;\n        const isNew = \"isNew\" in options && options.isNew;\n        if (isNew) {\n            // T should really be constrained to extend `Record<string, unknown>` (an automerge doc can't be\n            // e.g. a primitive, an array, etc. - it must be an object). But adding that constraint creates\n            // a bunch of other problems elsewhere so for now we'll just cast it here to make Automerge happy.\n            doc = A.from(options.initialValue);\n            doc = A.emptyChange(doc);\n        }\n        else {\n            doc = A.init();\n        }\n        this.#log = debug(`automerge-repo:dochandle:${this.documentId.slice(0, 5)}`);\n        /**\n         * Internally we use a state machine to orchestrate document loading and/or syncing, in order to\n         * avoid requesting data we already have, or surfacing intermediate values to the consumer.\n         *\n         *                          âââââââââââââââââââââââ¬âââââââââTIMEOUTâââââºâââââââââââââââ\n         *                      âââââ´ââââââ           âââââ´âââââââââ            â unavailable â\n         *  âââââââââ  âââFINDâââ¤ loading ââREQUESTâââºâ requesting ââUPDATEâââ  âââââââââââââââ\n         *  â idle  ââââ¤        âââââ¬ââââââ           ââââââââââââââ         â\n         *  âââââââââ  â            â                                        âââºââââââââââ\n         *             â            ââââââââLOADââââââââââââââââââââââââââââââââºâ ready  â\n         *             âââCREATEââââââââââââââââââââââââââââââââââââââââââââââââºââââââââââ\n         */\n        this.#machine = interpret(createMachine({\n            predictableActionArguments: true,\n            id: \"docHandle\",\n            initial: IDLE,\n            context: { documentId: this.documentId, doc },\n            states: {\n                idle: {\n                    on: {\n                        // If we're creating a new document, we don't need to load anything\n                        CREATE: { target: READY },\n                        // If we're accessing an existing document, we need to request it from storage\n                        // and/or the network\n                        FIND: { target: LOADING },\n                        DELETE: { actions: \"onDelete\", target: DELETED },\n                    },\n                },\n                loading: {\n                    on: {\n                        // UPDATE is called by the Repo if the document is found in storage\n                        UPDATE: { actions: \"onUpdate\", target: READY },\n                        // REQUEST is called by the Repo if the document is not found in storage\n                        REQUEST: { target: REQUESTING },\n                        // AWAIT_NETWORK is called by the repo if the document is not found in storage but the network is not yet ready\n                        AWAIT_NETWORK: { target: AWAITING_NETWORK },\n                        DELETE: { actions: \"onDelete\", target: DELETED },\n                    },\n                    after: [\n                        {\n                            delay: this.#timeoutDelay,\n                            target: UNAVAILABLE,\n                        },\n                    ],\n                },\n                awaitingNetwork: {\n                    on: {\n                        NETWORK_READY: { target: REQUESTING },\n                    },\n                },\n                requesting: {\n                    on: {\n                        MARK_UNAVAILABLE: {\n                            target: UNAVAILABLE,\n                            actions: \"onUnavailable\",\n                        },\n                        // UPDATE is called by the Repo when we receive changes from the network\n                        UPDATE: { actions: \"onUpdate\" },\n                        // REQUEST_COMPLETE is called from `onUpdate` when the doc has been fully loaded from the network\n                        REQUEST_COMPLETE: { target: READY },\n                        DELETE: { actions: \"onDelete\", target: DELETED },\n                    },\n                    after: [\n                        {\n                            delay: this.#timeoutDelay,\n                            target: UNAVAILABLE,\n                        },\n                    ],\n                },\n                ready: {\n                    on: {\n                        // UPDATE is called by the Repo when we receive changes from the network\n                        UPDATE: { actions: \"onUpdate\", target: READY },\n                        DELETE: { actions: \"onDelete\", target: DELETED },\n                    },\n                },\n                deleted: {\n                    type: \"final\",\n                },\n                unavailable: {\n                    on: {\n                        UPDATE: { actions: \"onUpdate\" },\n                        // REQUEST_COMPLETE is called from `onUpdate` when the doc has been fully loaded from the network\n                        REQUEST_COMPLETE: { target: READY },\n                        DELETE: { actions: \"onDelete\", target: DELETED },\n                    },\n                },\n            },\n        }, {\n            actions: {\n                /** Put the updated doc on context */\n                onUpdate: assign((context, { payload }) => {\n                    const { doc: oldDoc } = context;\n                    const { callback } = payload;\n                    const newDoc = callback(oldDoc);\n                    return { doc: newDoc };\n                }),\n                onDelete: assign(() => {\n                    this.emit(\"delete\", { handle: this });\n                    return { doc: undefined };\n                }),\n                onUnavailable: assign(context => {\n                    const { doc } = context;\n                    this.emit(\"unavailable\", { handle: this });\n                    return { doc };\n                }),\n            },\n        }))\n            .onTransition(({ value: state, history, context }, event) => {\n            const oldDoc = history?.context?.doc;\n            const newDoc = context.doc;\n            this.#log(`${history?.value}: ${event.type} â ${state}`, newDoc);\n            const docChanged = newDoc &&\n                oldDoc &&\n                !headsAreSame(A.getHeads(newDoc), A.getHeads(oldDoc));\n            if (docChanged) {\n                this.emit(\"heads-changed\", { handle: this, doc: newDoc });\n                const patches = A.diff(newDoc, A.getHeads(oldDoc), A.getHeads(newDoc));\n                if (patches.length > 0) {\n                    const source = \"change\"; // TODO: pass along the source (load/change/network)\n                    this.emit(\"change\", {\n                        handle: this,\n                        doc: newDoc,\n                        patches,\n                        patchInfo: { before: oldDoc, after: newDoc, source },\n                    });\n                }\n                if (!this.isReady()) {\n                    this.#machine.send(REQUEST_COMPLETE);\n                }\n            }\n        })\n            .start();\n        this.#machine.send(isNew ? CREATE : FIND);\n    }\n    // PRIVATE\n    /** Returns the current document, regardless of state */\n    get #doc() {\n        return this.#machine?.getSnapshot().context.doc;\n    }\n    /** Returns the docHandle's state (READY, etc.) */\n    get #state() {\n        return this.#machine?.getSnapshot().value;\n    }\n    /** Returns a promise that resolves when the docHandle is in one of the given states */\n    #statePromise(awaitStates) {\n        const awaitStatesArray = Array.isArray(awaitStates) ? awaitStates : [awaitStates];\n        return waitFor(this.#machine, s => awaitStatesArray.some((state) => s.matches(state)), \n        // use a longer delay here so as not to race with other delays\n        { timeout: this.#timeoutDelay * 2 });\n    }\n    // PUBLIC\n    /**\n     * Checks if the document is ready for accessing or changes.\n     * Note that for documents already stored locally this occurs before synchronization\n     * with any peers. We do not currently have an equivalent `whenSynced()`.\n     */\n    isReady = () => this.inState([HandleState.READY]);\n    /**\n     * Checks if this document has been marked as deleted.\n     * Deleted documents are removed from local storage and the sync process.\n     * It's not currently possible at runtime to undelete a document.\n     * @returns true if the document has been marked as deleted\n     */\n    isDeleted = () => this.inState([HandleState.DELETED]);\n    isUnavailable = () => this.inState([HandleState.UNAVAILABLE]);\n    inState = (states) => states.some(this.#machine?.getSnapshot().matches);\n    /** @hidden */\n    get state() {\n        return this.#machine?.getSnapshot().value;\n    }\n    /**\n     * Use this to block until the document handle has finished loading.\n     * The async equivalent to checking `inState()`.\n     * @param awaitStates = [READY]\n     * @returns\n     */\n    async whenReady(awaitStates = [READY]) {\n        await withTimeout(this.#statePromise(awaitStates), this.#timeoutDelay);\n    }\n    /**\n     * Returns the current state of the Automerge document this handle manages.\n     * Note that this waits for the handle to be ready if necessary, and currently, if\n     * loading (or synchronization) fails, will never resolve.\n     *\n     * @param {awaitStates=[READY]} optional states to wait for, such as \"LOADING\". mostly for internal use.\n     */\n    async doc(awaitStates = [READY, UNAVAILABLE]) {\n        try {\n            // wait for the document to enter one of the desired states\n            await this.#statePromise(awaitStates);\n        }\n        catch (error) {\n            // if we timed out (or have determined the document is currently unavailable), return undefined\n            return undefined;\n        }\n        // Return the document\n        return !this.isUnavailable() ? this.#doc : undefined;\n    }\n    /**\n     * Returns the current state of the Automerge document this handle manages, or undefined.\n     * Useful in a synchronous context. Consider using `await handle.doc()` instead, check `isReady()`,\n     * or use `whenReady()` if you want to make sure loading is complete first.\n     *\n     * Do not confuse this with the SyncState of the document, which describes the state of the synchronization process.\n     *\n     * Note that `undefined` is not a valid Automerge document so the return from this function is unambigous.\n     * @returns the current document, or undefined if the document is not ready\n     */\n    docSync() {\n        if (!this.isReady()) {\n            return undefined;\n        }\n        return this.#doc;\n    }\n    /** `update` is called by the repo when we receive changes from the network\n     * @hidden\n     * */\n    update(callback) {\n        this.#machine.send(UPDATE, {\n            payload: { callback },\n        });\n    }\n    /** `setRemoteHeads` is called by the repo either when a doc handle changes or we receive new remote heads\n     * @hidden\n     */\n    setRemoteHeads(storageId, heads) {\n        this.#remoteHeads[storageId] = heads;\n        this.emit(\"remote-heads\", { storageId, heads });\n    }\n    /** Returns the heads of the storageId */\n    getRemoteHeads(storageId) {\n        return this.#remoteHeads[storageId];\n    }\n    /** `change` is called by the repo when the document is changed locally  */\n    change(callback, options = {}) {\n        if (!this.isReady()) {\n            throw new Error(`DocHandle#${this.documentId} is not ready. Check \\`handle.isReady()\\` before accessing the document.`);\n        }\n        this.#machine.send(UPDATE, {\n            payload: {\n                callback: (doc) => {\n                    return A.change(doc, options, callback);\n                },\n            },\n        });\n    }\n    /** Make a change as if the document were at `heads`\n     *\n     * @returns A set of heads representing the concurrent change that was made.\n     */\n    changeAt(heads, callback, options = {}) {\n        if (!this.isReady()) {\n            throw new Error(`DocHandle#${this.documentId} is not ready. Check \\`handle.isReady()\\` before accessing the document.`);\n        }\n        let resultHeads = undefined;\n        this.#machine.send(UPDATE, {\n            payload: {\n                callback: (doc) => {\n                    const result = A.changeAt(doc, heads, options, callback);\n                    resultHeads = result.newHeads;\n                    return result.newDoc;\n                },\n            },\n        });\n        return resultHeads;\n    }\n    /** Merge another document into this document\n     *\n     * @param otherHandle - the handle of the document to merge into this one\n     *\n     * @remarks\n     * This is a convenience method for\n     * `handle.change(doc => A.merge(doc, otherHandle.docSync()))`. Any peers\n     * whom we are sharing changes with will be notified of the changes resulting\n     * from the merge.\n     *\n     * @throws if either document is not ready or if `otherHandle` is unavailable (`otherHandle.docSync() === undefined`)\n     */\n    merge(otherHandle) {\n        if (!this.isReady() || !otherHandle.isReady()) {\n            throw new Error(\"Both handles must be ready to merge\");\n        }\n        const mergingDoc = otherHandle.docSync();\n        if (!mergingDoc) {\n            throw new Error(\"The document to be merged in is null, aborting.\");\n        }\n        this.update(doc => {\n            return A.merge(doc, mergingDoc);\n        });\n    }\n    unavailable() {\n        this.#machine.send(MARK_UNAVAILABLE);\n    }\n    /** `request` is called by the repo when the document is not found in storage\n     * @hidden\n     * */\n    request() {\n        if (this.#state === LOADING)\n            this.#machine.send(REQUEST);\n    }\n    /** @hidden */\n    awaitNetwork() {\n        if (this.#state === LOADING)\n            this.#machine.send(AWAIT_NETWORK);\n    }\n    /** @hidden */\n    networkReady() {\n        if (this.#state === AWAITING_NETWORK)\n            this.#machine.send(NETWORK_READY);\n    }\n    /** `delete` is called by the repo when the document is deleted */\n    delete() {\n        this.#machine.send(DELETE);\n    }\n    /** `broadcast` sends an arbitrary ephemeral message out to all reachable peers who would receive sync messages from you\n     * it has no guarantee of delivery, and is not persisted to the underlying automerge doc in any way.\n     * messages will have a sending PeerId but this is *not* a useful user identifier.\n     * a user could have multiple tabs open and would appear as multiple PeerIds.\n     * every message source must have a unique PeerId.\n     */\n    broadcast(message) {\n        this.emit(\"ephemeral-message-outbound\", {\n            handle: this,\n            data: encode(message),\n        });\n    }\n}\n// STATE MACHINE TYPES\n// state\n/**\n * The state of a document handle\n * @enum\n *\n */\nexport const HandleState = {\n    /** The handle has been created but not yet loaded or requested */\n    IDLE: \"idle\",\n    /** We are waiting for storage to finish loading */\n    LOADING: \"loading\",\n    /** We are waiting for the network to be come ready */\n    AWAITING_NETWORK: \"awaitingNetwork\",\n    /** We are waiting for someone in the network to respond to a sync request */\n    REQUESTING: \"requesting\",\n    /** The document is available */\n    READY: \"ready\",\n    /** The document has been deleted from the repo */\n    DELETED: \"deleted\",\n    /** The document was not available in storage or from any connected peers */\n    UNAVAILABLE: \"unavailable\",\n};\n// events\nexport const Event = {\n    CREATE: \"CREATE\",\n    FIND: \"FIND\",\n    REQUEST: \"REQUEST\",\n    REQUEST_COMPLETE: \"REQUEST_COMPLETE\",\n    AWAIT_NETWORK: \"AWAIT_NETWORK\",\n    NETWORK_READY: \"NETWORK_READY\",\n    UPDATE: \"UPDATE\",\n    TIMEOUT: \"TIMEOUT\",\n    DELETE: \"DELETE\",\n    MARK_UNAVAILABLE: \"MARK_UNAVAILABLE\",\n};\n// CONSTANTS\nexport const { IDLE, LOADING, AWAITING_NETWORK, REQUESTING, READY, DELETED, UNAVAILABLE, } = HandleState;\nconst { CREATE, FIND, REQUEST, UPDATE, TIMEOUT, DELETE, REQUEST_COMPLETE, MARK_UNAVAILABLE, AWAIT_NETWORK, NETWORK_READY, } = Event;\n","import { EventEmitter } from \"eventemitter3\";\nimport debug from \"debug\";\nexport class RemoteHeadsSubscriptions extends EventEmitter {\n    // Storage IDs we have received remote heads from\n    #knownHeads = new Map();\n    // Storage IDs we have subscribed to via Repo.subscribeToRemoteHeads\n    #ourSubscriptions = new Set();\n    // Storage IDs other peers have subscribed to by sending us a control message\n    #theirSubscriptions = new Map();\n    // Peers we will always share remote heads with even if they are not subscribed\n    #generousPeers = new Set();\n    // Documents each peer has open, we need this information so we only send remote heads of documents that the peer knows\n    #subscribedDocsByPeer = new Map();\n    #log = debug(\"automerge-repo:remote-heads-subscriptions\");\n    subscribeToRemotes(remotes) {\n        this.#log(\"subscribeToRemotes\", remotes);\n        const remotesToAdd = [];\n        for (const remote of remotes) {\n            if (!this.#ourSubscriptions.has(remote)) {\n                this.#ourSubscriptions.add(remote);\n                remotesToAdd.push(remote);\n            }\n        }\n        if (remotesToAdd.length > 0) {\n            this.emit(\"change-remote-subs\", {\n                add: remotesToAdd,\n                peers: Array.from(this.#generousPeers),\n            });\n        }\n    }\n    unsubscribeFromRemotes(remotes) {\n        this.#log(\"subscribeToRemotes\", remotes);\n        const remotesToRemove = [];\n        for (const remote of remotes) {\n            if (this.#ourSubscriptions.has(remote)) {\n                this.#ourSubscriptions.delete(remote);\n                if (!this.#theirSubscriptions.has(remote)) {\n                    remotesToRemove.push(remote);\n                }\n            }\n        }\n        if (remotesToRemove.length > 0) {\n            this.emit(\"change-remote-subs\", {\n                remove: remotesToRemove,\n                peers: Array.from(this.#generousPeers),\n            });\n        }\n    }\n    handleControlMessage(control) {\n        const remotesToAdd = [];\n        const remotesToRemove = [];\n        const addedRemotesWeKnow = [];\n        this.#log(\"handleControlMessage\", control);\n        if (control.add) {\n            for (const remote of control.add) {\n                let theirSubs = this.#theirSubscriptions.get(remote);\n                if (this.#ourSubscriptions.has(remote) || theirSubs) {\n                    addedRemotesWeKnow.push(remote);\n                }\n                if (!theirSubs) {\n                    theirSubs = new Set();\n                    this.#theirSubscriptions.set(remote, theirSubs);\n                    if (!this.#ourSubscriptions.has(remote)) {\n                        remotesToAdd.push(remote);\n                    }\n                }\n                theirSubs.add(control.senderId);\n            }\n        }\n        if (control.remove) {\n            for (const remote of control.remove) {\n                const theirSubs = this.#theirSubscriptions.get(remote);\n                if (theirSubs) {\n                    theirSubs.delete(control.senderId);\n                    // if no one is subscribed anymore remove remote\n                    if (theirSubs.size == 0 && !this.#ourSubscriptions.has(remote)) {\n                        remotesToRemove.push(remote);\n                    }\n                }\n            }\n        }\n        if (remotesToAdd.length > 0 || remotesToRemove.length > 0) {\n            this.emit(\"change-remote-subs\", {\n                peers: Array.from(this.#generousPeers),\n                add: remotesToAdd,\n                remove: remotesToRemove,\n            });\n        }\n        // send all our stored heads of documents the peer knows for the remotes they've added\n        for (const remote of addedRemotesWeKnow) {\n            const subscribedDocs = this.#subscribedDocsByPeer.get(control.senderId);\n            if (subscribedDocs) {\n                for (const documentId of subscribedDocs) {\n                    const knownHeads = this.#knownHeads.get(documentId);\n                    if (!knownHeads) {\n                        continue;\n                    }\n                    const lastHeads = knownHeads.get(remote);\n                    if (lastHeads) {\n                        this.emit(\"notify-remote-heads\", {\n                            targetId: control.senderId,\n                            documentId,\n                            heads: lastHeads.heads,\n                            timestamp: lastHeads.timestamp,\n                            storageId: remote,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    /** A peer we are not directly connected to has changed their heads */\n    handleRemoteHeads(msg) {\n        this.#log(\"handleRemoteHeads\", msg);\n        const changedHeads = this.#changedHeads(msg);\n        // Emit a remote-heads-changed event to update local dochandles\n        for (const event of changedHeads) {\n            if (this.#ourSubscriptions.has(event.storageId)) {\n                this.emit(\"remote-heads-changed\", event);\n            }\n        }\n        // Notify generous peers of these changes regardless of if they are subscribed to us\n        for (const event of changedHeads) {\n            for (const peer of this.#generousPeers) {\n                // don't emit event to sender if sender is a generous peer\n                if (peer === msg.senderId) {\n                    continue;\n                }\n                this.emit(\"notify-remote-heads\", {\n                    targetId: peer,\n                    documentId: event.documentId,\n                    heads: event.remoteHeads,\n                    timestamp: event.timestamp,\n                    storageId: event.storageId,\n                });\n            }\n        }\n        // Notify subscribers of these changes\n        for (const event of changedHeads) {\n            const theirSubs = this.#theirSubscriptions.get(event.storageId);\n            if (theirSubs) {\n                for (const peerId of theirSubs) {\n                    if (this.#isPeerSubscribedToDoc(peerId, event.documentId)) {\n                        this.emit(\"notify-remote-heads\", {\n                            targetId: peerId,\n                            documentId: event.documentId,\n                            heads: event.remoteHeads,\n                            timestamp: event.timestamp,\n                            storageId: event.storageId,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    /** A peer we are directly connected to has updated their heads */\n    handleImmediateRemoteHeadsChanged(documentId, storageId, heads) {\n        this.#log(\"handleLocalHeadsChanged\", documentId, storageId, heads);\n        const remote = this.#knownHeads.get(documentId);\n        const timestamp = Date.now();\n        if (!remote) {\n            this.#knownHeads.set(documentId, new Map([[storageId, { heads, timestamp }]]));\n        }\n        else {\n            const docRemote = remote.get(storageId);\n            if (!docRemote || docRemote.timestamp < Date.now()) {\n                remote.set(storageId, { heads, timestamp: Date.now() });\n            }\n        }\n        const theirSubs = this.#theirSubscriptions.get(storageId);\n        if (theirSubs) {\n            for (const peerId of theirSubs) {\n                if (this.#isPeerSubscribedToDoc(peerId, documentId)) {\n                    this.emit(\"notify-remote-heads\", {\n                        targetId: peerId,\n                        documentId: documentId,\n                        heads: heads,\n                        timestamp: timestamp,\n                        storageId: storageId,\n                    });\n                }\n            }\n        }\n    }\n    addGenerousPeer(peerId) {\n        this.#log(\"addGenerousPeer\", peerId);\n        this.#generousPeers.add(peerId);\n        if (this.#ourSubscriptions.size > 0) {\n            this.emit(\"change-remote-subs\", {\n                add: Array.from(this.#ourSubscriptions),\n                peers: [peerId],\n            });\n        }\n        for (const [documentId, remote] of this.#knownHeads) {\n            for (const [storageId, { heads, timestamp }] of remote) {\n                this.emit(\"notify-remote-heads\", {\n                    targetId: peerId,\n                    documentId: documentId,\n                    heads: heads,\n                    timestamp: timestamp,\n                    storageId: storageId,\n                });\n            }\n        }\n    }\n    removePeer(peerId) {\n        this.#log(\"removePeer\", peerId);\n        const remotesToRemove = [];\n        this.#generousPeers.delete(peerId);\n        this.#subscribedDocsByPeer.delete(peerId);\n        for (const [storageId, peerIds] of this.#theirSubscriptions) {\n            if (peerIds.has(peerId)) {\n                peerIds.delete(peerId);\n                if (peerIds.size == 0) {\n                    remotesToRemove.push(storageId);\n                    this.#theirSubscriptions.delete(storageId);\n                }\n            }\n        }\n        if (remotesToRemove.length > 0) {\n            this.emit(\"change-remote-subs\", {\n                remove: remotesToRemove,\n                peers: Array.from(this.#generousPeers),\n            });\n        }\n    }\n    subscribePeerToDoc(peerId, documentId) {\n        let subscribedDocs = this.#subscribedDocsByPeer.get(peerId);\n        if (!subscribedDocs) {\n            subscribedDocs = new Set();\n            this.#subscribedDocsByPeer.set(peerId, subscribedDocs);\n        }\n        subscribedDocs.add(documentId);\n        const remoteHeads = this.#knownHeads.get(documentId);\n        if (remoteHeads) {\n            for (const [storageId, lastHeads] of remoteHeads) {\n                const subscribedPeers = this.#theirSubscriptions.get(storageId);\n                if (subscribedPeers && subscribedPeers.has(peerId)) {\n                    this.emit(\"notify-remote-heads\", {\n                        targetId: peerId,\n                        documentId,\n                        heads: lastHeads.heads,\n                        timestamp: lastHeads.timestamp,\n                        storageId,\n                    });\n                }\n            }\n        }\n    }\n    #isPeerSubscribedToDoc(peerId, documentId) {\n        const subscribedDocs = this.#subscribedDocsByPeer.get(peerId);\n        return subscribedDocs && subscribedDocs.has(documentId);\n    }\n    /** Returns the (document, storageId) pairs which have changed after processing msg */\n    #changedHeads(msg) {\n        const changedHeads = [];\n        const { documentId, newHeads } = msg;\n        for (const [storageId, { heads, timestamp }] of Object.entries(newHeads)) {\n            if (!this.#ourSubscriptions.has(storageId) &&\n                !this.#theirSubscriptions.has(storageId)) {\n                continue;\n            }\n            let remote = this.#knownHeads.get(documentId);\n            if (!remote) {\n                remote = new Map();\n                this.#knownHeads.set(documentId, remote);\n            }\n            const docRemote = remote.get(storageId);\n            if (docRemote && docRemote.timestamp >= timestamp) {\n                continue;\n            }\n            else {\n                remote.set(storageId, { timestamp, heads });\n                changedHeads.push({\n                    documentId,\n                    storageId: storageId,\n                    remoteHeads: heads,\n                    timestamp,\n                });\n            }\n        }\n        return changedHeads;\n    }\n}\n","/** Throttle\n * Returns a function with a built in throttle timer that runs after `delay` ms.\n *\n * This function differs from a conventional `throttle` in that it ensures the final\n * call will also execute and delays sending the first one until `delay` ms to allow\n * additional work to accumulate.\n *\n * Here's a diagram:\n *\n * calls +----++++++-----++----\n * dlay  ^--v ^--v^--v   ^--v\n * execs ---+----+---+------+--\n *\n * The goal in this design is to create batches of changes without flooding\n * communication or storage systems while still feeling responsive.\n * (By default we communicate at 10hz / every 100ms.)\n *\n * Note that the args go inside the parameter and you should be careful not to\n * recreate the function on each usage. (In React, see useMemo().)\n *\n *\n * Example usage:\n * const callback = debounce((ev) => { doSomethingExpensiveOrOccasional() }, 100)\n * target.addEventListener('frequent-event', callback);\n *\n */\nexport const throttle = (fn, delay) => {\n    let lastCall = Date.now();\n    let wait;\n    let timeout;\n    return function (...args) {\n        wait = lastCall + delay - Date.now();\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            fn(...args);\n            lastCall = Date.now();\n        }, wait);\n    };\n};\n","// TYPE GUARDS\nexport const isRepoMessage = (message) => isSyncMessage(message) ||\n    isEphemeralMessage(message) ||\n    isRequestMessage(message) ||\n    isDocumentUnavailableMessage(message) ||\n    isRemoteSubscriptionControlMessage(message) ||\n    isRemoteHeadsChanged(message);\n// prettier-ignore\nexport const isDocumentUnavailableMessage = (msg) => msg.type === \"doc-unavailable\";\nexport const isRequestMessage = (msg) => msg.type === \"request\";\nexport const isSyncMessage = (msg) => msg.type === \"sync\";\nexport const isEphemeralMessage = (msg) => msg.type === \"ephemeral\";\n// prettier-ignore\nexport const isRemoteSubscriptionControlMessage = (msg) => msg.type === \"remote-subscription-change\";\nexport const isRemoteHeadsChanged = (msg) => msg.type === \"remote-heads-changed\";\n","import debug from \"debug\";\nimport { EventEmitter } from \"eventemitter3\";\nimport { isEphemeralMessage, isRepoMessage, } from \"./messages.js\";\nconst getEphemeralMessageSource = (message) => `${message.senderId}:${message.sessionId}`;\nexport class NetworkSubsystem extends EventEmitter {\n    peerId;\n    peerMetadata;\n    #log;\n    #adaptersByPeer = {};\n    #count = 0;\n    #sessionId = Math.random().toString(36).slice(2);\n    #ephemeralSessionCounts = {};\n    #readyAdapterCount = 0;\n    #adapters = [];\n    constructor(adapters, peerId = randomPeerId(), peerMetadata) {\n        super();\n        this.peerId = peerId;\n        this.peerMetadata = peerMetadata;\n        this.#log = debug(`automerge-repo:network:${this.peerId}`);\n        adapters.forEach(a => this.addNetworkAdapter(a));\n    }\n    addNetworkAdapter(networkAdapter) {\n        this.#adapters.push(networkAdapter);\n        networkAdapter.once(\"ready\", () => {\n            this.#readyAdapterCount++;\n            this.#log(\"Adapters ready: \", this.#readyAdapterCount, \"/\", this.#adapters.length);\n            if (this.#readyAdapterCount === this.#adapters.length) {\n                this.emit(\"ready\");\n            }\n        });\n        networkAdapter.on(\"peer-candidate\", ({ peerId, peerMetadata }) => {\n            this.#log(`peer candidate: ${peerId} `);\n            // TODO: This is where authentication would happen\n            if (!this.#adaptersByPeer[peerId]) {\n                // TODO: handle losing a server here\n                this.#adaptersByPeer[peerId] = networkAdapter;\n            }\n            this.emit(\"peer\", { peerId, peerMetadata });\n        });\n        networkAdapter.on(\"peer-disconnected\", ({ peerId }) => {\n            this.#log(`peer disconnected: ${peerId} `);\n            delete this.#adaptersByPeer[peerId];\n            this.emit(\"peer-disconnected\", { peerId });\n        });\n        networkAdapter.on(\"message\", msg => {\n            if (!isRepoMessage(msg)) {\n                this.#log(`invalid message: ${JSON.stringify(msg)}`);\n                return;\n            }\n            this.#log(`message from ${msg.senderId}`);\n            if (isEphemeralMessage(msg)) {\n                const source = getEphemeralMessageSource(msg);\n                if (this.#ephemeralSessionCounts[source] === undefined ||\n                    msg.count > this.#ephemeralSessionCounts[source]) {\n                    this.#ephemeralSessionCounts[source] = msg.count;\n                    this.emit(\"message\", msg);\n                }\n                return;\n            }\n            this.emit(\"message\", msg);\n        });\n        networkAdapter.on(\"close\", () => {\n            this.#log(\"adapter closed\");\n            Object.entries(this.#adaptersByPeer).forEach(([peerId, other]) => {\n                if (other === networkAdapter) {\n                    delete this.#adaptersByPeer[peerId];\n                }\n            });\n        });\n        this.peerMetadata\n            .then(peerMetadata => {\n            networkAdapter.connect(this.peerId, peerMetadata);\n        })\n            .catch(err => {\n            this.#log(\"error connecting to network\", err);\n        });\n    }\n    send(message) {\n        const peer = this.#adaptersByPeer[message.targetId];\n        if (!peer) {\n            this.#log(`Tried to send message but peer not found: ${message.targetId}`);\n            return;\n        }\n        /** Messages come in without a senderId and other required information; this is where we make\n         * sure they have everything they need.\n         */\n        const prepareMessage = (message) => {\n            if (message.type === \"ephemeral\") {\n                if (\"count\" in message) {\n                    // existing ephemeral message from another peer; pass on without changes\n                    return message;\n                }\n                else {\n                    // new ephemeral message from us; add our senderId as well as a counter and session id\n                    return {\n                        ...message,\n                        count: ++this.#count,\n                        sessionId: this.#sessionId,\n                        senderId: this.peerId,\n                    };\n                }\n            }\n            else {\n                // other message type; just add our senderId\n                return {\n                    ...message,\n                    senderId: this.peerId,\n                };\n            }\n        };\n        const outbound = prepareMessage(message);\n        this.#log(\"sending message %o\", outbound);\n        peer.send(outbound);\n    }\n    isReady = () => {\n        return this.#readyAdapterCount === this.#adapters.length;\n    };\n    whenReady = async () => {\n        if (this.isReady()) {\n            return;\n        }\n        else {\n            return new Promise(resolve => {\n                this.once(\"ready\", () => {\n                    resolve();\n                });\n            });\n        }\n    };\n}\nfunction randomPeerId() {\n    return `user-${Math.round(Math.random() * 100000)}`;\n}\n","export function mergeArrays(myArrays) {\n    // Get the total length of all arrays.\n    let length = 0;\n    myArrays.forEach(item => {\n        length += item.length;\n    });\n    // Create a new array with total length and merge all source arrays.\n    const mergedArray = new Uint8Array(length);\n    let offset = 0;\n    myArrays.forEach(item => {\n        mergedArray.set(item, offset);\n        offset += item.length;\n    });\n    return mergedArray;\n}\n","(function (root, factory) {\n    // Hack to make all exports of this module sha256 function object properties.\n    var exports = {};\n    factory(exports);\n    var sha256 = exports[\"default\"];\n    for (var k in exports) {\n        sha256[k] = exports[k];\n    }\n        \n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = sha256;\n    } else if (typeof define === 'function' && define.amd) {\n        define(function() { return sha256; }); \n    } else {\n        root.sha256 = sha256;\n    }\n})(this, function(exports) {\n\"use strict\";\nexports.__esModule = true;\n// SHA-256 (+ HMAC and PBKDF2) for JavaScript.\n//\n// Written in 2014-2016 by Dmitry Chestnykh.\n// Public domain, no warranty.\n//\n// Functions (accept and return Uint8Arrays):\n//\n//   sha256(message) -> hash\n//   sha256.hmac(key, message) -> mac\n//   sha256.pbkdf2(password, salt, rounds, dkLen) -> dk\n//\n//  Classes:\n//\n//   new sha256.Hash()\n//   new sha256.HMAC(key)\n//\nexports.digestLength = 32;\nexports.blockSize = 64;\n// SHA-256 constants\nvar K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b,\n    0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01,\n    0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7,\n    0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152,\n    0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147,\n    0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc,\n    0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819,\n    0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08,\n    0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f,\n    0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\nfunction hashBlocks(w, v, p, pos, len) {\n    var a, b, c, d, e, f, g, h, u, i, j, t1, t2;\n    while (len >= 64) {\n        a = v[0];\n        b = v[1];\n        c = v[2];\n        d = v[3];\n        e = v[4];\n        f = v[5];\n        g = v[6];\n        h = v[7];\n        for (i = 0; i < 16; i++) {\n            j = pos + i * 4;\n            w[i] = (((p[j] & 0xff) << 24) | ((p[j + 1] & 0xff) << 16) |\n                ((p[j + 2] & 0xff) << 8) | (p[j + 3] & 0xff));\n        }\n        for (i = 16; i < 64; i++) {\n            u = w[i - 2];\n            t1 = (u >>> 17 | u << (32 - 17)) ^ (u >>> 19 | u << (32 - 19)) ^ (u >>> 10);\n            u = w[i - 15];\n            t2 = (u >>> 7 | u << (32 - 7)) ^ (u >>> 18 | u << (32 - 18)) ^ (u >>> 3);\n            w[i] = (t1 + w[i - 7] | 0) + (t2 + w[i - 16] | 0);\n        }\n        for (i = 0; i < 64; i++) {\n            t1 = (((((e >>> 6 | e << (32 - 6)) ^ (e >>> 11 | e << (32 - 11)) ^\n                (e >>> 25 | e << (32 - 25))) + ((e & f) ^ (~e & g))) | 0) +\n                ((h + ((K[i] + w[i]) | 0)) | 0)) | 0;\n            t2 = (((a >>> 2 | a << (32 - 2)) ^ (a >>> 13 | a << (32 - 13)) ^\n                (a >>> 22 | a << (32 - 22))) + ((a & b) ^ (a & c) ^ (b & c))) | 0;\n            h = g;\n            g = f;\n            f = e;\n            e = (d + t1) | 0;\n            d = c;\n            c = b;\n            b = a;\n            a = (t1 + t2) | 0;\n        }\n        v[0] += a;\n        v[1] += b;\n        v[2] += c;\n        v[3] += d;\n        v[4] += e;\n        v[5] += f;\n        v[6] += g;\n        v[7] += h;\n        pos += 64;\n        len -= 64;\n    }\n    return pos;\n}\n// Hash implements SHA256 hash algorithm.\nvar Hash = /** @class */ (function () {\n    function Hash() {\n        this.digestLength = exports.digestLength;\n        this.blockSize = exports.blockSize;\n        // Note: Int32Array is used instead of Uint32Array for performance reasons.\n        this.state = new Int32Array(8); // hash state\n        this.temp = new Int32Array(64); // temporary state\n        this.buffer = new Uint8Array(128); // buffer for data to hash\n        this.bufferLength = 0; // number of bytes in buffer\n        this.bytesHashed = 0; // number of total bytes hashed\n        this.finished = false; // indicates whether the hash was finalized\n        this.reset();\n    }\n    // Resets hash state making it possible\n    // to re-use this instance to hash other data.\n    Hash.prototype.reset = function () {\n        this.state[0] = 0x6a09e667;\n        this.state[1] = 0xbb67ae85;\n        this.state[2] = 0x3c6ef372;\n        this.state[3] = 0xa54ff53a;\n        this.state[4] = 0x510e527f;\n        this.state[5] = 0x9b05688c;\n        this.state[6] = 0x1f83d9ab;\n        this.state[7] = 0x5be0cd19;\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        this.finished = false;\n        return this;\n    };\n    // Cleans internal buffers and re-initializes hash state.\n    Hash.prototype.clean = function () {\n        for (var i = 0; i < this.buffer.length; i++) {\n            this.buffer[i] = 0;\n        }\n        for (var i = 0; i < this.temp.length; i++) {\n            this.temp[i] = 0;\n        }\n        this.reset();\n    };\n    // Updates hash state with the given data.\n    //\n    // Optionally, length of the data can be specified to hash\n    // fewer bytes than data.length.\n    //\n    // Throws error when trying to update already finalized hash:\n    // instance must be reset to use it again.\n    Hash.prototype.update = function (data, dataLength) {\n        if (dataLength === void 0) { dataLength = data.length; }\n        if (this.finished) {\n            throw new Error(\"SHA256: can't update because hash was finished.\");\n        }\n        var dataPos = 0;\n        this.bytesHashed += dataLength;\n        if (this.bufferLength > 0) {\n            while (this.bufferLength < 64 && dataLength > 0) {\n                this.buffer[this.bufferLength++] = data[dataPos++];\n                dataLength--;\n            }\n            if (this.bufferLength === 64) {\n                hashBlocks(this.temp, this.state, this.buffer, 0, 64);\n                this.bufferLength = 0;\n            }\n        }\n        if (dataLength >= 64) {\n            dataPos = hashBlocks(this.temp, this.state, data, dataPos, dataLength);\n            dataLength %= 64;\n        }\n        while (dataLength > 0) {\n            this.buffer[this.bufferLength++] = data[dataPos++];\n            dataLength--;\n        }\n        return this;\n    };\n    // Finalizes hash state and puts hash into out.\n    //\n    // If hash was already finalized, puts the same value.\n    Hash.prototype.finish = function (out) {\n        if (!this.finished) {\n            var bytesHashed = this.bytesHashed;\n            var left = this.bufferLength;\n            var bitLenHi = (bytesHashed / 0x20000000) | 0;\n            var bitLenLo = bytesHashed << 3;\n            var padLength = (bytesHashed % 64 < 56) ? 64 : 128;\n            this.buffer[left] = 0x80;\n            for (var i = left + 1; i < padLength - 8; i++) {\n                this.buffer[i] = 0;\n            }\n            this.buffer[padLength - 8] = (bitLenHi >>> 24) & 0xff;\n            this.buffer[padLength - 7] = (bitLenHi >>> 16) & 0xff;\n            this.buffer[padLength - 6] = (bitLenHi >>> 8) & 0xff;\n            this.buffer[padLength - 5] = (bitLenHi >>> 0) & 0xff;\n            this.buffer[padLength - 4] = (bitLenLo >>> 24) & 0xff;\n            this.buffer[padLength - 3] = (bitLenLo >>> 16) & 0xff;\n            this.buffer[padLength - 2] = (bitLenLo >>> 8) & 0xff;\n            this.buffer[padLength - 1] = (bitLenLo >>> 0) & 0xff;\n            hashBlocks(this.temp, this.state, this.buffer, 0, padLength);\n            this.finished = true;\n        }\n        for (var i = 0; i < 8; i++) {\n            out[i * 4 + 0] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return this;\n    };\n    // Returns the final hash digest.\n    Hash.prototype.digest = function () {\n        var out = new Uint8Array(this.digestLength);\n        this.finish(out);\n        return out;\n    };\n    // Internal function for use in HMAC for optimization.\n    Hash.prototype._saveState = function (out) {\n        for (var i = 0; i < this.state.length; i++) {\n            out[i] = this.state[i];\n        }\n    };\n    // Internal function for use in HMAC for optimization.\n    Hash.prototype._restoreState = function (from, bytesHashed) {\n        for (var i = 0; i < this.state.length; i++) {\n            this.state[i] = from[i];\n        }\n        this.bytesHashed = bytesHashed;\n        this.finished = false;\n        this.bufferLength = 0;\n    };\n    return Hash;\n}());\nexports.Hash = Hash;\n// HMAC implements HMAC-SHA256 message authentication algorithm.\nvar HMAC = /** @class */ (function () {\n    function HMAC(key) {\n        this.inner = new Hash();\n        this.outer = new Hash();\n        this.blockSize = this.inner.blockSize;\n        this.digestLength = this.inner.digestLength;\n        var pad = new Uint8Array(this.blockSize);\n        if (key.length > this.blockSize) {\n            (new Hash()).update(key).finish(pad).clean();\n        }\n        else {\n            for (var i = 0; i < key.length; i++) {\n                pad[i] = key[i];\n            }\n        }\n        for (var i = 0; i < pad.length; i++) {\n            pad[i] ^= 0x36;\n        }\n        this.inner.update(pad);\n        for (var i = 0; i < pad.length; i++) {\n            pad[i] ^= 0x36 ^ 0x5c;\n        }\n        this.outer.update(pad);\n        this.istate = new Uint32Array(8);\n        this.ostate = new Uint32Array(8);\n        this.inner._saveState(this.istate);\n        this.outer._saveState(this.ostate);\n        for (var i = 0; i < pad.length; i++) {\n            pad[i] = 0;\n        }\n    }\n    // Returns HMAC state to the state initialized with key\n    // to make it possible to run HMAC over the other data with the same\n    // key without creating a new instance.\n    HMAC.prototype.reset = function () {\n        this.inner._restoreState(this.istate, this.inner.blockSize);\n        this.outer._restoreState(this.ostate, this.outer.blockSize);\n        return this;\n    };\n    // Cleans HMAC state.\n    HMAC.prototype.clean = function () {\n        for (var i = 0; i < this.istate.length; i++) {\n            this.ostate[i] = this.istate[i] = 0;\n        }\n        this.inner.clean();\n        this.outer.clean();\n    };\n    // Updates state with provided data.\n    HMAC.prototype.update = function (data) {\n        this.inner.update(data);\n        return this;\n    };\n    // Finalizes HMAC and puts the result in out.\n    HMAC.prototype.finish = function (out) {\n        if (this.outer.finished) {\n            this.outer.finish(out);\n        }\n        else {\n            this.inner.finish(out);\n            this.outer.update(out, this.digestLength).finish(out);\n        }\n        return this;\n    };\n    // Returns message authentication code.\n    HMAC.prototype.digest = function () {\n        var out = new Uint8Array(this.digestLength);\n        this.finish(out);\n        return out;\n    };\n    return HMAC;\n}());\nexports.HMAC = HMAC;\n// Returns SHA256 hash of data.\nfunction hash(data) {\n    var h = (new Hash()).update(data);\n    var digest = h.digest();\n    h.clean();\n    return digest;\n}\nexports.hash = hash;\n// Function hash is both available as module.hash and as default export.\nexports[\"default\"] = hash;\n// Returns HMAC-SHA256 of data under the key.\nfunction hmac(key, data) {\n    var h = (new HMAC(key)).update(data);\n    var digest = h.digest();\n    h.clean();\n    return digest;\n}\nexports.hmac = hmac;\n// Fills hkdf buffer like this:\n// T(1) = HMAC-Hash(PRK, T(0) | info | 0x01)\nfunction fillBuffer(buffer, hmac, info, counter) {\n    // Counter is a byte value: check if it overflowed.\n    var num = counter[0];\n    if (num === 0) {\n        throw new Error(\"hkdf: cannot expand more\");\n    }\n    // Prepare HMAC instance for new data with old key.\n    hmac.reset();\n    // Hash in previous output if it was generated\n    // (i.e. counter is greater than 1).\n    if (num > 1) {\n        hmac.update(buffer);\n    }\n    // Hash in info if it exists.\n    if (info) {\n        hmac.update(info);\n    }\n    // Hash in the counter.\n    hmac.update(counter);\n    // Output result to buffer and clean HMAC instance.\n    hmac.finish(buffer);\n    // Increment counter inside typed array, this works properly.\n    counter[0]++;\n}\nvar hkdfSalt = new Uint8Array(exports.digestLength); // Filled with zeroes.\nfunction hkdf(key, salt, info, length) {\n    if (salt === void 0) { salt = hkdfSalt; }\n    if (length === void 0) { length = 32; }\n    var counter = new Uint8Array([1]);\n    // HKDF-Extract uses salt as HMAC key, and key as data.\n    var okm = hmac(salt, key);\n    // Initialize HMAC for expanding with extracted key.\n    // Ensure no collisions with `hmac` function.\n    var hmac_ = new HMAC(okm);\n    // Allocate buffer.\n    var buffer = new Uint8Array(hmac_.digestLength);\n    var bufpos = buffer.length;\n    var out = new Uint8Array(length);\n    for (var i = 0; i < length; i++) {\n        if (bufpos === buffer.length) {\n            fillBuffer(buffer, hmac_, info, counter);\n            bufpos = 0;\n        }\n        out[i] = buffer[bufpos++];\n    }\n    hmac_.clean();\n    buffer.fill(0);\n    counter.fill(0);\n    return out;\n}\nexports.hkdf = hkdf;\n// Derives a key from password and salt using PBKDF2-HMAC-SHA256\n// with the given number of iterations.\n//\n// The number of bytes returned is equal to dkLen.\n//\n// (For better security, avoid dkLen greater than hash length - 32 bytes).\nfunction pbkdf2(password, salt, iterations, dkLen) {\n    var prf = new HMAC(password);\n    var len = prf.digestLength;\n    var ctr = new Uint8Array(4);\n    var t = new Uint8Array(len);\n    var u = new Uint8Array(len);\n    var dk = new Uint8Array(dkLen);\n    for (var i = 0; i * len < dkLen; i++) {\n        var c = i + 1;\n        ctr[0] = (c >>> 24) & 0xff;\n        ctr[1] = (c >>> 16) & 0xff;\n        ctr[2] = (c >>> 8) & 0xff;\n        ctr[3] = (c >>> 0) & 0xff;\n        prf.reset();\n        prf.update(salt);\n        prf.update(ctr);\n        prf.finish(u);\n        for (var j = 0; j < len; j++) {\n            t[j] = u[j];\n        }\n        for (var j = 2; j <= iterations; j++) {\n            prf.reset();\n            prf.update(u).finish(u);\n            for (var k = 0; k < len; k++) {\n                t[k] ^= u[k];\n            }\n        }\n        for (var j = 0; j < len && i * len + j < dkLen; j++) {\n            dk[i * len + j] = t[j];\n        }\n    }\n    for (var i = 0; i < len; i++) {\n        t[i] = u[i] = 0;\n    }\n    for (var i = 0; i < 4; i++) {\n        ctr[i] = 0;\n    }\n    prf.clean();\n    return dk;\n}\nexports.pbkdf2 = pbkdf2;\n});\n","import * as sha256 from \"fast-sha256\";\nimport { mergeArrays } from \"../helpers/mergeArrays.js\";\nexport function keyHash(binary) {\n    // calculate hash\n    const hash = sha256.hash(binary);\n    return bufferToHexString(hash);\n}\nexport function headsHash(heads) {\n    const encoder = new TextEncoder();\n    const headsbinary = mergeArrays(heads.map((h) => encoder.encode(h)));\n    return keyHash(headsbinary);\n}\nfunction bufferToHexString(data) {\n    return Array.from(data, byte => byte.toString(16).padStart(2, \"0\")).join(\"\");\n}\n","/**\n * Keys for storing Automerge documents are of the form:\n * ```ts\n * [documentId, \"snapshot\", hash]  // OR\n * [documentId, \"incremental\", hash]\n * ```\n * This function returns the chunk type (\"snapshot\" or \"incremental\") if the key is in one of these\n * forms.\n */\nexport function chunkTypeFromKey(key) {\n    if (key.length < 2)\n        return null;\n    const chunkTypeStr = key[key.length - 2]; // next-to-last element in key\n    if (chunkTypeStr === \"snapshot\" || chunkTypeStr === \"incremental\") {\n        return chunkTypeStr;\n    }\n    return null;\n}\n","import * as A from \"@automerge/automerge/next\";\nimport debug from \"debug\";\nimport { headsAreSame } from \"../helpers/headsAreSame.js\";\nimport { mergeArrays } from \"../helpers/mergeArrays.js\";\nimport { keyHash, headsHash } from \"./keyHash.js\";\nimport { chunkTypeFromKey } from \"./chunkTypeFromKey.js\";\nimport * as Uuid from \"uuid\";\n/**\n * The storage subsystem is responsible for saving and loading Automerge documents to and from\n * storage adapter. It also provides a generic key/value storage interface for other uses.\n */\nexport class StorageSubsystem {\n    /** The storage adapter to use for saving and loading documents */\n    #storageAdapter;\n    /** Record of the latest heads we've loaded or saved for each document  */\n    #storedHeads = new Map();\n    /** Metadata on the chunks we've already loaded for each document */\n    #chunkInfos = new Map();\n    /** Flag to avoid compacting when a compaction is already underway */\n    #compacting = false;\n    #log = debug(`automerge-repo:storage-subsystem`);\n    constructor(storageAdapter) {\n        this.#storageAdapter = storageAdapter;\n    }\n    async id() {\n        const storedId = await this.#storageAdapter.load([\"storage-adapter-id\"]);\n        let id;\n        if (storedId) {\n            id = new TextDecoder().decode(storedId);\n        }\n        else {\n            id = Uuid.v4();\n            await this.#storageAdapter.save([\"storage-adapter-id\"], new TextEncoder().encode(id));\n        }\n        return id;\n    }\n    // ARBITRARY KEY/VALUE STORAGE\n    // The `load`, `save`, and `remove` methods are for generic key/value storage, as opposed to\n    // Automerge documents. For example, they're used by the LocalFirstAuthProvider to persist the\n    // encrypted team graph that encodes group membership and permissions.\n    //\n    // The namespace parameter is to prevent collisions with other users of the storage subsystem.\n    // Typically this will be the name of the plug-in, adapter, or other system that is using it. For\n    // example, the LocalFirstAuthProvider uses the namespace `LocalFirstAuthProvider`.\n    /** Loads a value from storage. */\n    async load(\n    /** Namespace to prevent collisions with other users of the storage subsystem. */\n    namespace, \n    /** Key to load. Typically a UUID or other unique identifier, but could be any string. */\n    key) {\n        const storageKey = [namespace, key];\n        return await this.#storageAdapter.load(storageKey);\n    }\n    /** Saves a value in storage. */\n    async save(\n    /** Namespace to prevent collisions with other users of the storage subsystem. */\n    namespace, \n    /** Key to load. Typically a UUID or other unique identifier, but could be any string. */\n    key, \n    /** Data to save, as a binary blob. */\n    data) {\n        const storageKey = [namespace, key];\n        await this.#storageAdapter.save(storageKey, data);\n    }\n    /** Removes a value from storage. */\n    async remove(\n    /** Namespace to prevent collisions with other users of the storage subsystem. */\n    namespace, \n    /** Key to remove. Typically a UUID or other unique identifier, but could be any string. */\n    key) {\n        const storageKey = [namespace, key];\n        await this.#storageAdapter.remove(storageKey);\n    }\n    // AUTOMERGE DOCUMENT STORAGE\n    /**\n     * Loads the Automerge document with the given ID from storage.\n     */\n    async loadDoc(documentId) {\n        // Load all the chunks for this document\n        const chunks = await this.#storageAdapter.loadRange([documentId]);\n        const binaries = [];\n        const chunkInfos = [];\n        for (const chunk of chunks) {\n            // chunks might have been deleted in the interim\n            if (chunk.data === undefined)\n                continue;\n            const chunkType = chunkTypeFromKey(chunk.key);\n            if (chunkType == null)\n                continue;\n            chunkInfos.push({\n                key: chunk.key,\n                type: chunkType,\n                size: chunk.data.length,\n            });\n            binaries.push(chunk.data);\n        }\n        this.#chunkInfos.set(documentId, chunkInfos);\n        // Merge the chunks into a single binary\n        const binary = mergeArrays(binaries);\n        if (binary.length === 0)\n            return null;\n        // Load into an Automerge document\n        const newDoc = A.loadIncremental(A.init(), binary);\n        // Record the latest heads for the document\n        this.#storedHeads.set(documentId, A.getHeads(newDoc));\n        return newDoc;\n    }\n    /**\n     * Saves the provided Automerge document to storage.\n     *\n     * @remarks\n     * Under the hood this makes incremental saves until the incremental size is greater than the\n     * snapshot size, at which point the document is compacted into a single snapshot.\n     */\n    async saveDoc(documentId, doc) {\n        // Don't bother saving if the document hasn't changed\n        if (!this.#shouldSave(documentId, doc))\n            return;\n        const sourceChunks = this.#chunkInfos.get(documentId) ?? [];\n        if (this.#shouldCompact(sourceChunks)) {\n            await this.#saveTotal(documentId, doc, sourceChunks);\n        }\n        else {\n            await this.#saveIncremental(documentId, doc);\n        }\n        this.#storedHeads.set(documentId, A.getHeads(doc));\n    }\n    /**\n     * Removes the Automerge document with the given ID from storage\n     */\n    async removeDoc(documentId) {\n        await this.#storageAdapter.removeRange([documentId, \"snapshot\"]);\n        await this.#storageAdapter.removeRange([documentId, \"incremental\"]);\n        await this.#storageAdapter.removeRange([documentId, \"sync-state\"]);\n    }\n    /**\n     * Saves just the incremental changes since the last save.\n     */\n    async #saveIncremental(documentId, doc) {\n        const binary = A.saveSince(doc, this.#storedHeads.get(documentId) ?? []);\n        if (binary && binary.length > 0) {\n            const key = [documentId, \"incremental\", keyHash(binary)];\n            this.#log(`Saving incremental ${key} for document ${documentId}`);\n            await this.#storageAdapter.save(key, binary);\n            if (!this.#chunkInfos.has(documentId)) {\n                this.#chunkInfos.set(documentId, []);\n            }\n            this.#chunkInfos.get(documentId).push({\n                key,\n                type: \"incremental\",\n                size: binary.length,\n            });\n            this.#storedHeads.set(documentId, A.getHeads(doc));\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n    /**\n     * Compacts the document storage into a single shapshot.\n     */\n    async #saveTotal(documentId, doc, sourceChunks) {\n        this.#compacting = true;\n        const binary = A.save(doc);\n        const snapshotHash = headsHash(A.getHeads(doc));\n        const key = [documentId, \"snapshot\", snapshotHash];\n        const oldKeys = new Set(sourceChunks.map(c => c.key).filter(k => k[2] !== snapshotHash));\n        this.#log(`Saving snapshot ${key} for document ${documentId}`);\n        this.#log(`deleting old chunks ${Array.from(oldKeys)}`);\n        await this.#storageAdapter.save(key, binary);\n        for (const key of oldKeys) {\n            await this.#storageAdapter.remove(key);\n        }\n        const newChunkInfos = this.#chunkInfos.get(documentId)?.filter(c => !oldKeys.has(c.key)) ?? [];\n        newChunkInfos.push({ key, type: \"snapshot\", size: binary.length });\n        this.#chunkInfos.set(documentId, newChunkInfos);\n        this.#compacting = false;\n    }\n    async loadSyncState(documentId, storageId) {\n        const key = [documentId, \"sync-state\", storageId];\n        const loaded = await this.#storageAdapter.load(key);\n        return loaded ? A.decodeSyncState(loaded) : undefined;\n    }\n    async saveSyncState(documentId, storageId, syncState) {\n        const key = [documentId, \"sync-state\", storageId];\n        await this.#storageAdapter.save(key, A.encodeSyncState(syncState));\n    }\n    /**\n     * Returns true if the document has changed since the last time it was saved.\n     */\n    #shouldSave(documentId, doc) {\n        const oldHeads = this.#storedHeads.get(documentId);\n        if (!oldHeads) {\n            // we haven't saved this document before\n            return true;\n        }\n        const newHeads = A.getHeads(doc);\n        if (headsAreSame(newHeads, oldHeads)) {\n            // the document hasn't changed\n            return false;\n        }\n        return true; // the document has changed\n    }\n    /**\n     * We only compact if the incremental size is greater than the snapshot size.\n     */\n    #shouldCompact(sourceChunks) {\n        if (this.#compacting)\n            return false;\n        let snapshotSize = 0;\n        let incrementalSize = 0;\n        for (const chunk of sourceChunks) {\n            if (chunk.type === \"snapshot\") {\n                snapshotSize += chunk.size;\n            }\n            else {\n                incrementalSize += chunk.size;\n            }\n        }\n        // if the file is currently small, don't worry, just compact\n        // this might seem a bit arbitrary (1k is arbitrary) but is designed to ensure compaction\n        // for documents with only a single large change on top of an empty (or nearly empty) document\n        // for example: imported NPM modules, images, etc.\n        // if we have even more incrementals (so far) than the snapshot, compact\n        return snapshotSize < 1024 || incrementalSize >= snapshotSize;\n    }\n}\n","import { EventEmitter } from \"eventemitter3\";\nexport class Synchronizer extends EventEmitter {\n}\n","import * as A from \"@automerge/automerge/next\";\nimport { decode } from \"cbor-x\";\nimport debug from \"debug\";\nimport { READY, REQUESTING, UNAVAILABLE, } from \"../DocHandle.js\";\nimport { isRequestMessage, } from \"../network/messages.js\";\nimport { Synchronizer } from \"./Synchronizer.js\";\nimport { throttle } from \"../helpers/throttle.js\";\n/**\n * DocSynchronizer takes a handle to an Automerge document, and receives & dispatches sync messages\n * to bring it inline with all other peers' versions.\n */\nexport class DocSynchronizer extends Synchronizer {\n    #log;\n    syncDebounceRate = 100;\n    /** Active peers */\n    #peers = [];\n    #pendingSyncStateCallbacks = {};\n    #peerDocumentStatuses = {};\n    /** Sync state for each peer we've communicated with (including inactive peers) */\n    #syncStates = {};\n    #pendingSyncMessages = [];\n    #syncStarted = false;\n    #handle;\n    #onLoadSyncState;\n    constructor({ handle, onLoadSyncState }) {\n        super();\n        this.#handle = handle;\n        this.#onLoadSyncState =\n            onLoadSyncState ?? (() => Promise.resolve(undefined));\n        const docId = handle.documentId.slice(0, 5);\n        this.#log = debug(`automerge-repo:docsync:${docId}`);\n        handle.on(\"change\", throttle(() => this.#syncWithPeers(), this.syncDebounceRate));\n        handle.on(\"ephemeral-message-outbound\", payload => this.#broadcastToPeers(payload));\n        // Process pending sync messages immediately after the handle becomes ready.\n        void (async () => {\n            await handle.doc([READY, REQUESTING]);\n            this.#processAllPendingSyncMessages();\n        })();\n    }\n    get peerStates() {\n        return this.#peerDocumentStatuses;\n    }\n    get documentId() {\n        return this.#handle.documentId;\n    }\n    /// PRIVATE\n    async #syncWithPeers() {\n        this.#log(`syncWithPeers`);\n        const doc = await this.#handle.doc();\n        if (doc === undefined)\n            return;\n        this.#peers.forEach(peerId => this.#sendSyncMessage(peerId, doc));\n    }\n    async #broadcastToPeers({ data, }) {\n        this.#log(`broadcastToPeers`, this.#peers);\n        this.#peers.forEach(peerId => this.#sendEphemeralMessage(peerId, data));\n    }\n    #sendEphemeralMessage(peerId, data) {\n        this.#log(`sendEphemeralMessage ->${peerId}`);\n        const message = {\n            type: \"ephemeral\",\n            targetId: peerId,\n            documentId: this.#handle.documentId,\n            data,\n        };\n        this.emit(\"message\", message);\n    }\n    #withSyncState(peerId, callback) {\n        this.#addPeer(peerId);\n        if (!(peerId in this.#peerDocumentStatuses)) {\n            this.#peerDocumentStatuses[peerId] = \"unknown\";\n        }\n        const syncState = this.#syncStates[peerId];\n        if (syncState) {\n            callback(syncState);\n            return;\n        }\n        let pendingCallbacks = this.#pendingSyncStateCallbacks[peerId];\n        if (!pendingCallbacks) {\n            this.#onLoadSyncState(peerId)\n                .then(syncState => {\n                this.#initSyncState(peerId, syncState ?? A.initSyncState());\n            })\n                .catch(err => {\n                this.#log(`Error loading sync state for ${peerId}: ${err}`);\n            });\n            pendingCallbacks = this.#pendingSyncStateCallbacks[peerId] = [];\n        }\n        pendingCallbacks.push(callback);\n    }\n    #addPeer(peerId) {\n        if (!this.#peers.includes(peerId)) {\n            this.#peers.push(peerId);\n            this.emit(\"open-doc\", { documentId: this.documentId, peerId });\n        }\n    }\n    #initSyncState(peerId, syncState) {\n        const pendingCallbacks = this.#pendingSyncStateCallbacks[peerId];\n        if (pendingCallbacks) {\n            for (const callback of pendingCallbacks) {\n                callback(syncState);\n            }\n        }\n        delete this.#pendingSyncStateCallbacks[peerId];\n        this.#syncStates[peerId] = syncState;\n    }\n    #setSyncState(peerId, syncState) {\n        this.#syncStates[peerId] = syncState;\n        this.emit(\"sync-state\", {\n            peerId,\n            syncState,\n            documentId: this.#handle.documentId,\n        });\n    }\n    #sendSyncMessage(peerId, doc) {\n        this.#log(`sendSyncMessage ->${peerId}`);\n        this.#withSyncState(peerId, syncState => {\n            const [newSyncState, message] = A.generateSyncMessage(doc, syncState);\n            if (message) {\n                this.#setSyncState(peerId, newSyncState);\n                const isNew = A.getHeads(doc).length === 0;\n                if (!this.#handle.isReady() &&\n                    isNew &&\n                    newSyncState.sharedHeads.length === 0 &&\n                    !Object.values(this.#peerDocumentStatuses).includes(\"has\") &&\n                    this.#peerDocumentStatuses[peerId] === \"unknown\") {\n                    // we don't have the document (or access to it), so we request it\n                    this.emit(\"message\", {\n                        type: \"request\",\n                        targetId: peerId,\n                        documentId: this.#handle.documentId,\n                        data: message,\n                    });\n                }\n                else {\n                    this.emit(\"message\", {\n                        type: \"sync\",\n                        targetId: peerId,\n                        data: message,\n                        documentId: this.#handle.documentId,\n                    });\n                }\n                // if we have sent heads, then the peer now has or will have the document\n                if (!isNew) {\n                    this.#peerDocumentStatuses[peerId] = \"has\";\n                }\n            }\n        });\n    }\n    /// PUBLIC\n    hasPeer(peerId) {\n        return this.#peers.includes(peerId);\n    }\n    beginSync(peerIds) {\n        const noPeersWithDocument = peerIds.every((peerId) => this.#peerDocumentStatuses[peerId] in [\"unavailable\", \"wants\"]);\n        // At this point if we don't have anything in our storage, we need to use an empty doc to sync\n        // with; but we don't want to surface that state to the front end\n        const docPromise = this.#handle\n            .doc([READY, REQUESTING, UNAVAILABLE])\n            .then(doc => {\n            // we register out peers first, then say that sync has started\n            this.#syncStarted = true;\n            this.#checkDocUnavailable();\n            const wasUnavailable = doc === undefined;\n            if (wasUnavailable && noPeersWithDocument) {\n                return;\n            }\n            // If the doc is unavailable we still need a blank document to generate\n            // the sync message from\n            return doc ?? A.init();\n        });\n        this.#log(`beginSync: ${peerIds.join(\", \")}`);\n        peerIds.forEach(peerId => {\n            this.#withSyncState(peerId, syncState => {\n                // HACK: if we have a sync state already, we round-trip it through the encoding system to make\n                // sure state is preserved. This prevents an infinite loop caused by failed attempts to send\n                // messages during disconnection.\n                // TODO: cover that case with a test and remove this hack\n                const reparsedSyncState = A.decodeSyncState(A.encodeSyncState(syncState));\n                this.#setSyncState(peerId, reparsedSyncState);\n                docPromise\n                    .then(doc => {\n                    if (doc) {\n                        this.#sendSyncMessage(peerId, doc);\n                    }\n                })\n                    .catch(err => {\n                    this.#log(`Error loading doc for ${peerId}: ${err}`);\n                });\n            });\n        });\n    }\n    endSync(peerId) {\n        this.#log(`removing peer ${peerId}`);\n        this.#peers = this.#peers.filter(p => p !== peerId);\n    }\n    receiveMessage(message) {\n        switch (message.type) {\n            case \"sync\":\n            case \"request\":\n                this.receiveSyncMessage(message);\n                break;\n            case \"ephemeral\":\n                this.receiveEphemeralMessage(message);\n                break;\n            case \"doc-unavailable\":\n                this.#peerDocumentStatuses[message.senderId] = \"unavailable\";\n                this.#checkDocUnavailable();\n                break;\n            default:\n                throw new Error(`unknown message type: ${message}`);\n        }\n    }\n    receiveEphemeralMessage(message) {\n        if (message.documentId !== this.#handle.documentId)\n            throw new Error(`channelId doesn't match documentId`);\n        const { senderId, data } = message;\n        const contents = decode(new Uint8Array(data));\n        this.#handle.emit(\"ephemeral-message\", {\n            handle: this.#handle,\n            senderId,\n            message: contents,\n        });\n        this.#peers.forEach(peerId => {\n            if (peerId === senderId)\n                return;\n            this.emit(\"message\", {\n                ...message,\n                targetId: peerId,\n            });\n        });\n    }\n    receiveSyncMessage(message) {\n        if (message.documentId !== this.#handle.documentId)\n            throw new Error(`channelId doesn't match documentId`);\n        // We need to block receiving the syncMessages until we've checked local storage\n        if (!this.#handle.inState([READY, REQUESTING, UNAVAILABLE])) {\n            this.#pendingSyncMessages.push({ message, received: new Date() });\n            return;\n        }\n        this.#processAllPendingSyncMessages();\n        this.#processSyncMessage(message);\n    }\n    #processSyncMessage(message) {\n        if (isRequestMessage(message)) {\n            this.#peerDocumentStatuses[message.senderId] = \"wants\";\n        }\n        this.#checkDocUnavailable();\n        // if the message has heads, then the peer has the document\n        if (A.decodeSyncMessage(message.data).heads.length > 0) {\n            this.#peerDocumentStatuses[message.senderId] = \"has\";\n        }\n        this.#withSyncState(message.senderId, syncState => {\n            this.#handle.update(doc => {\n                const [newDoc, newSyncState] = A.receiveSyncMessage(doc, syncState, message.data);\n                this.#setSyncState(message.senderId, newSyncState);\n                // respond to just this peer (as required)\n                this.#sendSyncMessage(message.senderId, doc);\n                return newDoc;\n            });\n            this.#checkDocUnavailable();\n        });\n    }\n    #checkDocUnavailable() {\n        // if we know none of the peers have the document, tell all our peers that we don't either\n        if (this.#syncStarted &&\n            this.#handle.inState([REQUESTING]) &&\n            this.#peers.every(peerId => this.#peerDocumentStatuses[peerId] === \"unavailable\" ||\n                this.#peerDocumentStatuses[peerId] === \"wants\")) {\n            this.#peers\n                .filter(peerId => this.#peerDocumentStatuses[peerId] === \"wants\")\n                .forEach(peerId => {\n                const message = {\n                    type: \"doc-unavailable\",\n                    documentId: this.#handle.documentId,\n                    targetId: peerId,\n                };\n                this.emit(\"message\", message);\n            });\n            this.#handle.unavailable();\n        }\n    }\n    #processAllPendingSyncMessages() {\n        for (const message of this.#pendingSyncMessages) {\n            this.#processSyncMessage(message.message);\n        }\n        this.#pendingSyncMessages = [];\n    }\n}\n","import debug from \"debug\";\nimport { stringifyAutomergeUrl } from \"../AutomergeUrl.js\";\nimport { DocSynchronizer } from \"./DocSynchronizer.js\";\nimport { Synchronizer } from \"./Synchronizer.js\";\nconst log = debug(\"automerge-repo:collectionsync\");\n/** A CollectionSynchronizer is responsible for synchronizing a DocCollection with peers. */\nexport class CollectionSynchronizer extends Synchronizer {\n    repo;\n    /** The set of peers we are connected with */\n    #peers = new Set();\n    /** A map of documentIds to their synchronizers */\n    #docSynchronizers = {};\n    /** Used to determine if the document is know to the Collection and a synchronizer exists or is being set up */\n    #docSetUp = {};\n    constructor(repo) {\n        super();\n        this.repo = repo;\n    }\n    /** Returns a synchronizer for the given document, creating one if it doesn't already exist.  */\n    #fetchDocSynchronizer(documentId) {\n        if (!this.#docSynchronizers[documentId]) {\n            const handle = this.repo.find(stringifyAutomergeUrl({ documentId }));\n            this.#docSynchronizers[documentId] = this.#initDocSynchronizer(handle);\n        }\n        return this.#docSynchronizers[documentId];\n    }\n    /** Creates a new docSynchronizer and sets it up to propagate messages */\n    #initDocSynchronizer(handle) {\n        const docSynchronizer = new DocSynchronizer({\n            handle,\n            onLoadSyncState: async (peerId) => {\n                if (!this.repo.storageSubsystem) {\n                    return;\n                }\n                const { storageId, isEphemeral } = this.repo.peerMetadataByPeerId[peerId] || {};\n                if (!storageId || isEphemeral) {\n                    return;\n                }\n                return this.repo.storageSubsystem.loadSyncState(handle.documentId, storageId);\n            },\n        });\n        docSynchronizer.on(\"message\", event => this.emit(\"message\", event));\n        docSynchronizer.on(\"open-doc\", event => this.emit(\"open-doc\", event));\n        docSynchronizer.on(\"sync-state\", event => this.emit(\"sync-state\", event));\n        return docSynchronizer;\n    }\n    /** returns an array of peerIds that we share this document generously with */\n    async #documentGenerousPeers(documentId) {\n        const peers = Array.from(this.#peers);\n        const generousPeers = [];\n        for (const peerId of peers) {\n            const okToShare = await this.repo.sharePolicy(peerId, documentId);\n            if (okToShare)\n                generousPeers.push(peerId);\n        }\n        return generousPeers;\n    }\n    // PUBLIC\n    /**\n     * When we receive a sync message for a document we haven't got in memory, we\n     * register it with the repo and start synchronizing\n     */\n    async receiveMessage(message) {\n        log(`onSyncMessage: ${message.senderId}, ${message.documentId}, ${\"data\" in message ? message.data.byteLength + \"bytes\" : \"\"}`);\n        const documentId = message.documentId;\n        if (!documentId) {\n            throw new Error(\"received a message with an invalid documentId\");\n        }\n        this.#docSetUp[documentId] = true;\n        const docSynchronizer = this.#fetchDocSynchronizer(documentId);\n        docSynchronizer.receiveMessage(message);\n        // Initiate sync with any new peers\n        const peers = await this.#documentGenerousPeers(documentId);\n        docSynchronizer.beginSync(peers.filter(peerId => !docSynchronizer.hasPeer(peerId)));\n    }\n    /**\n     * Starts synchronizing the given document with all peers that we share it generously with.\n     */\n    addDocument(documentId) {\n        // HACK: this is a hack to prevent us from adding the same document twice\n        if (this.#docSetUp[documentId]) {\n            return;\n        }\n        const docSynchronizer = this.#fetchDocSynchronizer(documentId);\n        void this.#documentGenerousPeers(documentId).then(peers => {\n            docSynchronizer.beginSync(peers);\n        });\n    }\n    // TODO: implement this\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    removeDocument(documentId) {\n        throw new Error(\"not implemented\");\n    }\n    /** Adds a peer and maybe starts synchronizing with them */\n    addPeer(peerId) {\n        log(`adding ${peerId} & synchronizing with them`);\n        if (this.#peers.has(peerId)) {\n            return;\n        }\n        this.#peers.add(peerId);\n        for (const docSynchronizer of Object.values(this.#docSynchronizers)) {\n            const { documentId } = docSynchronizer;\n            void this.repo.sharePolicy(peerId, documentId).then(okToShare => {\n                if (okToShare)\n                    docSynchronizer.beginSync([peerId]);\n            });\n        }\n    }\n    /** Removes a peer and stops synchronizing with them */\n    removePeer(peerId) {\n        log(`removing peer ${peerId}`);\n        this.#peers.delete(peerId);\n        for (const docSynchronizer of Object.values(this.#docSynchronizers)) {\n            docSynchronizer.endSync(peerId);\n        }\n    }\n    /** Returns a list of all connected peer ids */\n    get peers() {\n        return Array.from(this.#peers);\n    }\n}\n","import { next as Automerge } from \"@automerge/automerge\";\nimport debug from \"debug\";\nimport { EventEmitter } from \"eventemitter3\";\nimport { generateAutomergeUrl, interpretAsDocumentId, parseAutomergeUrl, } from \"./AutomergeUrl.js\";\nimport { DocHandle } from \"./DocHandle.js\";\nimport { RemoteHeadsSubscriptions } from \"./RemoteHeadsSubscriptions.js\";\nimport { headsAreSame } from \"./helpers/headsAreSame.js\";\nimport { throttle } from \"./helpers/throttle.js\";\nimport { NetworkSubsystem } from \"./network/NetworkSubsystem.js\";\nimport { StorageSubsystem } from \"./storage/StorageSubsystem.js\";\nimport { CollectionSynchronizer } from \"./synchronizer/CollectionSynchronizer.js\";\n/** A Repo is a collection of documents with networking, syncing, and storage capabilities. */\n/** The `Repo` is the main entry point of this library\n *\n * @remarks\n * To construct a `Repo` you will need an {@link StorageAdapter} and one or\n * more {@link NetworkAdapter}s. Once you have a `Repo` you can use it to\n * obtain {@link DocHandle}s.\n */\nexport class Repo extends EventEmitter {\n    #log;\n    /** @hidden */\n    networkSubsystem;\n    /** @hidden */\n    storageSubsystem;\n    /** The debounce rate is adjustable on the repo. */\n    /** @hidden */\n    saveDebounceRate = 100;\n    #handleCache = {};\n    #synchronizer;\n    /** By default, we share generously with all peers. */\n    /** @hidden */\n    sharePolicy = async () => true;\n    /** maps peer id to to persistence information (storageId, isEphemeral), access by collection synchronizer  */\n    /** @hidden */\n    peerMetadataByPeerId = {};\n    #remoteHeadsSubscriptions = new RemoteHeadsSubscriptions();\n    #remoteHeadsGossipingEnabled = false;\n    constructor({ storage, network, peerId, sharePolicy, isEphemeral = storage === undefined, enableRemoteHeadsGossiping = false, }) {\n        super();\n        this.#remoteHeadsGossipingEnabled = enableRemoteHeadsGossiping;\n        this.#log = debug(`automerge-repo:repo`);\n        this.sharePolicy = sharePolicy ?? this.sharePolicy;\n        // DOC COLLECTION\n        // The `document` event is fired by the DocCollection any time we create a new document or look\n        // up a document by ID. We listen for it in order to wire up storage and network synchronization.\n        this.on(\"document\", async ({ handle, isNew }) => {\n            if (storageSubsystem) {\n                // Save when the document changes, but no more often than saveDebounceRate.\n                const saveFn = ({ handle, doc, }) => {\n                    void storageSubsystem.saveDoc(handle.documentId, doc);\n                };\n                handle.on(\"heads-changed\", throttle(saveFn, this.saveDebounceRate));\n                if (isNew) {\n                    // this is a new document, immediately save it\n                    await storageSubsystem.saveDoc(handle.documentId, handle.docSync());\n                }\n                else {\n                    // Try to load from disk\n                    const loadedDoc = await storageSubsystem.loadDoc(handle.documentId);\n                    if (loadedDoc) {\n                        handle.update(() => loadedDoc);\n                    }\n                }\n            }\n            handle.on(\"unavailable\", () => {\n                this.#log(\"document unavailable\", { documentId: handle.documentId });\n                this.emit(\"unavailable-document\", {\n                    documentId: handle.documentId,\n                });\n            });\n            if (this.networkSubsystem.isReady()) {\n                handle.request();\n            }\n            else {\n                handle.awaitNetwork();\n                this.networkSubsystem\n                    .whenReady()\n                    .then(() => {\n                    handle.networkReady();\n                })\n                    .catch(err => {\n                    this.#log(\"error waiting for network\", { err });\n                });\n            }\n            // Register the document with the synchronizer. This advertises our interest in the document.\n            this.#synchronizer.addDocument(handle.documentId);\n        });\n        this.on(\"delete-document\", ({ documentId }) => {\n            // TODO Pass the delete on to the network\n            // synchronizer.removeDocument(documentId)\n            if (storageSubsystem) {\n                storageSubsystem.removeDoc(documentId).catch(err => {\n                    this.#log(\"error deleting document\", { documentId, err });\n                });\n            }\n        });\n        // SYNCHRONIZER\n        // The synchronizer uses the network subsystem to keep documents in sync with peers.\n        this.#synchronizer = new CollectionSynchronizer(this);\n        // When the synchronizer emits messages, send them to peers\n        this.#synchronizer.on(\"message\", message => {\n            this.#log(`sending ${message.type} message to ${message.targetId}`);\n            networkSubsystem.send(message);\n        });\n        if (this.#remoteHeadsGossipingEnabled) {\n            this.#synchronizer.on(\"open-doc\", ({ peerId, documentId }) => {\n                this.#remoteHeadsSubscriptions.subscribePeerToDoc(peerId, documentId);\n            });\n        }\n        // STORAGE\n        // The storage subsystem has access to some form of persistence, and deals with save and loading documents.\n        const storageSubsystem = storage ? new StorageSubsystem(storage) : undefined;\n        this.storageSubsystem = storageSubsystem;\n        // NETWORK\n        // The network subsystem deals with sending and receiving messages to and from peers.\n        const myPeerMetadata = (async () => ({\n            storageId: await storageSubsystem?.id(),\n            isEphemeral,\n        }))();\n        const networkSubsystem = new NetworkSubsystem(network, peerId, myPeerMetadata);\n        this.networkSubsystem = networkSubsystem;\n        // When we get a new peer, register it with the synchronizer\n        networkSubsystem.on(\"peer\", async ({ peerId, peerMetadata }) => {\n            this.#log(\"peer connected\", { peerId });\n            if (peerMetadata) {\n                this.peerMetadataByPeerId[peerId] = { ...peerMetadata };\n            }\n            this.sharePolicy(peerId)\n                .then(shouldShare => {\n                if (shouldShare && this.#remoteHeadsGossipingEnabled) {\n                    this.#remoteHeadsSubscriptions.addGenerousPeer(peerId);\n                }\n            })\n                .catch(err => {\n                console.log(\"error in share policy\", { err });\n            });\n            this.#synchronizer.addPeer(peerId);\n        });\n        // When a peer disconnects, remove it from the synchronizer\n        networkSubsystem.on(\"peer-disconnected\", ({ peerId }) => {\n            this.#synchronizer.removePeer(peerId);\n            this.#remoteHeadsSubscriptions.removePeer(peerId);\n        });\n        // Handle incoming messages\n        networkSubsystem.on(\"message\", async (msg) => {\n            this.#receiveMessage(msg);\n        });\n        this.#synchronizer.on(\"sync-state\", message => {\n            this.#saveSyncState(message);\n            const handle = this.#handleCache[message.documentId];\n            const { storageId } = this.peerMetadataByPeerId[message.peerId] || {};\n            if (!storageId) {\n                return;\n            }\n            const heads = handle.getRemoteHeads(storageId);\n            const haveHeadsChanged = message.syncState.theirHeads &&\n                (!heads || !headsAreSame(heads, message.syncState.theirHeads));\n            if (haveHeadsChanged) {\n                handle.setRemoteHeads(storageId, message.syncState.theirHeads);\n                if (storageId && this.#remoteHeadsGossipingEnabled) {\n                    this.#remoteHeadsSubscriptions.handleImmediateRemoteHeadsChanged(message.documentId, storageId, message.syncState.theirHeads);\n                }\n            }\n        });\n        if (this.#remoteHeadsGossipingEnabled) {\n            this.#remoteHeadsSubscriptions.on(\"notify-remote-heads\", message => {\n                this.networkSubsystem.send({\n                    type: \"remote-heads-changed\",\n                    targetId: message.targetId,\n                    documentId: message.documentId,\n                    newHeads: {\n                        [message.storageId]: {\n                            heads: message.heads,\n                            timestamp: message.timestamp,\n                        },\n                    },\n                });\n            });\n            this.#remoteHeadsSubscriptions.on(\"change-remote-subs\", message => {\n                this.#log(\"change-remote-subs\", message);\n                for (const peer of message.peers) {\n                    this.networkSubsystem.send({\n                        type: \"remote-subscription-change\",\n                        targetId: peer,\n                        add: message.add,\n                        remove: message.remove,\n                    });\n                }\n            });\n            this.#remoteHeadsSubscriptions.on(\"remote-heads-changed\", message => {\n                const handle = this.#handleCache[message.documentId];\n                handle.setRemoteHeads(message.storageId, message.remoteHeads);\n            });\n        }\n    }\n    #receiveMessage(message) {\n        switch (message.type) {\n            case \"remote-subscription-change\":\n                if (this.#remoteHeadsGossipingEnabled) {\n                    this.#remoteHeadsSubscriptions.handleControlMessage(message);\n                }\n                break;\n            case \"remote-heads-changed\":\n                if (this.#remoteHeadsGossipingEnabled) {\n                    this.#remoteHeadsSubscriptions.handleRemoteHeads(message);\n                }\n                break;\n            case \"sync\":\n            case \"request\":\n            case \"ephemeral\":\n            case \"doc-unavailable\":\n                this.#synchronizer.receiveMessage(message).catch(err => {\n                    console.log(\"error receiving message\", { err });\n                });\n        }\n    }\n    #throttledSaveSyncStateHandlers = {};\n    /** saves sync state throttled per storage id, if a peer doesn't have a storage id it's sync state is not persisted */\n    #saveSyncState(payload) {\n        if (!this.storageSubsystem) {\n            return;\n        }\n        const { storageId, isEphemeral } = this.peerMetadataByPeerId[payload.peerId] || {};\n        if (!storageId || isEphemeral) {\n            return;\n        }\n        let handler = this.#throttledSaveSyncStateHandlers[storageId];\n        if (!handler) {\n            handler = this.#throttledSaveSyncStateHandlers[storageId] = throttle(({ documentId, syncState }) => {\n                void this.storageSubsystem.saveSyncState(documentId, storageId, syncState);\n            }, this.saveDebounceRate);\n        }\n        handler(payload);\n    }\n    /** Returns an existing handle if we have it; creates one otherwise. */\n    #getHandle({ documentId, isNew, initialValue, }) {\n        // If we have the handle cached, return it\n        if (this.#handleCache[documentId])\n            return this.#handleCache[documentId];\n        // If not, create a new handle, cache it, and return it\n        if (!documentId)\n            throw new Error(`Invalid documentId ${documentId}`);\n        const handle = new DocHandle(documentId, { isNew, initialValue });\n        this.#handleCache[documentId] = handle;\n        return handle;\n    }\n    /** Returns all the handles we have cached. */\n    get handles() {\n        return this.#handleCache;\n    }\n    /** Returns a list of all connected peer ids */\n    get peers() {\n        return this.#synchronizer.peers;\n    }\n    getStorageIdOfPeer(peerId) {\n        return this.peerMetadataByPeerId[peerId]?.storageId;\n    }\n    /**\n     * Creates a new document and returns a handle to it. The initial value of the document is an\n     * empty object `{}` unless an initial value is provided. Its documentId is generated by the\n     * system. we emit a `document` event to advertise interest in the document.\n     */\n    create(initialValue) {\n        // Generate a new UUID and store it in the buffer\n        const { documentId } = parseAutomergeUrl(generateAutomergeUrl());\n        const handle = this.#getHandle({\n            documentId,\n            isNew: true,\n            initialValue,\n        });\n        this.emit(\"document\", { handle, isNew: true });\n        return handle;\n    }\n    /** Create a new DocHandle by cloning the history of an existing DocHandle.\n     *\n     * @param clonedHandle - The handle to clone\n     *\n     * @remarks This is a wrapper around the `clone` function in the Automerge library.\n     * The new `DocHandle` will have a new URL but will share history with the original,\n     * which means that changes made to the cloned handle can be sensibly merged back\n     * into the original.\n     *\n     * Any peers this `Repo` is connected to for whom `sharePolicy` returns `true` will\n     * be notified of the newly created DocHandle.\n     *\n     * @throws if the cloned handle is not yet ready or if\n     * `clonedHandle.docSync()` returns `undefined` (i.e. the handle is unavailable).\n     */\n    clone(clonedHandle) {\n        if (!clonedHandle.isReady()) {\n            throw new Error(`Cloned handle is not yet in ready state.\n        (Try await handle.waitForReady() first.)`);\n        }\n        const sourceDoc = clonedHandle.docSync();\n        if (!sourceDoc) {\n            throw new Error(\"Cloned handle doesn't have a document.\");\n        }\n        const handle = this.create();\n        handle.update(() => {\n            // we replace the document with the new cloned one\n            return Automerge.clone(sourceDoc);\n        });\n        return handle;\n    }\n    /**\n     * Retrieves a document by id. It gets data from the local system, but also emits a `document`\n     * event to advertise interest in the document.\n     */\n    find(\n    /** The url or documentId of the handle to retrieve */\n    id) {\n        const documentId = interpretAsDocumentId(id);\n        // If we have the handle cached, return it\n        if (this.#handleCache[documentId]) {\n            if (this.#handleCache[documentId].isUnavailable()) {\n                // this ensures that the event fires after the handle has been returned\n                setTimeout(() => {\n                    this.#handleCache[documentId].emit(\"unavailable\", {\n                        handle: this.#handleCache[documentId],\n                    });\n                });\n            }\n            return this.#handleCache[documentId];\n        }\n        const handle = this.#getHandle({\n            documentId,\n            isNew: false,\n        });\n        this.emit(\"document\", { handle, isNew: false });\n        return handle;\n    }\n    delete(\n    /** The url or documentId of the handle to delete */\n    id) {\n        const documentId = interpretAsDocumentId(id);\n        const handle = this.#getHandle({ documentId, isNew: false });\n        handle.delete();\n        delete this.#handleCache[documentId];\n        this.emit(\"delete-document\", { documentId });\n    }\n    /**\n     * Exports a document to a binary format.\n     * @param id - The url or documentId of the handle to export\n     *\n     * @returns Promise<Uint8Array | undefined> - A Promise containing the binary document,\n     * or undefined if the document is unavailable.\n     */\n    async export(id) {\n        const documentId = interpretAsDocumentId(id);\n        const handle = this.#getHandle({ documentId, isNew: false });\n        const doc = await handle.doc();\n        if (!doc)\n            return undefined;\n        return Automerge.save(doc);\n    }\n    /**\n     * Imports document binary into the repo.\n     * @param binary - The binary to import\n     */\n    import(binary) {\n        const doc = Automerge.load(binary);\n        const handle = this.create();\n        handle.update(() => {\n            return Automerge.clone(doc);\n        });\n        return handle;\n    }\n    subscribeToRemotes = (remotes) => {\n        if (this.#remoteHeadsGossipingEnabled) {\n            this.#log(\"subscribeToRemotes\", { remotes });\n            this.#remoteHeadsSubscriptions.subscribeToRemotes(remotes);\n        }\n        else {\n            this.#log(\"WARN: subscribeToRemotes called but remote heads gossiping is not enabled\");\n        }\n    };\n    storageId = async () => {\n        if (!this.storageSubsystem) {\n            return undefined;\n        }\n        else {\n            return this.storageSubsystem.id();\n        }\n    };\n}\n","/* c8 ignore start */\nimport { EventEmitter } from \"eventemitter3\";\n/** An interface representing some way to connect to other peers\n * @deprecated use {@link NetworkAdapterInterface}\n *\n * @remarks\n * The {@link Repo} uses one or more `NetworkAdapter`s to connect to other peers.\n * Because the network may take some time to be ready the {@link Repo} will wait\n * until the adapter emits a `ready` event before it starts trying to use it\n */\nexport class NetworkAdapter extends EventEmitter {\n    peerId;\n    peerMetadata;\n}\n","/** A storage adapter represents some way of storing binary data for a {@link Repo}\n * @deprecated use {@link StorageAdapterInterface}\n *\n * @remarks\n * `StorageAdapter`s provide a key/value storage interface. The keys are arrays of strings\n * ({@link StorageKey}) and the values are binary blobs.\n */\nexport class StorageAdapter {\n}\n","/**\n * This module provides a storage adapter for IndexedDB.\n *\n * @packageDocumentation\n */\nimport { StorageAdapter, } from \"@automerge/automerge-repo\";\nexport class IndexedDBStorageAdapter extends StorageAdapter {\n    database;\n    store;\n    dbPromise;\n    /** Create a new {@link IndexedDBStorageAdapter}.\n     * @param database - The name of the database to use. Defaults to \"automerge\".\n     * @param store - The name of the object store to use. Defaults to \"documents\".\n     */\n    constructor(database = \"automerge\", store = \"documents\") {\n        super();\n        this.database = database;\n        this.store = store;\n        this.dbPromise = this.createDatabasePromise();\n    }\n    createDatabasePromise() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.database, 1);\n            request.onerror = () => {\n                reject(request.error);\n            };\n            request.onupgradeneeded = event => {\n                const db = event.target.result;\n                db.createObjectStore(this.store);\n            };\n            request.onsuccess = event => {\n                const db = event.target.result;\n                resolve(db);\n            };\n        });\n    }\n    async load(keyArray) {\n        const db = await this.dbPromise;\n        const transaction = db.transaction(this.store);\n        const objectStore = transaction.objectStore(this.store);\n        const request = objectStore.get(keyArray);\n        return new Promise((resolve, reject) => {\n            transaction.onerror = () => {\n                reject(request.error);\n            };\n            request.onsuccess = event => {\n                const result = event.target.result;\n                if (result && typeof result === \"object\" && \"binary\" in result) {\n                    resolve(result.binary);\n                }\n                else {\n                    resolve(undefined);\n                }\n            };\n        });\n    }\n    async save(keyArray, binary) {\n        const db = await this.dbPromise;\n        const transaction = db.transaction(this.store, \"readwrite\");\n        const objectStore = transaction.objectStore(this.store);\n        objectStore.put({ key: keyArray, binary: binary }, keyArray);\n        return new Promise((resolve, reject) => {\n            transaction.onerror = () => {\n                reject(transaction.error);\n            };\n            transaction.oncomplete = () => {\n                resolve();\n            };\n        });\n    }\n    async remove(keyArray) {\n        const db = await this.dbPromise;\n        const transaction = db.transaction(this.store, \"readwrite\");\n        const objectStore = transaction.objectStore(this.store);\n        objectStore.delete(keyArray);\n        return new Promise((resolve, reject) => {\n            transaction.onerror = () => {\n                reject(transaction.error);\n            };\n            transaction.oncomplete = () => {\n                resolve();\n            };\n        });\n    }\n    async loadRange(keyPrefix) {\n        const db = await this.dbPromise;\n        const lowerBound = keyPrefix;\n        const upperBound = [...keyPrefix, \"\\uffff\"];\n        const range = IDBKeyRange.bound(lowerBound, upperBound);\n        const transaction = db.transaction(this.store);\n        const objectStore = transaction.objectStore(this.store);\n        const request = objectStore.openCursor(range);\n        const result = [];\n        return new Promise((resolve, reject) => {\n            transaction.onerror = () => {\n                reject(request.error);\n            };\n            request.onsuccess = event => {\n                const cursor = event.target.result;\n                if (cursor) {\n                    result.push({\n                        data: cursor.value.binary,\n                        key: cursor.key,\n                    });\n                    cursor.continue();\n                }\n                else {\n                    resolve(result);\n                }\n            };\n        });\n    }\n    async removeRange(keyPrefix) {\n        const db = await this.dbPromise;\n        const lowerBound = keyPrefix;\n        const upperBound = [...keyPrefix, \"\\uffff\"];\n        const range = IDBKeyRange.bound(lowerBound, upperBound);\n        const transaction = db.transaction(this.store, \"readwrite\");\n        const objectStore = transaction.objectStore(this.store);\n        objectStore.delete(range);\n        return new Promise((resolve, reject) => {\n            transaction.onerror = () => {\n                reject(transaction.error);\n            };\n            transaction.oncomplete = () => {\n                resolve();\n            };\n        });\n    }\n}\n","// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket\n}\n\nexport default ws\n","// TYPE GUARDS\nexport const isJoinMessage = (message) => message.type === \"join\";\nexport const isLeaveMessage = (message) => message.type === \"leave\";\nexport const isPeerMessage = (message) => message.type === \"peer\";\nexport const isErrorMessage = (message) => message.type === \"error\";\n","export const ProtocolV1 = \"1\";\n","/* c8 ignore start */\nexport function assert(value, message = \"Assertion failed\") {\n    if (value === false || value === null || value === undefined) {\n        const error = new Error(trimLines(message));\n        error.stack = removeLine(error.stack, \"assert.ts\");\n        throw error;\n    }\n}\nconst trimLines = (s) => s\n    .split(\"\\n\")\n    .map(s => s.trim())\n    .join(\"\\n\");\nconst removeLine = (s = \"\", targetText) => s\n    .split(\"\\n\")\n    .filter(line => !line.includes(targetText))\n    .join(\"\\n\");\n/* c8 ignore end */\n","/**\n * This incantation deals with websocket sending the whole underlying buffer even if we just have a\n * uint8array view on it\n */\nexport const toArrayBuffer = (bytes) => {\n    const { buffer, byteOffset, byteLength } = bytes;\n    return buffer.slice(byteOffset, byteOffset + byteLength);\n};\n","import { NetworkAdapter, cbor, } from \"@automerge/automerge-repo\";\nimport WebSocket from \"isomorphic-ws\";\nimport debug from \"debug\";\nimport { isErrorMessage, isPeerMessage, } from \"./messages.js\";\nimport { ProtocolV1 } from \"./protocolVersion.js\";\nimport { assert } from \"./assert.js\";\nimport { toArrayBuffer } from \"./toArrayBuffer.js\";\nclass WebSocketNetworkAdapter extends NetworkAdapter {\n    socket;\n}\nexport class BrowserWebSocketClientAdapter extends WebSocketNetworkAdapter {\n    url;\n    retryInterval;\n    #isReady = false;\n    #retryIntervalId;\n    #log = debug(\"automerge-repo:websocket:browser\");\n    remotePeerId; // this adapter only connects to one remote client at a time\n    constructor(url, retryInterval = 5000) {\n        super();\n        this.url = url;\n        this.retryInterval = retryInterval;\n        this.#log = this.#log.extend(url);\n    }\n    connect(peerId, peerMetadata) {\n        if (!this.socket || !this.peerId) {\n            // first time connecting\n            this.#log(\"connecting\");\n            this.peerId = peerId;\n            this.peerMetadata = peerMetadata ?? {};\n        }\n        else {\n            this.#log(\"reconnecting\");\n            assert(peerId === this.peerId);\n            // Remove the old event listeners before creating a new connection.\n            this.socket.removeEventListener(\"open\", this.onOpen);\n            this.socket.removeEventListener(\"close\", this.onClose);\n            this.socket.removeEventListener(\"message\", this.onMessage);\n            this.socket.removeEventListener(\"error\", this.onError);\n        }\n        // Wire up retries\n        if (!this.#retryIntervalId)\n            this.#retryIntervalId = setInterval(() => {\n                this.connect(peerId, peerMetadata);\n            }, this.retryInterval);\n        this.socket = new WebSocket(this.url);\n        this.socket.binaryType = \"arraybuffer\";\n        this.socket.addEventListener(\"open\", this.onOpen);\n        this.socket.addEventListener(\"close\", this.onClose);\n        this.socket.addEventListener(\"message\", this.onMessage);\n        this.socket.addEventListener(\"error\", this.onError);\n        // Mark this adapter as ready if we haven't received an ack in 1 second.\n        // We might hear back from the other end at some point but we shouldn't\n        // hold up marking things as unavailable for any longer\n        setTimeout(() => this.#ready(), 1000);\n        this.join();\n    }\n    onOpen = () => {\n        this.#log(\"open\");\n        clearInterval(this.#retryIntervalId);\n        this.#retryIntervalId = undefined;\n        this.join();\n    };\n    // When a socket closes, or disconnects, remove it from the array.\n    onClose = () => {\n        this.#log(\"close\");\n        if (this.remotePeerId)\n            this.emit(\"peer-disconnected\", { peerId: this.remotePeerId });\n        if (this.retryInterval > 0 && !this.#retryIntervalId)\n            // try to reconnect\n            setTimeout(() => {\n                assert(this.peerId);\n                return this.connect(this.peerId, this.peerMetadata);\n            }, this.retryInterval);\n    };\n    onMessage = (event) => {\n        this.receiveMessage(event.data);\n    };\n    onError = (event) => {\n        const { code } = event.error;\n        if (code === \"ECONNREFUSED\") {\n            this.#log(\"Connection refused, retrying...\");\n        }\n        else {\n            /* c8 ignore next */\n            throw event.error;\n        }\n    };\n    #ready() {\n        if (this.#isReady)\n            return;\n        this.#isReady = true;\n        this.emit(\"ready\", { network: this });\n    }\n    join() {\n        assert(this.peerId);\n        assert(this.socket);\n        if (this.socket.readyState === WebSocket.OPEN) {\n            this.send(joinMessage(this.peerId, this.peerMetadata));\n        }\n        else {\n            // We'll try again in the `onOpen` handler\n        }\n    }\n    disconnect() {\n        assert(this.peerId);\n        assert(this.socket);\n        this.send({ type: \"leave\", senderId: this.peerId });\n    }\n    send(message) {\n        if (\"data\" in message && message.data?.byteLength === 0)\n            throw new Error(\"Tried to send a zero-length message\");\n        assert(this.peerId);\n        assert(this.socket);\n        if (this.socket.readyState !== WebSocket.OPEN)\n            throw new Error(`Websocket not ready (${this.socket.readyState})`);\n        const encoded = cbor.encode(message);\n        this.socket.send(toArrayBuffer(encoded));\n    }\n    peerCandidate(remotePeerId, peerMetadata) {\n        assert(this.socket);\n        this.#ready();\n        this.remotePeerId = remotePeerId;\n        this.emit(\"peer-candidate\", {\n            peerId: remotePeerId,\n            peerMetadata,\n        });\n    }\n    receiveMessage(messageBytes) {\n        const message = cbor.decode(new Uint8Array(messageBytes));\n        assert(this.socket);\n        if (messageBytes.byteLength === 0)\n            throw new Error(\"received a zero-length message\");\n        if (isPeerMessage(message)) {\n            const { peerMetadata } = message;\n            this.#log(`peer: ${message.senderId}`);\n            this.peerCandidate(message.senderId, peerMetadata);\n        }\n        else if (isErrorMessage(message)) {\n            this.#log(`error: ${message.message}`);\n        }\n        else {\n            this.emit(\"message\", message);\n        }\n    }\n}\nfunction joinMessage(senderId, peerMetadata) {\n    return {\n        type: \"join\",\n        senderId,\n        peerMetadata,\n        supportedProtocolVersions: [ProtocolV1],\n    };\n}\n","import WebSocket from \"isomorphic-ws\";\nimport debug from \"debug\";\nconst log = debug(\"WebsocketServer\");\nimport { cbor as cborHelpers, NetworkAdapter, } from \"@automerge/automerge-repo\";\nimport { isJoinMessage, isLeaveMessage, } from \"./messages.js\";\nimport { ProtocolV1 } from \"./protocolVersion.js\";\nimport { assert } from \"./assert.js\";\nimport { toArrayBuffer } from \"./toArrayBuffer.js\";\nconst { encode, decode } = cborHelpers;\nexport class NodeWSServerAdapter extends NetworkAdapter {\n    server;\n    keepAliveInterval;\n    sockets = {};\n    constructor(server, keepAliveInterval = 5000) {\n        super();\n        this.server = server;\n        this.keepAliveInterval = keepAliveInterval;\n    }\n    connect(peerId, peerMetadata) {\n        this.peerId = peerId;\n        this.peerMetadata = peerMetadata;\n        this.server.on(\"close\", () => {\n            clearInterval(keepAliveId);\n            this.disconnect();\n        });\n        this.server.on(\"connection\", (socket) => {\n            // When a socket closes, or disconnects, remove it from our list\n            socket.on(\"close\", () => {\n                this.#removeSocket(socket);\n            });\n            socket.on(\"message\", message => this.receiveMessage(message, socket));\n            // Start out \"alive\", and every time we get a pong, reset that state.\n            socket.isAlive = true;\n            socket.on(\"pong\", () => (socket.isAlive = true));\n            this.emit(\"ready\", { network: this });\n        });\n        const keepAliveId = setInterval(() => {\n            // Terminate connections to lost clients\n            const clients = this.server.clients;\n            clients.forEach(socket => {\n                if (socket.isAlive) {\n                    // Mark all clients as potentially dead until we hear from them\n                    socket.isAlive = false;\n                    socket.ping();\n                }\n                else {\n                    this.#terminate(socket);\n                }\n            });\n        }, this.keepAliveInterval);\n    }\n    disconnect() {\n        const clients = this.server.clients;\n        clients.forEach(socket => {\n            this.#terminate(socket);\n            this.#removeSocket(socket);\n        });\n    }\n    send(message) {\n        assert(\"targetId\" in message && message.targetId !== undefined);\n        if (\"data\" in message && message.data?.byteLength === 0)\n            throw new Error(\"Tried to send a zero-length message\");\n        const senderId = this.peerId;\n        assert(senderId, \"No peerId set for the websocket server network adapter.\");\n        const socket = this.sockets[message.targetId];\n        if (!socket) {\n            log(`Tried to send to disconnected peer: ${message.targetId}`);\n            return;\n        }\n        const encoded = encode(message);\n        const arrayBuf = toArrayBuffer(encoded);\n        socket.send(arrayBuf);\n    }\n    receiveMessage(messageBytes, socket) {\n        const message = decode(messageBytes);\n        const { type, senderId } = message;\n        const myPeerId = this.peerId;\n        assert(myPeerId);\n        const documentId = \"documentId\" in message ? \"@\" + message.documentId : \"\";\n        const { byteLength } = messageBytes;\n        log(`[${senderId}->${myPeerId}${documentId}] ${type} | ${byteLength} bytes`);\n        if (isJoinMessage(message)) {\n            const { peerMetadata, supportedProtocolVersions } = message;\n            const existingSocket = this.sockets[senderId];\n            if (existingSocket) {\n                if (existingSocket.readyState === WebSocket.OPEN) {\n                    existingSocket.close();\n                }\n                this.emit(\"peer-disconnected\", { peerId: senderId });\n            }\n            // Let the repo know that we have a new connection.\n            this.emit(\"peer-candidate\", { peerId: senderId, peerMetadata });\n            this.sockets[senderId] = socket;\n            const selectedProtocolVersion = selectProtocol(supportedProtocolVersions);\n            if (selectedProtocolVersion === null) {\n                this.send({\n                    type: \"error\",\n                    senderId: this.peerId,\n                    message: \"unsupported protocol version\",\n                    targetId: senderId,\n                });\n                this.sockets[senderId].close();\n                delete this.sockets[senderId];\n            }\n            else {\n                this.send({\n                    type: \"peer\",\n                    senderId: this.peerId,\n                    peerMetadata: this.peerMetadata,\n                    selectedProtocolVersion: ProtocolV1,\n                    targetId: senderId,\n                });\n            }\n        }\n        else if (isLeaveMessage(message)) {\n            const { senderId } = message;\n            const socket = this.sockets[senderId];\n            /* c8 ignore next */\n            if (!socket)\n                return;\n            this.#terminate(socket);\n        }\n        else {\n            this.emit(\"message\", message);\n        }\n    }\n    #terminate(socket) {\n        this.#removeSocket(socket);\n        socket.terminate();\n    }\n    #removeSocket(socket) {\n        const peerId = this.#peerIdBySocket(socket);\n        if (!peerId)\n            return;\n        this.emit(\"peer-disconnected\", { peerId });\n        delete this.sockets[peerId];\n    }\n    #peerIdBySocket = (socket) => {\n        const isThisSocket = (peerId) => this.sockets[peerId] === socket;\n        const result = Object.keys(this.sockets).find(isThisSocket);\n        return result ?? null;\n    };\n}\nconst selectProtocol = (versions) => {\n    if (versions === undefined)\n        return ProtocolV1;\n    if (versions.includes(ProtocolV1))\n        return ProtocolV1;\n    return null;\n};\n","/**\n *\n * A `NetworkAdapter` which uses [BroadcastChannel](https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel)\n * to communicate with other peers in the same browser tab. This is a bit of a\n * hack because `NetworkAdapter`s are supposed to be used as point to\n * point communication channels. To get around this the {@link BroadcastChannelNetworkAdapter}\n * broadcasts messages to all peers and then filters out messages not intended\n * for the current peer. This is quite inefficient as messages get duplicated\n * for every peer in the tab, but as it's all local communication anyway\n * it's not too bad. If efficiency is becoming an issue you can switch to\n * `automerge-repo-network-messagechannel`.\n *\n * @module\n *\n */\nimport { NetworkAdapter, } from \"@automerge/automerge-repo\";\nexport class BroadcastChannelNetworkAdapter extends NetworkAdapter {\n    #broadcastChannel;\n    #options;\n    constructor(options) {\n        super();\n        this.#options = { channelName: \"broadcast\", ...(options ?? {}) };\n        this.#broadcastChannel = new BroadcastChannel(this.#options.channelName);\n    }\n    connect(peerId, peerMetadata) {\n        this.peerId = peerId;\n        this.peerMetadata = peerMetadata;\n        this.#broadcastChannel.addEventListener(\"message\", (e) => {\n            const message = e.data;\n            if (\"targetId\" in message && message.targetId !== this.peerId) {\n                return;\n            }\n            const { senderId, type } = message;\n            switch (type) {\n                case \"arrive\":\n                    {\n                        const { peerMetadata } = message;\n                        this.#broadcastChannel.postMessage({\n                            senderId: this.peerId,\n                            targetId: senderId,\n                            type: \"welcome\",\n                            peerMetadata: this.peerMetadata,\n                        });\n                        this.#announceConnection(senderId, peerMetadata);\n                    }\n                    break;\n                case \"welcome\":\n                    {\n                        const { peerMetadata } = message;\n                        this.#announceConnection(senderId, peerMetadata);\n                    }\n                    break;\n                default:\n                    if (!(\"data\" in message)) {\n                        this.emit(\"message\", message);\n                    }\n                    else {\n                        const data = message.data;\n                        this.emit(\"message\", {\n                            ...message,\n                            data: new Uint8Array(data),\n                        });\n                    }\n                    break;\n            }\n        });\n        this.#broadcastChannel.postMessage({\n            senderId: this.peerId,\n            type: \"arrive\",\n            peerMetadata,\n        });\n        this.emit(\"ready\", { network: this });\n    }\n    #announceConnection(peerId, peerMetadata) {\n        this.emit(\"peer-candidate\", { peerId, peerMetadata });\n    }\n    send(message) {\n        if (\"data\" in message) {\n            this.#broadcastChannel.postMessage({\n                ...message,\n                data: message.data\n                    ? message.data.buffer.slice(message.data.byteOffset, message.data.byteOffset + message.data.byteLength)\n                    : undefined,\n            });\n        }\n        else {\n            this.#broadcastChannel.postMessage(message);\n        }\n    }\n    disconnect() {\n        // TODO:\n        throw new Error(\"Unimplemented: leave on BroadcastChannelNetworkAdapter\");\n    }\n}\n","import { next }                           from \"@automerge/automerge\"\nimport { isValidAutomergeUrl, Repo }      from '@automerge/automerge-repo'\nimport { IndexedDBStorageAdapter }        from \"@automerge/automerge-repo-storage-indexeddb\"\nimport { BrowserWebSocketClientAdapter }  from \"@automerge/automerge-repo-network-websocket\"\nimport { BroadcastChannelNetworkAdapter } from \"@automerge/automerge-repo-network-broadcastchannel\"\n\n\tconst automerge = {\n\t  next, \n\t  isValidAutomergeUrl, Repo,\n\t  IndexedDBStorageAdapter, \n\t  BrowserWebSocketClientAdapter, \n\t  BroadcastChannelNetworkAdapter\n\t}\n\n// @ts-ignore allow \"window.automerge\"\n\twindow.automerge = automerge\n\n\tdocument.dispatchEvent(\n\t  new CustomEvent('automerge',{ detail:automerge })\n\t)\n"],"names":["getRandomValues","rnds8","rng","REGEX","validate","uuid","byteToHex","i","unsafeStringify","arr","offset","stringify","parse","v","randomUUID","native","v4","options","buf","rnds","STATE","TRACE","OBJECT_ID","IS_PROXY","CLEAR_CACHE","UINT","INT","F64","COUNTER","TEXT","Text$1","Text","text","index","elems","elem","chars","value","values","numDelete","callback","searchElement","fromIndex","other","test","f","sep","start","end","Counter$1","_delta","Counter","context","path","objectId","key","delta","getWriteableCounter","WriteableCounter","RawString$1","val","parseListIndex","valueAt","target","prop","textV2","datatype","mapProxy","listProxy","textProxy","import_value","RawString","isSameDocument","printPath","_b","_c","MapHandler","cache","list","proxyList","assertString","assertText","map","proxyMap","keys","ListHandler","instance","listMethods","TextHandler","textMethods","proxied","rootProxy","length","proxyText","o","last","len","first","del","vals","result","e","initialValue","search","num","spans","jsonPointerComponents","component","Int","Uint","Float64","UseApi","api","k","ApiHandler","data","change","message","msg","state","_state","doc","checkroot","_obj","_clear_cache","_trace","_is_proxy","unstableConflictAt","conflictAt","conflictId","handleText","fullVal","__vite__wasmUrl$1","__vite__initWasm","opts","url","urlContent","bytes","binaryString","response","contentType","buffer","wasm","__wbg_set_wasm","heap","getObject","idx","WASM_VECTOR_LEN","cachedUint8Memory0","getUint8Memory0","lTextEncoder","cachedTextEncoder","encodeString","arg","view","passStringToWasm0","malloc","realloc","ptr","mem","code","ret","isLikeNone","x","cachedInt32Memory0","getInt32Memory0","heap_next","dropObject","takeObject","lTextDecoder","cachedTextDecoder","getStringFromWasm0","addHeapObject","obj","cachedFloat64Memory0","getFloat64Memory0","debugString","type","description","name","debug","builtInMatches","className","_assertClass","klass","create","retptr","r0","r1","r2","Automerge","load","encodeChange","decodeChange","initSyncState","SyncState","importSyncState","exportSyncState","encodeSyncMessage","decodeSyncMessage","encodeSyncState","decodeSyncState","handleError","args","TextRepresentation","AutomergeFinalization","Automerge$1","actor","text_rep","ptr0","len0","heads","time","deferred2_0","deferred2_1","r3","ptr1","len1","delete_count","new_text","v1","new_blocks","enable","_function","object","meta","before","after","changes","have_deps","hash","deferred1_0","deferred1_1","cursor","range","SyncStateFinalization","SyncState$1","hashes","__wbindgen_string_get","arg0","arg1","__wbindgen_is_object","__wbindgen_jsval_eq","__wbindgen_object_drop_ref","__wbindgen_error_new","__wbindgen_object_clone_ref","__wbindgen_string_new","__wbindgen_number_new","__wbindgen_number_get","__wbindgen_is_undefined","__wbindgen_boolean_get","__wbindgen_is_null","__wbindgen_is_string","__wbindgen_is_function","__wbindgen_is_array","__wbindgen_json_serialize","__wbg_new_abda76e883ba8a5f","__wbg_stack_658279fe44541cf6","__wbg_error_f851667af71bcfc6","deferred0_0","deferred0_1","__wbindgen_jsval_loose_eq","__wbg_String_91fba7ded13ba54c","__wbindgen_bigint_from_i64","__wbindgen_bigint_from_u64","__wbg_set_20cbc34131e76824","arg2","__wbg_getRandomValues_37fa2ca9e4e07fab","__wbg_randomFillSync_dc1e9a60c158336d","__wbg_crypto_c48a774b022d20ac","__wbg_process_298734cf255a885d","__wbg_versions_e2e78e134e3e5d01","__wbg_node_1cd7a5d853dbea79","__wbg_msCrypto_bcb970640f50a1e8","__wbg_require_8f08ceecec0f4fee","__wbg_log_1d3ae0273d8f4f8a","__wbg_log_576ca876af0d4a77","__wbg_get_44be0491f933a435","__wbg_length_fff51ee6522a1a18","__wbg_new_898a68150f225f2e","__wbg_newnoargs_581967eacc0e2604","__wbg_next_526fc47e980da008","__wbg_next_ddb3312ca1c4e32a","__wbg_done_5c1f01fb660d73b5","__wbg_value_1695675138684bd5","__wbg_iterator_97f0c81209c6c35a","__wbg_get_97b561fb56f034b5","__wbg_call_cb65541d95d71282","__wbg_new_b51585de1b234aff","__wbg_length_b3de0c6587c18245","__wbg_set_502d29070ea18557","__wbg_from_d7c216d4616bb368","__wbg_isArray_4c24b343cb13cfb1","__wbg_push_ca1c26067ef907ac","__wbg_unshift_de5fe028746b7cec","__wbg_instanceof_ArrayBuffer_39ac22089b74fddb","__wbg_new_d258248ed531ff54","__wbg_call_01734de55d61e11d","__wbg_call_4c92f6aec1e1d6e6","arg3","__wbg_instanceof_Date_91c15a742581fc41","__wbg_getTime_5e2054f832d82ec9","__wbg_new_cd59bfc8881f487b","__wbg_instanceof_Object_3daa8298c86298be","__wbg_assign_999478a110912e87","__wbg_defineProperty_2db1bcb00cd9da96","__wbg_entries_e51f29c7bba0c054","__wbg_freeze_29fdec6af26e40df","__wbg_keys_386d224d0262f361","__wbg_values_88acfd44c7ef08d7","__wbg_new_732c49c4e03c98a1","__wbg_apply_f9ecfcbfefaf7349","__wbg_deleteProperty_568c26e52bc57565","__wbg_ownKeys_391189872004f097","__wbg_set_092e06b0f9d71865","__wbg_buffer_085ec1f694018c4f","__wbg_concat_c15e9c7e01e04001","__wbg_slice_0a0d91ee629d603a","__wbg_for_2256af0eb4ac96ac","__wbg_toString_bb5de5cb12268093","__wbg_self_1ff1d729e9aae938","__wbg_window_5f4faef6c12b79ec","__wbg_globalThis_1d39714405582d3c","__wbg_global_651f05c6a0944d1c","__wbg_newwithbyteoffsetandlength_6da8e527659b86aa","__wbg_new_8125e318e6245eed","__wbg_set_5cf90238115182c3","__wbg_length_72e2208bbc0efc61","__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4","__wbg_newwithlength_e5d69174d6984cd7","__wbg_subarray_13db269f57aa838d","__wbindgen_debug_string","__wbindgen_throw","__wbindgen_memory","__vite__wasmModule","__vite__wasmImport_0_0","__vite__wasmImport_0_1","__vite__wasmImport_0_2","__vite__wasmImport_0_3","__vite__wasmImport_0_4","__vite__wasmImport_0_5","__vite__wasmImport_0_6","__vite__wasmImport_0_7","__vite__wasmImport_0_8","__vite__wasmImport_0_9","__vite__wasmImport_0_10","__vite__wasmImport_0_11","__vite__wasmImport_0_12","__vite__wasmImport_0_13","__vite__wasmImport_0_14","__vite__wasmImport_0_15","__vite__wasmImport_0_16","__vite__wasmImport_0_17","__vite__wasmImport_0_18","__vite__wasmImport_0_19","__vite__wasmImport_0_20","__vite__wasmImport_0_21","__vite__wasmImport_0_22","__vite__wasmImport_0_23","__vite__wasmImport_0_24","__vite__wasmImport_0_25","__vite__wasmImport_0_26","__vite__wasmImport_0_27","__vite__wasmImport_0_28","__vite__wasmImport_0_29","__vite__wasmImport_0_30","__vite__wasmImport_0_31","__vite__wasmImport_0_32","__vite__wasmImport_0_33","__vite__wasmImport_0_34","__vite__wasmImport_0_35","__vite__wasmImport_0_36","__vite__wasmImport_0_37","__vite__wasmImport_0_38","__vite__wasmImport_0_39","__vite__wasmImport_0_40","__vite__wasmImport_0_41","__vite__wasmImport_0_42","__vite__wasmImport_0_43","__vite__wasmImport_0_44","__vite__wasmImport_0_45","__vite__wasmImport_0_46","__vite__wasmImport_0_47","__vite__wasmImport_0_48","__vite__wasmImport_0_49","__vite__wasmImport_0_50","__vite__wasmImport_0_51","__vite__wasmImport_0_52","__vite__wasmImport_0_53","__vite__wasmImport_0_54","__vite__wasmImport_0_55","__vite__wasmImport_0_56","__vite__wasmImport_0_57","__vite__wasmImport_0_58","__vite__wasmImport_0_59","__vite__wasmImport_0_60","__vite__wasmImport_0_61","__vite__wasmImport_0_62","__vite__wasmImport_0_63","__vite__wasmImport_0_64","__vite__wasmImport_0_65","__vite__wasmImport_0_66","__vite__wasmImport_0_67","__vite__wasmImport_0_68","__vite__wasmImport_0_69","__vite__wasmImport_0_70","__vite__wasmImport_0_71","__vite__wasmImport_0_72","__vite__wasmImport_0_73","__vite__wasmImport_0_74","__vite__wasmImport_0_75","__vite__wasmImport_0_76","__vite__wasmImport_0_77","__vite__wasmImport_0_78","__vite__wasmImport_0_79","__vite__wasmImport_0_80","__vite__wasmImport_0_81","__vite__wasmImport_0_82","__vite__wasmImport_0_83","__vite__wasmImport_0_84","__vite__wasmImport_0_85","__vite__wasmImport_0_86","__vite__wasmImport_0_87","__vite__wasmImport_0_88","__vite__wasmImport_0_89","__vite__wasmUrl","memory","__wbg_syncstate_free","syncstate_sharedHeads","syncstate_lastSentHeads","syncstate_set_lastSentHeads","syncstate_set_sentHashes","syncstate_clone","__wbg_automerge_free","automerge_new","automerge_clone","automerge_fork","automerge_pendingOps","automerge_commit","automerge_merge","automerge_rollback","automerge_keys","automerge_text","automerge_spans","automerge_splice","automerge_updateText","automerge_push","automerge_pushObject","automerge_insert","automerge_splitBlock","automerge_joinBlock","automerge_updateBlocks","automerge_updateBlock","automerge_getBlock","automerge_insertObject","automerge_put","automerge_putObject","automerge_increment","automerge_get","automerge_getWithType","automerge_objInfo","automerge_getAll","automerge_enableFreeze","automerge_registerDatatype","automerge_applyPatches","automerge_applyAndReturnPatches","automerge_diffIncremental","automerge_updateDiffCursor","automerge_resetDiffCursor","automerge_diff","automerge_isolate","automerge_integrate","automerge_length","automerge_delete","automerge_save","automerge_saveIncremental","automerge_saveSince","automerge_saveNoCompress","automerge_saveAndVerify","automerge_loadIncremental","automerge_applyChanges","automerge_getChanges","automerge_getChangeByHash","automerge_getChangesAdded","automerge_getHeads","automerge_getActorId","automerge_getLastLocalChange","automerge_dump","automerge_getMissingDeps","automerge_receiveSyncMessage","automerge_generateSyncMessage","automerge_toJS","automerge_materialize","automerge_getCursor","automerge_getCursorPosition","automerge_emptyChange","automerge_mark","automerge_unmark","automerge_marks","automerge_marksAt","__wbindgen_malloc","__wbindgen_realloc","__wbindgen_add_to_stack_pointer","__wbindgen_free","__wbindgen_exn_store","__rest","s","t","p","insertAt","deleteAt","use","getBackend","importOpts","_actor","init","_opts","freeze","patchCallback","text_v1","handle","n","clone","stateSansHeads","free","from","initialState","_change","d","changeAt","scope","progressDocument","source","nextState","nextDoc","patches","newState","headsEqual","root","newHead","emptyChange","unchecked","allowMissingDeps","convertRawStringsToText","loadIncremental","saveIncremental","save","merge","local","remote","localState","remoteState","getActorId","getLastLocalChange","getObjectId","getChanges","oldState","getHeads","getAllChanges","applyChanges","getHistory","history","diff","checkHeads","equals","heads1","heads2","fieldname","val1","val2","isObject","keys1","keys2","sync","generateSyncMessage","inState","syncState","receiveSyncMessage","outSyncState","getMissingDeps","dump","toJS","enabled","isAutomerge","saveSince","stable.getBackend","stable.init","stable.clone","stable.from","stable.loadIncremental","stable.load","cursorToIndex","splice","newText","objPath","absoluteObjPath","updateText","block","splitBlock","joinBlock","updateBlock","updateBlocks","blocks","getCursor","getCursorPosition","mark","unmark","marks","marksAt","getConflicts","functionName","__wbg_getRandomValues_504510b5564925af","__wbg_randomFillSync_a0d98aa11c81fe89","__wbg_crypto_58f13aa23ffcb166","__wbg_process_5b786e71d465a513","__wbg_versions_c2ab80650590b6a2","__wbg_node_523d7bd03ef69fba","__wbg_msCrypto_abcb1295e768d1f2","__wbg_require_2784e593a4674877","__wbg_log_a4530b4fe289336f","__wbg_log_00cf3417193182f2","__wbg_get_f01601b5a68d10e3","__wbg_length_1009b1af0c481d7b","__wbg_new_ffc6d4d085022169","__wbg_newnoargs_c62ea9419c21fbac","__wbg_next_9b877f231f476d01","__wbg_next_6529ee0cca8d57ed","__wbg_done_5fe336b092d60cf2","__wbg_value_0c248a78fdc8e19f","__wbg_iterator_db7ca081358d4fb2","__wbg_get_7b48513de5dc5ea4","__wbg_call_90c26b09837aba1c","__wbg_new_9fb8d994e1c0aaac","__wbg_length_36658cb09b6ec34a","__wbg_set_f2740edb12e318cd","__wbg_from_71add2e723d1f1b2","__wbg_isArray_74fb723e24f76012","__wbg_push_901f3914205d44de","__wbg_unshift_5436cf2bdfb8635d","__wbg_instanceof_ArrayBuffer_e7d53d51371448e2","__wbg_new_a64e3f2afc2cf2f8","__wbg_call_5da1969d7cd31ccd","__wbg_instanceof_Date_cfa5d171ed8093a1","__wbg_getTime_9272be78826033e1","__wbg_new_d77fabdc03b9edd6","__wbg_instanceof_Object_702c4990f4c3db8d","__wbg_assign_6fdd54658ed70520","__wbg_defineProperty_2982dad69ce66029","__wbg_entries_9e2e2aa45aa5094a","__wbg_freeze_3cb3d8155bb1dc4d","__wbg_keys_fb74497f0cb41c2a","__wbg_values_ab825057174d69d1","__wbg_new_9fa4bec794556db1","__wbg_apply_4d8fcf4ddc362ff9","__wbg_deleteProperty_8c212ef4944e69d8","__wbg_ownKeys_7ac8657f7af0c859","__wbg_set_759f75cd92b612d2","__wbg_buffer_a448f833075b71ba","__wbg_concat_48d0d62f514d0161","__wbg_slice_be7863d04044cbc1","__wbg_for_bcf4067191afa30f","__wbg_toString_b18b2b1e8378cebc","__wbg_self_f0e34d89f33b99fd","__wbg_window_d3b084224f4774d7","__wbg_globalThis_9caa27ff917c6860","__wbg_global_35dfdd59a4da3e74","__wbg_newwithbyteoffsetandlength_d0482f893617af71","__wbg_new_8f67e318f15d7254","__wbg_set_2357bf09366ee480","__wbg_length_1d25fa9e4ac21ce7","__wbg_instanceof_Uint8Array_bced6f43aed8c1aa","__wbg_newwithlength_6c2df9e2f3028c43","__wbg_subarray_2e940e41c0f5a1d9","m","h","w","y","ms","fmtLong","fmtShort","str","match","msAbs","plural","isPlural","setup","env","createDebug","coerce","disable","require$$0","destroy","selectColor","namespace","prevTime","enableOverride","namespacesCache","enabledCache","self","curr","format","formatter","extend","delimiter","newDebug","namespaces","split","toNamespace","regexp","common","define_process_env_default","has","prefix","Events","EE","fn","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","handlers","l","ee","listeners","a1","a2","a3","a4","a5","j","module","__assign","__values","__read","r","ar","error","__spreadArray","to","pack","ActionTypes","SpecialTargets","stop","raise","send","cancel","nullEvent","assign","log","invoke","errorPlatform","update","choose","pure","STATE_DELIMITER","EMPTY_ACTIVITY_MAP","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","_a","matchesState","parentStateId","childStateId","parentStateValue","toStateValue","childStateValue","isString","getEventType","toStatePath","stateId","isArray","isStateLike","stateValue","pathToStateValue","statePath","marker","mapValues","collection","iteratee","collectionKeys","mapFilterValues","predicate","e_1","item","e_1_1","props","e_2","props_1","props_1_1","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","e_3_1","toStatePaths","flatten","subStateValue","subPath","array","toArrayStrict","toArray","mapContext","mapper","_event","e_5","isFunction","subMapper","e_5_1","isBuiltInEvent","eventType","isPromiseLike","isBehavior","partition","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","updateHistoryStates","hist","subHist","updateHistoryValue","updateContext","assignActions","updatedContext","acc","assignAction","e_7","assignment","partialUpdate","propAssignment","e_7_1","warn","toGuard","condition","guardMap","isObservable","symbolObservable","isMachine","isActor","toEventObject","payload","toSCXMLEvent","scxmlEvent","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","normalizeTarget","evaluateGuard","machine","guard","guards","guardMeta","condFn","toInvokeSource","src","toObserver","nextHandler","errorHandler","completionHandler","noop","isObserver","createInvokeId","stateNodeId","isRaisableAction","action","initEvent","getActionFunction","actionType","actionFunctionMap","toActionObject","actionObject","exec","toActionObjects","actions","subAction","toActivityDefinition","raise$1","resolveRaise","ctx","delaysMap","resolvedEvent","resolvedDelay","configDelay","send$1","resolveSend","resolvedTarget","resolveLog","sendId","cancel$1","activity","activityDef","actorRef","resolveStop","actorRefOrString","resolvedActorRef","assign$1","delayRef","id","idSuffix","done","doneInvoke","pluckAssigns","actionBlocks","actionBlocks_1","actionBlocks_1_1","resolveActions","currentState","currentContext","predictableExec","preserveActionOrder","preservedContexts","deferredToBlockEnd","handleAction","blockType","raisedAction","sendAction","log$1","resolved","choose$1","chooseAction","matchedActions","resolvedActionsFromChoose","resolvedContextFromChoose","pure$1","resolvedActionsFromPure","resolvedContext","stop$1","resolvedActionObject","exec_1","contextIndex_1","wrapped","_ctx","_i","processBlock","resolvedActions","serviceStack","provide","service","createNullActor","createInvocableActor","invokeDefinition","invokeSrc","serviceCreator","resolvedData","tempActor","createDeferredActor","entity","initialState_1","isSpawnedActor","toActorRef","actorRefLike","isLeafNode","stateNode","getAllChildren","getChildren","sn","getAllStateNodes","stateNodes","getConfiguration","prevStateNodes","e_4","_d","prevConfiguration","prevAdjList","getAdjList","configuration","configuration_1","configuration_1_1","adjList","configuration_2","configuration_2_1","_e","_f","child","configuration_3","configuration_3_1","e_4_1","getValueFromAdj","baseNode","childStateNodes","childStateNode","csn","configuration_4","configuration_4_1","getValue","rootNode","config","iterable","member","nextEvents","isInFinalState","getMeta","getTagsFromConfiguration","stateValuesEqual","a","b","aKeys","bKeys","isStateConfig","bindActionToState","boundAction","State","_this","valueKeys","tags","jsonValues","tag","transitionData","defaultOptions","Scheduler","task","nextCallback","children","sessionIdIndex","registry","getGlobal","getDevTools","global","registerService","devTools","spawnBehavior","behavior","observers","mailbox","flushing","flush","event_1","actorCtx","observer","next","complete","DEFAULT_SPAWN_OPTIONS","InterpreterStatus","Interpreter","immediate","isParent","error$1","actionOrExec","err","sendAction_1","invokeSource","autoForward","label","resolvedOptions","clock","logger","parent","resolvedId","actionsConfig","_g","_h","_j","_k","contextListener","finalChildStateNode","doneData","_l","_m","nextListenerOrObserver","_","completeListener","completeOnce","resolvedState","e_8","e_9","e_10","e_8_1","_o","e_9_1","_p","_q","e_10_1","scheduler","exitActions","e_11","batchChanged","batchedActions","_loop_1","events_1","events_1_1","e_11_1","nextEvent","e_12","e_12_1","timerId","childId","childService","doneEvent","promise","canceled","errorData","errorEvent","unsubscribed","receivers","emitted","receive","callbackStop","newListener","receiver","subscription","implementation","dispose","devToolsOptions","interpret","interpreter","simpleSrc","toInvokeDefinition","invokeConfig","invokeDef","NULL_EVENT","STATE_IDENTIFIER","WILDCARD","EMPTY_OBJECT","isStateId","createDefaultOptions","StateNode","_context","_stateInfo","stateConfig","order","dfs","invokeId","activities","services","delays","transition","eventName","transient","candidates","sameEventType","afterConfig","mutateEntryExit","delay","delayedTransitions","configTransition","resolvedTransition","delayedTransition","initialStateValue","subStateKeys","subStateNodes","subStateKey","stateFromConfig","transitionMap","subStateNode","stateTransitions","enabledTransitions","st","willTransition","nextStateNodes","selectedTransition","candidate","cond","stateIn","isInState","guardPassed","allNextStateNodes","isInternal","targetNode","nodes","possibleAncestor","resolvedConfig","isDone","prevState","prevConfig","entrySet","prevConfig_1","prevConfig_1_1","entryStates","exitStates","doneEvents","grandparent","parentNode","entryActions","invokeActions","stopActions","resolvedStateValue","stateTransition","originalEvent","currentActions","resolvedConfiguration","historyValue","start$1","raisedEvents","nonRaisedActions","didUpdateContext","hasAlwaysTransitions","maybeNextState","raisedEvent","changed","stateKey","resolvedStateId","arrayStatePath","currentStateNode","stateIdentifier","historyConfig","relativeStateId","resolve","initialStateNodePaths","initialPath","relativePath","childStatePath","relativeStateValue","historyTarget","relativeChildPath","subHistoryValue","subStatePath","childStateIds","states","_target","isInternalTarget","targetStateNode","transitionConfig","normalizedTarget","internal","onConfig","wildcardConfigs","strictTransitionConfigs_1","transitionConfigArray","eventlessConfig","doneConfig","settleTransitions","formattedTransitions","delayedTransitions_1","delayedTransitions_1_1","createMachine","exports","waitFor_1","_tslib","defaultWaitForOptions","waitFor","res","rej","sub","waitFor_2","_assert","number","bool","isBytes","lengths","exists","checkFinished","output","out","min","assert","crypto","crypto_1","u8","u32","createView","rotr","word","shift","hexes","bytesToHex","hex","asciis","asciiToBase16","char","hexToBytes","hl","al","ai","hi","n1","n2","nextTick","asyncLoop","iters","tick","cb","ts","utf8ToBytes","toBytes","concatBytes","arrays","sum","pad","Hash","toStr","checkOpts","defaults","wrapConstructor","hashCons","hashC","tmp","wrapConstructorWithOpts","wrapXOFConstructorWithOpts","randomBytes","bytesLength","_sha2","_assert_js_1","utils_js_1","require$$1","setBigUint64","byteOffset","isLE","_32n","_u32_max","wh","wl","SHA2","blockLen","outputLen","padOffset","pos","take","dataView","oview","outLen","finished","destroyed","sha256","_sha2_js_1","Chi","c","Maj","SHA256_K","IV","SHA256_W","SHA256","A","B","C","D","E","F","G","H","W15","W2","s0","s1","sigma1","T1","T2","SHA224","base","ALPHABET","BASE_MAP","xc","BASE","LEADER","FACTOR","iFACTOR","encode","zeroes","pbegin","pend","size","b58","carry","it1","it2","decodeUnsafe","psz","b256","it3","it4","vch","decode","string","basex","bs58","base58","checksumFn","payloadU8","checksum","both","decodeRaw","newChecksum","bs58checkBase","sha256x2","bs58check","urlPrefix","parseAutomergeUrl","regex","docMatch","documentId","binaryDocumentId","documentIdToBinary","stringifyAutomergeUrl","encodedDocumentId","binaryToDocumentId","isValidAutomergeUrl","automergeUrl","isValidDocumentId","binaryDocumentID","Uuid.stringify","Uuid.validate","isValidUuid","generateAutomergeUrl","Uuid.v4","docId","interpretAsDocumentId","Uuid.parse","decoder","srcEnd","position","LEGACY_RECORD_INLINE_ID","RECORD_DEFINITIONS_ID","RECORD_INLINE_ID","BUNDLED_STRINGS_ID","PACKED_REFERENCE_TAG_ID","STOP_CODE","currentDecoder","currentStructures","srcString","srcStringStart","srcStringEnd","bundledStrings","referenceMap","currentExtensions","currentExtensionRanges","packedValues","restoreMapsAsObject","sequentialMode","inlineObjectReadThreshold","Decoder","rec","safeKey","saveState","clearSource","checkedRead","forEach","lastPosition","defaultDecoder","read","token","majorType","getFloat16","multiplier","mult10","readBin","shortStringInJS","longStringInJS","readFixedString","structure","createStructureReader","readJustLength","recordDefinition","readBundleExt","loadShared","extension","input","Tag","packedValue","getPackedValues","validName","readObject","compiledReader","readStringJS","units","byte1","byte2","byte3","byte4","unit","fromCharCode","byte","g","f32Array","u8Array","byte0","exponent","abs","dateString","epochSec","fraction","existingStructure","glbl","packedTable","newPackedValues","refEntry","targetProperties","combine","SHARED_DATA_TAG_ID","isLittleEndianMachine","typedArrays","typedArrayTags","registerTypedArray","TypedArray","dvMethod","bytesPerElement","littleEndian","sizeShift","dv","elements","ta","method","bundlePosition","bundleLength","dataPosition","sharedData","updatedStructures","savedSrcEnd","savedPosition","savedSrcStringStart","savedSrcStringEnd","savedSrcString","savedReferenceMap","savedBundledStrings","savedSrc","savedStructures","savedDecoder","savedSequentialMode","textEncoder","extensions","extensionClasses","Buffer","hasNodeBuffer","ByteArrayAllocate","ByteArray","MAX_STRUCTURES","MAX_BUFFER_SIZE","throwOnIterable","targetView","safeEnd","MAX_BUNDLE_SIZE","hasNonLatin","RECORD_SYMBOL","Encoder","sharedStructures","hasSharedUpdate","structures","encodeUtf8","maxBytes","encoder","hasSharedStructures","maxSharedStructures","isSequential","samplingPackedValues","packedObjectMap","sharedValues","sharedPackedObjectMap","recordIdsToRemove","transitionsCount","serializationsSinceTransitionRebuild","encodeOptions","REUSE_BUFFER_MODE","sharedStructuresLength","nextTransition","findRepetitiveStrings","writeArrayHeader","valuesArray","THROW_ON_ITERABLE","writeBundles","makeRoom","serialized","insertIds","returnBuffer","RESET_BUFFER_MODE","threshold","status","packedPosition","strLength","extStart","twoByte","headerSize","c1","c2","strPosition","useFloat32","xShifted","referee","idsToInsert","constructor","writeObject","entryValue","extensionClass","entry","isBlob","json","safePrototype","objectOffset","newTransitions","parentRecordId","recordId","newSize","newBuffer","chunkThreshold","continuedChunkThreshold","startEncoding","encodeObjectAsIterable","encodeObjectAsAsyncIterable","iterateProperties","finalIterable","useRecords","writeEntityLength","tryEncode","restartEncoding","restart","encodeIterable","encodedValue","reader","asyncValue","lastVersion","structuresCopy","SharedData","saveResults","existingShared","majorValue","version","BlobConstructor","packedStatus","includeKeys","date","seconds","set","arrayBuffer","writeBuffer","typedArray","typedArrayEncoder","definitions","nextId","distanceToMove","lastEnd","writeStrings","defaultEncoder","cborXdecode","arraysAreEqual","element","headsAreSame","withTimeout","timeoutId","timeoutPromise","reject","TimeoutError","DocHandle","#log","#machine","#timeoutDelay","#remoteHeads","isNew","A.from","A.emptyChange","A.init","IDLE","READY","LOADING","DELETED","REQUESTING","AWAITING_NETWORK","UNAVAILABLE","oldDoc","newDoc","A.getHeads","A.diff","REQUEST_COMPLETE","CREATE","FIND","#doc","#state","#statePromise","awaitStates","awaitStatesArray","HandleState","UPDATE","storageId","A.change","resultHeads","A.changeAt","otherHandle","mergingDoc","A.merge","MARK_UNAVAILABLE","REQUEST","AWAIT_NETWORK","NETWORK_READY","DELETE","Event","TIMEOUT","RemoteHeadsSubscriptions","#knownHeads","#ourSubscriptions","#theirSubscriptions","#generousPeers","#subscribedDocsByPeer","remotes","remotesToAdd","remotesToRemove","control","addedRemotesWeKnow","theirSubs","subscribedDocs","knownHeads","lastHeads","changedHeads","#changedHeads","peer","peerId","#isPeerSubscribedToDoc","timestamp","docRemote","peerIds","remoteHeads","subscribedPeers","newHeads","throttle","lastCall","wait","timeout","isRepoMessage","isSyncMessage","isEphemeralMessage","isRequestMessage","isDocumentUnavailableMessage","isRemoteSubscriptionControlMessage","isRemoteHeadsChanged","getEphemeralMessageSource","NetworkSubsystem","#adaptersByPeer","#count","#sessionId","#ephemeralSessionCounts","#readyAdapterCount","#adapters","adapters","randomPeerId","peerMetadata","networkAdapter","outbound","mergeArrays","myArrays","mergedArray","factory","this","K","hashBlocks","u","t1","t2","dataLength","dataPos","bytesHashed","left","bitLenHi","bitLenLo","padLength","HMAC","digest","hmac","fillBuffer","info","counter","hkdfSalt","hkdf","salt","okm","hmac_","bufpos","pbkdf2","password","iterations","dkLen","prf","ctr","dk","keyHash","binary","sha256.hash","bufferToHexString","headsHash","headsbinary","chunkTypeFromKey","chunkTypeStr","StorageSubsystem","#storageAdapter","#storedHeads","#chunkInfos","#compacting","storageAdapter","storedId","storageKey","chunks","binaries","chunkInfos","chunk","chunkType","A.loadIncremental","#shouldSave","sourceChunks","#shouldCompact","#saveTotal","#saveIncremental","A.saveSince","A.save","snapshotHash","oldKeys","newChunkInfos","loaded","A.decodeSyncState","A.encodeSyncState","oldHeads","snapshotSize","incrementalSize","Synchronizer","DocSynchronizer","#peers","#pendingSyncStateCallbacks","#peerDocumentStatuses","#syncStates","#pendingSyncMessages","#syncStarted","#handle","#onLoadSyncState","onLoadSyncState","#syncWithPeers","#broadcastToPeers","#processAllPendingSyncMessages","#sendSyncMessage","#sendEphemeralMessage","#withSyncState","#addPeer","pendingCallbacks","#initSyncState","A.initSyncState","#setSyncState","newSyncState","A.generateSyncMessage","noPeersWithDocument","docPromise","#checkDocUnavailable","reparsedSyncState","senderId","contents","#processSyncMessage","A.decodeSyncMessage","A.receiveSyncMessage","CollectionSynchronizer","#docSynchronizers","#docSetUp","repo","#fetchDocSynchronizer","#initDocSynchronizer","docSynchronizer","isEphemeral","#documentGenerousPeers","peers","generousPeers","okToShare","Repo","#handleCache","#synchronizer","#remoteHeadsSubscriptions","#remoteHeadsGossipingEnabled","storage","network","sharePolicy","enableRemoteHeadsGossiping","storageSubsystem","saveFn","loadedDoc","networkSubsystem","myPeerMetadata","shouldShare","#receiveMessage","#saveSyncState","#throttledSaveSyncStateHandlers","handler","#getHandle","clonedHandle","sourceDoc","Automerge.clone","Automerge.save","Automerge.load","NetworkAdapter","StorageAdapter","IndexedDBStorageAdapter","database","store","request","db","keyArray","transaction","keyPrefix","lowerBound","upperBound","ws","WebSocket$1","isPeerMessage","isErrorMessage","ProtocolV1","trimLines","removeLine","targetText","line","toArrayBuffer","byteLength","WebSocketNetworkAdapter","BrowserWebSocketClientAdapter","#isReady","#retryIntervalId","retryInterval","WebSocket","#ready","joinMessage","encoded","cbor.encode","remotePeerId","messageBytes","cbor.decode","BroadcastChannelNetworkAdapter","#broadcastChannel","#options","#announceConnection","automerge"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101]}